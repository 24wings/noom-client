function _createForOfIteratorHelper(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=_unsupportedIterableToArray(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(s)throw a}}}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,n){if(e){if("string"==typeof e)return _arrayLikeToArray(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,n):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}function _inherits(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&_setPrototypeOf(e,n)}function _setPrototypeOf(e,n){return(_setPrototypeOf=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function _createSuper(e){var n=_isNativeReflectConstruct();return function(){var t,i=_getPrototypeOf(e);if(n){var r=_getPrototypeOf(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(e,n){return!n||"object"!=typeof n&&"function"!=typeof n?_assertThisInitialized(e):n}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"9M/x":function(e,n){e.exports='\x3c!--suppress TypeScriptUnresolvedVariable --\x3e\r\n\r\n\r\n<div nz-row>\r\n    <div nz-col nzSpan="18">\r\n        <nz-input-group [nzAddOnAfter]="suffixIconButton" nzSearch>\r\n            <input type="text" nz-input [placeholder]="l(\'Search\')" />\r\n            <ng-template #suffixIconButton>\r\n                <button nz-button nzType="primary" (click)="getOrganizationUnitRoles()" nzSearch><i nz-icon\r\n                        nzType="search"></i></button>\r\n            </ng-template>\r\n        </nz-input-group>\r\n\r\n\r\n    </div>\r\n    <div nz-col nzSpan="6">\r\n        \x3c!-- Todo: --\x3e\r\n        <a nz-button nzType="link"\r\n            *ngIf="(\'Pages.Administration.OrganizationUnits.ManageRoles\' | permission) && organizationUnit"\r\n            (click)="openAddRoleModal()"><i nz-icon nzType="plus"></i>{{l(\'AddMember\')}}</a>\r\n        <a nz-button nzType="link" (click)="removeRoleBat()"> <i nz-icon nzType="delete"></i> {{l(\'Remove\')}} </a>\r\n    </div>\r\n</div>\r\n<div class="row">\r\n    <nz-alert style="width: 100%;padding-top:20px;padding-bottom: 20px;" nzType="info"\r\n        [nzMessage]="\'\u5df2\u9009\u62e9\'+getSelectedItems()+\'\u6761\'" nzShowIcon>\r\n    </nz-alert>\r\n    <st style="width: 100%;" [widthMode]="\'default\'" [data]="dataList" [columns]="columns" [loading]="loading"\r\n        [page]="{pageNumber:pageNumber,show:show,totalItems:totalItems,totalPages:totalPages}"></st>\r\n</div>\r\n\r\n\r\n<div *ngIf="!organizationUnit" class="text-muted">\r\n    {{ "SelectAnOrganizationUnitToSeeRoles" | localize }}\r\n</div>\r\n\r\n<addRoleModal #addRoleModal (rolesAdded)="addRoles($event)"></addRoleModal>'},BX2c:function(e,n){e.exports='<nz-tree-select [nzNodes]="treeNodes" [(ngModel)]="selectedPermissions" [nzDefaultExpandAll]="true" style="width: 100%;"\r\n  [nzMultiple]="true" [nzAllowClear]="true" (ngModelChange)="change()">\r\n\r\n</nz-tree-select>'},Deuk:function(e,n){e.exports='<ng-container *ngIf="active">\r\n  <nz-modal [nzVisible]="active" (nzOnOk)="save()" [nzOkDisabled]="editForm?false:(editForm?.form.valid)"\r\n            (nzOnCancel)="close()">\r\n    <div class="modal-dialog modal-lg">\r\n      <div class="modal-content">\r\n        <form #editForm="ngForm" (ngSubmit)="save()" novalidate>\r\n          <div class="modal-header">\r\n            <h5 class="modal-title">\r\n              <span *ngIf="organizationUnit.id">{{ "Edit" | localize }}:\r\n                {{ organizationUnit.displayName }}</span>\r\n              <span *ngIf="!organizationUnit.id">{{ "NewOrganizationUnit" | localize }}</span>\r\n            </h5>\r\n\r\n          </div>\r\n\r\n          <div class="modal-body">\r\n            <nz-form-item>\r\n              <nz-form-label for="OrganizationUnitDisplayName" nzRequired>{{ "Name" | localize }} </nz-form-label>\r\n              <nz-form-control>\r\n                <input nz-input #organizationUnitDisplayName="ngModel"\r\n                       [(ngModel)]="organizationUnit.displayName"\r\n                       [ngClass]="{ edited: organizationUnit.displayName }" class="form-control"\r\n                       id="OrganizationUnitDisplayName" maxlength="128" name="displayName" required\r\n                       type="text" />\r\n                <validation-messages [formCtrl]="organizationUnitDisplayName"></validation-messages>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n\r\n\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </nz-modal>\r\n</ng-container>\r\n'},EMe1:function(e,n){e.exports='<nz-modal [nzVisible]="isShown" [nzTitle]="l(\'SelectUsers\')" (nzOnOk)="addUsersToOrganizationUnit()"\r\n    [nzOkDisabled]="saving" (nzOnCancel)="close()" [nzCancelDisabled]="saving">\r\n\r\n\r\n    <div class="modal-body">\r\n        <form (ngSubmit)="refreshTable()" autocomplete="off" novalidate>\r\n\r\n            <nz-input-group nzSearch [nzAddOnAfter]="suffixIconButton">\r\n                <input type="text" name="filterText" [(ngModel)]="filterText" nz-input\r\n                    placeholder="{{ \'SearchWithThreeDot\' | localize }}" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconButton>\r\n                <button nz-button nzType="primary" type="submit" nzSearch><i nz-icon nzType="search"></i></button>\r\n            </ng-template>\r\n            <st #dataTable [columns]="columns" [data]="dataList" [loading]="loading"\r\n                [page]="{pageNumber:pageNumber,show:show,totalItems:totalItems,totalPages:totalPages}"></st>\r\n\r\n        </form>\r\n    </div>\r\n\r\n\r\n</nz-modal>'},Eigk:function(e,n){e.exports='<ng-container *ngIf="tenant&&active">\r\n  <nz-modal [nzVisible]="active" [nzTitle]="l(\'EditTenant\')+\':\'+tenant.tenancyName" (nzOnCancel)="close()"\r\n    (nzOnOk)="save()" [nzOkDisabled]="saving">\r\n    <div class="modal-dialog modal-lg">\r\n      <div class="modal-content">\r\n        <form #tenantEditForm="ngForm" (submit)="save()" *ngIf="tenant && active" class="form-validation" novalidate\r\n          role="form">\r\n          <div class="modal-body">\r\n            <nz-form-item class="form-group">\r\n              <nz-form-label for="Name" nzRequired nzFlex="100px" nz-col>{{ "TenantName" | localize }} </nz-form-label>\r\n              <nz-form-control nz-col nzFlex="auto">\r\n                <input nz-input #nameInput="ngModel" [(ngModel)]="tenant.name" [ngClass]="{ edited: tenant.name }"\r\n                  class="form-control" id="Name" maxlength="128" name="Name" required type="text" />\r\n                <validation-messages [formCtrl]="nameInput"></validation-messages>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n            <nz-form-item *ngIf="currentConnectionString" class="form-group">\r\n              <nz-form-label nz-col nzFlex="100px" for="DatabaseConnectionString" nzRequired>\r\n                {{ "DatabaseConnectionString" | localize }} *\r\n              </nz-form-label>\r\n              <nz-form-control nz-col nzFlex="auto">\r\n                <input nz-input #connectionStringInput="ngModel" [(ngModel)]="tenant.connectionString"\r\n                  class="form-control" id="DatabaseConnectionString" maxlength="1024" name="ConnectionString" required\r\n                  type="text" />\r\n                <validation-messages [formCtrl]="connectionStringInput"></validation-messages>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n            <div *ngIf="currentConnectionString">\r\n              <span\r\n                class="help-block text-warning">{{ "TenantDatabaseConnectionStringChangeWarningMessage" | localize }}</span>\r\n            </div>\r\n            <nz-form-item class="form-group">\r\n              <nz-form-label for="edition" nz-col nzFlex="100px">{{ "Edition" | localize }}</nz-form-label>\r\n              <nz-form-control nz-col nzFlex="auto">\r\n                <nz-select (change)="onEditionChange()" [(ngModel)]="tenant.editionId" class="form-control" id="edition"\r\n                  style="width: 250px;" name="edition">\r\n                  <nz-option *ngFor="let edition of editions" [nzValue]="edition.value" [nzLabel]="edition.displayText">\r\n                  </nz-option>\r\n                </nz-select>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n            <nz-form-item [hidden]="!isSubscriptionFieldsVisible" class="kt-checkbox-list">\r\n              <nz-form-label class="kt-checkbox" nz-col nzFlex="100px">\r\n                <input nz-input (ngModelChange)="onUnlimitedChange()" [(ngModel)]="isUnlimited"\r\n                  id="CreateTenant_IsUnlimited" name="IsUnlimited" type="checkbox" />\r\n              </nz-form-label>\r\n              <nz-form-control nzFlex="auto" nz-col>\r\n                {{ "UnlimitedTimeSubscription" | localize }}\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n\r\n            <nz-form-item [hidden]="isUnlimited || !isSubscriptionFieldsVisible"\r\n              [ngClass]="{ \'has-error\': !subscriptionEndDateUtcIsValid }" class="form-group">\r\n              <nz-form-label nz-col nzFlex="100px" for="SubscriptionEndDateUtc">\r\n                {{ "SubscriptionEndDateUtc" | localize }}</nz-form-label>\r\n              <nz-form-control nzFlex="auto" nz-col>\r\n                <nz-range-picker #SubscriptionEndDateUtc (dateChange)="subscriptionEndDateChange($event)"\r\n                  [(ngModel)]="tenant.subscriptionEndDateUtc" [required]="!isUnlimited" bsDatepicker\r\n                  class="form-control" datePickerMomentModifier id="SubscriptionEndDateUtc"\r\n                  name="SubscriptionEndDateUtc" type="datetime">\r\n                </nz-range-picker>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n\r\n            <nz-form-item [hidden]="!isSubscriptionFieldsVisible" class="kt-checkbox-list">\r\n              <nz-form-label class="kt-checkbox" nz-col nzFlex="100px">\r\n                <input [(ngModel)]="tenant.isInTrialPeriod" [disabled]="selectedEditionIsFree()"\r\n                  id="CreateTenant_IsInTrialPeriod" name="IsInTrialPeriod" type="checkbox" />\r\n\r\n                <span></span>\r\n              </nz-form-label>\r\n              <nz-form-control nz-col nzFlex="auto">\r\n                {{ "IsInTrialPeriod" | localize }}\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n\r\n            <nz-form-item class="kt-checkbox-list">\r\n              <nz-form-label class="kt-checkbox" nz-col nzFlex="100px">\r\n                <input [(ngModel)]="tenant.isActive" id="EditTenant_IsActive" name="IsActive" type="checkbox" />\r\n\r\n                <span></span>\r\n              </nz-form-label>\r\n              <nz-form-control nz-col nzFlex="auto">{{ "Active" | localize }}</nz-form-control>\r\n            </nz-form-item>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </nz-modal>\r\n</ng-container>'},GupK:function(e,n){e.exports='<nz-modal [nzTitle]="\'\u65b0\u589e\u793e\u533a\'" [nzVisible]="active" [nzWidth]="600" [nzOkDisabled]="!canSubmit" (nzOnOk)="save()"\r\n          (nzOnCancel)="active=false">\r\n  <div *ngIf="active" autocomplete="off" novalidate>\r\n\r\n    <nz-form-item>\r\n\r\n      <nz-form-label nzRequired>{{ "\u793e\u533a\u540d\u79f0" | localize }}</nz-form-label>\r\n      <nz-form-control>\r\n        <input nz-input #roleNameInput="ngModel" [(ngModel)]="topic.name" class="form-control"\r\n               id="RoleDisplayName" maxlength="64" name="DisplayName" required type="text" />\r\n        <validation-messages [formCtrl]="roleNameInput"></validation-messages>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    <nz-form-item>\r\n      <nz-form-label nzRequired>{{"\u662f\u5426\u542f\u7528"|localize}}</nz-form-label>\r\n      <nz-form-control>\r\n        <nz-switch [(ngModel)]="topic.is_open"></nz-switch>\r\n      </nz-form-control>\r\n\r\n    </nz-form-item>\r\n    <nz-form-item>\r\n      <nz-form-label nzRequired>{{"\u5730\u5740\u4fe1\u606f"|localize}}</nz-form-label>\r\n      <nz-form-control>\r\n        <nz-cascader [nzOptions]="options" [(ngModel)]="addressList"></nz-cascader>\r\n\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n\r\n\r\n\r\n  </div>\r\n</nz-modal>\r\n'},H8yg:function(e,n,t){"use strict";t.r(n),n.default=""},IEtI:function(e,n){e.exports='<nz-modal [nzVisible]="visible" [nzTitle]="\'\u7f16\u8f91\u6743\u9650\'" (nzOnOk)="submit()" (nzOnCancel)="close()" [nzFooter]="tplFooter"\r\n  [scrollbar]="true">\r\n  <nz-alert nzType="warning" [nzMessage]="l(\'Note_RefreshPageForPermissionChanges\')" nzShowIcon></nz-alert>\r\n\r\n\r\n  <nz-tree-select #treeSelect style="width: 100%; margin-top: 20px;" [(ngModel)]="value" [nzNodes]="nodes" nzShowSearch\r\n    nzCheckable [nzDefaultExpandAll]="true" [nzPlaceHolder]="l(\'SelectPermissions\')">\r\n    \x3c!-- <ng-template #nzTreeTemplate let-node>\r\n      <span class="ant-tree-node-content-wrapper" [class.ant-tree-node-selected]="node.isSelected">\r\n        <span> <i nz-icon [nzType]="node.isExpanded ? \'folder-open\' : \'folder\'"></i> {{ node.title }} </span>\r\n      </span>\r\n    </ng-template> --\x3e\r\n  </nz-tree-select>\r\n  <ng-template #tplFooter>\r\n    <button nz-button nzType="primary" (click)="resetPermissions()" [nzLoading]="saving">\r\n      {{l(\'ResetSpecialPermissions\')}}\r\n    </button>\r\n    <button nz-button (click)="close()">{{l(\'Cancel\')}}</button>\r\n    <button nz-button (click)="submit()">{{l(\'Save\')}}</button>\r\n  </ng-template>\r\n\r\n</nz-modal>'},Os5t:function(e,n){e.exports='<nz-modal [nzVisible]="isShown" [nzTitle]="l(\'SelectRoles\')" (nzOnCancel)="close()"\r\n    (nzOnOk)="addRolesToOrganizationUnit()" [nzOkDisabled]="saving">\r\n\r\n\r\n    <div class="modal-body">\r\n        <form (ngSubmit)="refreshTable()" autocomplete="off" novalidate>\r\n            <div class="input-group mb-2">\r\n                <nz-input-group nzSearch [nzAddOnAfter]="suffixIconButton">\r\n                    <input type="text" name="filterText" [(ngModel)]="filterText" nz-input\r\n                        placeholder="{{ \'SearchWithThreeDot\' | localize }}" />\r\n                </nz-input-group>\r\n                <ng-template #suffixIconButton>\r\n                    <button nz-button nzType="primary" type="submit" nzSearch><i nz-icon nzType="search"></i></button>\r\n                </ng-template>\r\n\r\n            </div>\r\n            <st [data]="dataList" [columns]="columns" [loading]="loading"\r\n                [page]="{pageNumber:pageNumber,show:show,totalItems:totalItems,totalPages:totalPages}"></st>\r\n        </form>\r\n    </div>\r\n\r\n\r\n\r\n</nz-modal>'},PlHq:function(e,n){e.exports='\x3c!--suppress TypeScriptUnresolvedVariable --\x3e\r\n<nz-modal [nzVisible]="active" (nzOnCancel)="close()" (nzOnOk)="save()"\r\n  [nzTitle]="!language.id?l(\'CreateNewLanguage\'):l(\'EditLanguage\')">\r\n\r\n  <form #editForm="ngForm" (ngSubmit)="save()" *ngIf="active" novalidate>\r\n    <nz-form-item>\r\n\r\n      <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="email">{{l(\'Language\')}}</nz-form-label>\r\n      <nz-form-control [nzSm]="14" [nzXs]="24">\r\n        <nz-select style="width: 100%;" #languageCombobox="ngModel" [(ngModel)]="language.name" name="languageName">\r\n          <nz-option [nzValue]="l.value" [nzLabel]="l.label" *ngFor="let l of languageNamesSelectItems"></nz-option>\r\n        </nz-select>\r\n        <validation-messages [formCtrl]="languageCombobox"></validation-messages>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    <nz-form-item>\r\n      <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="email">{{l(\'LanguageIcon\')}}</nz-form-label>\r\n      <nz-form-control [nzSm]="14" [nzXs]="24">\r\n        <nz-select style="width: 100%;" #iconCombobox="ngModel" [(ngModel)]="language.icon" name="languageIcon">\r\n          <nz-option [nzValue]="l.value" [nzLabel]="l.label" *ngFor="let l of flagsSelectItems"></nz-option>\r\n        </nz-select>\r\n        <validation-messages [formCtrl]="iconCombobox"></validation-messages>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n\r\n    <nz-form-item>\r\n      <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="email">{{l(\'IsEnabled\')}}</nz-form-label>\r\n      <nz-form-control [nzSm]="14" [nzXs]="24">\r\n        <nz-switch #swichCombox [(ngModel)]="language.isEnabled" id="EditLanguage_IsEnabled" name="languageIsEnabled"\r\n          [nzCheckedChildren]="\'\u542f\u7528\'" [nzUnCheckedChildren]="\'\u7981\u7528\'">\r\n        </nz-switch>\r\n        <validation-messages [formCtrl]="swichCombox"></validation-messages>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n\r\n\r\n\r\n\r\n\r\n  </form>\r\n\r\n</nz-modal>'},RPN6:function(e,n){e.exports='<ng-container *ngIf="active">\r\n  <nz-modal [nzVisible]="active" [nzTitle]="l(\'Features\')" [nzFooter]="tplFooter">\r\n    <div class="modal-dialog modal-lg">\r\n      <div class="modal-content">\r\n        <form #editTenantFeaturesForm="ngForm" (submit)="save()" class="form-validation" name="editTenantFeaturesForm"\r\n          novalidate role="form">\r\n\r\n          <div class="modal-body">\r\n            <feature-tree #featureTree></feature-tree>\r\n          </div>\r\n\r\n\r\n          <ng-template #tplFooter>\r\n            <button (click)="resetFeatures()" nz-button [disabled]="saving"\r\n              type="button"><span>{{ "ResetSpecialFeatures" | localize }}</span></button>\r\n            <button nz-button (click)="close()" [disabled]="saving || resettingFeatures"\r\n              type="button">{{ "Cancel" | localize }}</button>\r\n            <button nz-button [nzLoading]="saving" (click)="save()" [disabled]="resettingFeatures" nzType="primary"\r\n              type="submit">\r\n              <i class="fa fa-save"></i> <span>{{ "Save" | localize }}</span>\r\n            </button>\r\n          </ng-template>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </nz-modal>\r\n\r\n</ng-container>'},SdCQ:function(e,n){e.exports='<nz-modal [nzTitle]="\'\u65b0\u589e\u793e\u533a\'" [nzVisible]="active" [nzWidth]="600" [nzOkDisabled]="!canSubmit" (nzOnOk)="save()"\r\n          (nzOnCancel)="active=false">\r\n  <div *ngIf="active" autocomplete="off" novalidate>\r\n\r\n    <nz-form-item>\r\n\r\n      <nz-form-label nzRequired>{{ "\u5e97\u94fa\u540d\u79f0" | localize }}</nz-form-label>\r\n      <nz-form-control>\r\n        <input nz-input #roleNameInput="ngModel" [(ngModel)]="distribut.shop_name" class="form-control"\r\n               id="RoleDisplayName" maxlength="64" name="DisplayName" required type="text" />\r\n        <validation-messages [formCtrl]="roleNameInput"></validation-messages>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    <nz-form-item>\r\n      <nz-form-label nzRequired>{{"\u5e97\u94fa\u7b7e\u540d"|localize}}</nz-form-label>\r\n      <nz-form-control>\r\n        <input nz-input #roleNameInput="ngModel" [(ngModel)]="distribut.shop_sign" class="form-control"\r\n               id="RoleDisplayName" maxlength="64" name="DisplayName" required type="text" />\r\n        <validation-messages [formCtrl]="roleNameInput"></validation-messages>\r\n      </nz-form-control>\r\n\r\n    </nz-form-item>\r\n\r\n    <nz-form-item>\r\n      <nz-form-label nzRequired>{{"\u5546\u6237\u6635\u79f0"|localize}}</nz-form-label>\r\n      <nz-form-control>\r\n        <input nz-input #roleNameInput="ngModel" [(ngModel)]="distribut.nickname" class="form-control"\r\n               id="RoleDisplayName" maxlength="64" name="DisplayName" required type="text" />\r\n        <validation-messages [formCtrl]="roleNameInput"></validation-messages>\r\n      </nz-form-control>\r\n\r\n    </nz-form-item>\r\n    <nz-form-item>\r\n      <nz-form-label nzRequired>{{"\u95e8\u724c\u53f7"|localize}}</nz-form-label>\r\n      <nz-form-control>\r\n        <input nz-input #roleNameInput="ngModel" [(ngModel)]="distribut.neighbourNum" class="form-control"\r\n               id="RoleDisplayName" maxlength="64" name="DisplayName" required type="text" />\r\n        <validation-messages [formCtrl]="roleNameInput"></validation-messages>\r\n      </nz-form-control>\r\n\r\n    </nz-form-item>\r\n\r\n  </div>\r\n</nz-modal>\r\n'},VfjP:function(e,n){e.exports='<ng-container *ngIf="active">\r\n  <nz-modal [nzVisible]="active" [nzTitle]="l(\'EditText\')" [nzOkText]="l(\'Save\')"\r\n    [nzOkDisabled]="editForm?!editForm.form.valid:true" (nzOnCancel)="close()" (nzOnOk)="save()">\r\n\r\n    <form #editForm="ngForm" nz-form nzLayout="vertical" (ngSubmit)="save()" novalidate>\r\n      <nz-form-item>\r\n        <nz-form-label>{{ "Key" | localize }}</nz-form-label>\r\n        <nz-form-control>\r\n          <strong>{{ model.key }}</strong>\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n      <nz-form-item class="form-group form-md-line-input form-md-floating-label no-hint">\r\n        <nz-form-label for="BaseLanguageDisplayName"><i class="{{ baseLanguage.icon }}"></i>\r\n          {{ baseLanguage.displayName }}\r\n        </nz-form-label>\r\n        <nz-form-control>\r\n          <textarea nz-input [ngModel]="baseText" class="form-control edited" id="BaseLanguageDisplayName"\r\n            name="baseText" readonly rows="4"></textarea>\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n      <nz-form-item>\r\n        <nz-form-label for="TargetLanguageDisplayName"><i class="{{ targetLanguage.icon }}"></i>\r\n          {{ targetLanguage.displayName }} </nz-form-label>\r\n        <nz-form-control>\r\n          <textarea nz-input #targetValueInput [(ngModel)]="model.value" [ngClass]="{ edited: model.value }"\r\n            class="form-control" id="TargetLanguageDisplayName" name="value" rows="4"></textarea>\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n    </form>\r\n\r\n  </nz-modal>\r\n</ng-container>'},WGMk:function(e,n){e.exports='<ng-container *ngIf="active">\r\n  <nz-modal [nzVisible]="active" (nzOnCancel)="close()" (nzOnOk)="save()" [nzOkDisabled]="saving"\r\n    [nzCancelDisabled]="saving">\r\n    <div class="modal-dialog modal-lg">\r\n      <div class="modal-content">\r\n        <form #editionForm="ngForm" (ngSubmit)="save()" novalidate>\r\n          <div class="modal-header">\r\n            <h5 class="modal-title">\r\n              <span>{{ l("EditEdition") }}: {{ edition.edition.displayName }}</span>\r\n            </h5>\r\n            <button (click)="close()" [attr.aria-label]="l(\'Close\')" [disabled]="saving" class="close" type="button">\r\n              <span aria-hidden="true">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div class="modal-body">\r\n            <nz-tabset>\r\n              <nz-tab nzTitle="{{ l(\'EditionProperties\') }}">\r\n                <nz-form-item>\r\n                  <nz-form-label for="EditionDisplayName" nzRequired>{{ l("EditionName") }} </nz-form-label>\r\n                  <nz-form-control>\r\n                    <input #editionNameInput="ngModel" nz-input [(ngModel)]="edition.edition.displayName"\r\n                      [ngClass]="edition.edition.displayName" class="form-control" id="EditionDisplayName"\r\n                      maxlength="64" name="EditionDisplayName" required type="text" />\r\n                    <validation-messages [formCtrl]="editionNameInput"></validation-messages>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n              </nz-tab>\r\n              <nz-tab nzTitle="{{ l(\'Features\') }}">\r\n                <feature-tree #featureTree></feature-tree>\r\n              </nz-tab>\r\n            </nz-tabset>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </nz-modal>\r\n</ng-container>'},Y8Dy:function(e,n,t){"use strict";t.r(n),n.default=".feature-tree-textbox {\n  max-width: 100px;\n  margin: 1px 1px 1px 5px;\n}\n.feature-tree-textbox.feature-tree-textbox-invalid {\n  color: white;\n  background: #f00;\n}\n"},ayPH:function(e,n){e.exports='\x3c!--suppress TypeScriptUnresolvedVariable --\x3e\r\n\r\n<nz-card [nzTitle]="l(\'OrganizationTree\')" [nzExtra]="extraTemplate">\r\n    <nz-tree #treeComponent [nzData]="treeData" nzShowLine (nzClick)="nodeSelect($event)">\r\n        <ng-template #nzTreeTemplate let-node let-origin="origin">\r\n            <span class="custom-node" (click)="nodeSelect(node)">\r\n                <span *ngIf="!node.isLeaf" (contextmenu)="contextMenu($event,node, menu)">\r\n                    <i nz-icon [nzType]="node.isExpanded ? \'folder-open\' : \'folder\'"></i>\r\n                    <span class="folder-name">{{ node.title }}</span>\r\n\r\n                </span>\r\n                <span *ngIf="node.isLeaf" (contextmenu)="contextMenu($event,node, menu)">\r\n                    <i nz-icon nzType="file"></i>\r\n                    <span class="file-name">{{ node.title }}</span>\r\n\r\n                </span>\r\n            </span>\r\n        </ng-template>\r\n    </nz-tree>\r\n    <nz-dropdown-menu #menu="nzDropdownMenu">\r\n        <ul nz-menu>\r\n            <li nz-menu-item (click)="edit($event)">{{l(\'Edit\')}}</li>\r\n            <li nz-menu-item (click)="addChild()">{{l(\'AddChild\')}}</li>\r\n            <li nz-menu-item (click)="deleteUnit(contextMenuData.origin.id)">{{l(\'Delete\')}}</li>\r\n        </ul>\r\n    </nz-dropdown-menu>\r\n    <ng-template #extraTemplate>\r\n        <a (click)="addUnit(null)" style="color: violet;"\r\n            *ngIf="\'Pages.Administration.OrganizationUnits.ManageOrganizationTree\' | permission"><i nz-icon\r\n                nzType="plus" nzTheme="outline"></i> {{ "AddRootUnit" | localize }}</a>\r\n    </ng-template>\r\n    \x3c!-- <p-tree (onNodeDrop)="nodeDrop($event)" (onNodeSelect)="nodeSelect($event)" [(selection)]="selectedOu"\r\n            [contextMenu]="ouContextMenu" [draggableNodes]="canManageOrganizationUnits"\r\n            [droppableNodes]="canManageOrganizationUnits" [value]="treeData" selectionMode="single">\r\n            <ng-template let-node pTemplate="default">\r\n                <div>\r\n                    <span>\r\n                        {{ node.label }}\r\n                    </span>\r\n                    <small style="font-size: .82em; opacity: .5;">{{ node.memberCount }} {{ "Members" | localize }},\r\n                        {{ node.roleCount }} {{ "Roles" | localize }}</small>\r\n                </div>\r\n            </ng-template>\r\n        </p-tree>\r\n        <p-contextMenu #ouContextMenu [model]="ouContextMenuItems" appendTo="body" baseZIndex="99999"></p-contextMenu> --\x3e\r\n    <div *ngIf="!totalUnitCount" class="text-muted">\r\n        {{ "NoOrganizationUnitDefinedYet" | localize }}\r\n    </div>\r\n</nz-card>\r\n\r\n\r\n<createOrEditOrganizationUnitModal #createOrEditOrganizationUnitModal (unitCreated)="unitCreated($event)"\r\n    (unitUpdated)="unitUpdated($event)"></createOrEditOrganizationUnitModal>\r\n<entityTypeHistoryModal #entityTypeHistoryModal></entityTypeHistoryModal>'},bNtv:function(e,n){e.exports='<nz-modal [nzTitle]="\'\u65b0\u589e\u793e\u533a\'" [nzVisible]="active" [nzWidth]="600" [nzOkDisabled]="!canSubmit" (nzOnOk)="save()"\r\n          (nzOnCancel)="active=false">\r\n  <div *ngIf="active" autocomplete="off" novalidate>\r\n    <nz-form-item>\r\n\r\n      <nz-form-label nzRequired>{{ "\u53d6\u8d27\u70b9\u540d\u79f0" | localize }}</nz-form-label>\r\n      <nz-form-control>\r\n        <input nz-input #roleNameInput="ngModel" [(ngModel)]="pickup.pickup_name" class="form-control"\r\n               id="RoleDisplayName" maxlength="64" name="DisplayName" required type="text" />\r\n        <validation-messages [formCtrl]="roleNameInput"></validation-messages>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    \x3c!-- <nz-form-item>\r\n      <nz-form-label nzRequired>{{"\u662f\u5426\u542f\u7528"|localize}}</nz-form-label>\r\n      <nz-form-control>\r\n        <nz-switch [(ngModel)]="topic.is_open"></nz-switch>\r\n      </nz-form-control>\r\n\r\n    </nz-form-item> --\x3e\r\n\r\n  </div>\r\n</nz-modal>\r\n'},eQfN:function(e,n){e.exports='<nz-modal [nzVisible]="active" [nzFooter]="tplFooter" [title]="\'AuditLogDetail\' | localize ">\r\n\r\n  <form #roleForm="ngForm" *ngIf="active">\r\n\r\n    <div class="modal-body">\r\n      <h3>\r\n        {{ "UserInformations" | localize }}\r\n      </h3>\r\n      <div nz-row>\r\n        <div nz-col nzSpan="24">\r\n          <nz-form-item>\r\n            <nz-form-label nz-col nzSpan="6"> {{ "UserName" | localize }} </nz-form-label>\r\n            <nz-form-control nz-col nzSpan="18">\r\n              <span>{{ auditLog.userName }}</span>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n\r\n        <div nz-col nzSpan="24">\r\n          <nz-form-item>\r\n            <nz-form-label nz-col nzSpan="6"> {{ "IpAddress" | localize }} </nz-form-label>\r\n            <nz-form-control nz-col nzSpan="18">\r\n              <span>{{ auditLog.clientIpAddress }}</span>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n\r\n        <div nz-col nzSpan="24">\r\n          <nz-form-item>\r\n            <nz-form-label nz-col nzSpan="6"> {{ "Client" | localize }}</nz-form-label>\r\n            <nz-form-control nz-col nzSpan="18">\r\n              <span>{{ auditLog.clientName }}</span>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n\r\n        <div nz-col nzSpan="24">\r\n          <nz-form-item>\r\n            <nz-form-label nz-col nzSpan="6">{{ "Browser" | localize }} </nz-form-label>\r\n            <nz-form-control nz-col nzSpan="18">\r\n              <span>{{ auditLog.browserInfo }}</span>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n        </div>\r\n        <div nz-col nzSpan="24" *ngIf="auditLog.impersonatorUserId">\r\n          <nz-form-item>\r\n\r\n            <nz-form-label nz-col nzSpan="6"></nz-form-label>\r\n            <nz-form-control nz-col nzSpan="18">\r\n              <span>{{ "AuditLogImpersonatedOperationInfo" | localize }}</span>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n\r\n        <h3>{{ "ActionInformations" | localize }}</h3>\r\n        <div nz-col nzSpan="24" *ngIf="auditLog.impersonatorUserId">\r\n          <nz-form-item>\r\n\r\n            <nz-form-label nz-col nzSpan="6">{{ "Service" | localize }}</nz-form-label>\r\n            <nz-form-control nz-col nzSpan="18">\r\n              <span>{{ auditLog.serviceName }}</span>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n        <div nz-col nzSpan="24">\r\n          <nz-form-item>\r\n            <nz-form-label nz-col nzSpan="6"> {{ "Action" | localize }} </nz-form-label>\r\n            <nz-form-control nz-col nzSpan="18">\r\n              <span>{{ auditLog.methodName }}</span>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n        <div nz-col nzSpan="24">\r\n          <nz-form-item>\r\n            <nz-form-label nz-col nzSpan="6"> {{ "Time" | localize }}: </nz-form-label>\r\n            <nz-form-control nz-col nzSpan="18">\r\n              <span>{{ getExecutionTime() }}</span>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n        <div nz-col nzSpan="24">\r\n          <nz-form-item>\r\n            <nz-form-label nz-col nzSpan="6"> {{ "Duration" | localize }}: </nz-form-label>\r\n            <nz-form-control nz-col nzSpan="18">\r\n              <span>{{ getDurationAsMs() }}</span>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n        <div nz-col nzSpan="24">\r\n          <nz-form-item>\r\n            <nz-form-label nz-col nzSpan="6"> {{ "Parameters" | localize }}</nz-form-label>\r\n            <nz-form-control nz-col nzSpan="18">\r\n              <pre lang="js">{{ getFormattedParameters() }}</pre>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <h3>{{ "CustomData" | localize }}</h3>\r\n\r\n\r\n    <div nz-col nzSpan="24">\r\n      <nz-form-item>\r\n        <nz-form-label nz-col nzSpan="6"> {{ "None" | localize }}</nz-form-label>\r\n        <nz-form-control nz-col nzSpan="18" *ngIf="auditLog.customData">\r\n          <pre>{{ auditLog.customData }}</pre>\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n    </div>\r\n\r\n\r\n    <div nz-col nzSpan="24">\r\n      <nz-form-item>\r\n        <nz-form-label nz-col nzSpan="6">{{ "ErrorState" | localize }}</nz-form-label>\r\n        <nz-form-control nz-col nzSpan="18">\r\n          <div *ngIf="!auditLog.exception" class="col-lg-12 col-form-label"> <i\r\n              class="fa fa-check-circle kt-font-success"></i> {{ "Success" | localize }} </div>\r\n          <div *ngIf="auditLog.exception" class="col-lg-12 alert kt-alert kt-alert--default">\r\n            <pre>{{ auditLog.exception }}</pre>\r\n          </div>\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n    </div>\r\n\r\n\r\n  </form>\r\n  <ng-template #tplFooter>\r\n    <button nz-buton (click)="close()" nz-button nzType="primary">\r\n      {{ "Close" | localize }}\r\n    </button>\r\n  </ng-template>\r\n</nz-modal>'},hDhq:function(e,n){e.exports='<ng-container *ngIf="active">\r\n  <nz-modal [nzVisible]="active"\r\n    [nzOkDisabled]="!tenantCreateForm.form.valid || saving || !subscriptionEndDateIsValid()" (nzOnOk)="save()"\r\n    (nzOnCancel)="close()" [nzTitle]="l(\'CreateNewTenant\')">\r\n    <div class="modal-dialog modal-lg">\r\n      <div class="modal-content">\r\n        <form #tenantCreateForm="ngForm" (submit)="save()" class="form-validation" novalidate role="form">\r\n\r\n\r\n          <nz-form-item>\r\n            <nz-form-label for="TenancyName">{{ "TenancyName" | localize }} </nz-form-label>\r\n            <nz-form-control>\r\n              <input nz-input #tenancyName="ngModel" #tenancyNameInput="ngModel" [(ngModel)]="tenant.tenancyName"\r\n                [ngClass]="{ edited: tenant.tenancyName }" class="form-control" id="TenancyName" maxlength="64"\r\n                name="tenancyName" pattern="^[a-zA-Z][a-zA-Z0-9_-]{1,}$" required type="text" />\r\n              <validation-messages [formCtrl]="tenancyNameInput"></validation-messages>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n          <div>\r\n            <span *ngIf="!tenancyName.valid && !tenancyName.pristine"\r\n              class="form-control-feedback">{{ "TenantName_Regex_Description" | localize }}</span>\r\n          </div>\r\n\r\n          <nz-form-item>\r\n            <nz-form-label for="Name">{{ "TenantName" | localize }} </nz-form-label>\r\n            <nz-form-control>\r\n              <input #nameInput="ngModel" nz-input [(ngModel)]="tenant.name" [ngClass]="{ edited: tenant.name }"\r\n                class="form-control" id="Name" maxlength="128" name="Name" required type="text" />\r\n              <validation-messages [formCtrl]="nameInput"></validation-messages>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <nz-form-item>\r\n            <nz-form-label class="kt-checkbox">\r\n              <input nz-input [(ngModel)]="useHostDb" id="CreateTenant_UseHostDb" name="UseHostDb" type="checkbox" />\r\n\r\n              <span></span>\r\n            </nz-form-label>\r\n            <nz-form-control>\r\n              {{ "UseHostDatabase" | localize }}\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <nz-form-item *ngIf="!useHostDb">\r\n            <nz-form-label for="DatabaseConnectionString">{{ "DatabaseConnectionString" | localize }} </nz-form-label>\r\n            <nz-form-control>\r\n              <input nz-input #connectionStringInput="ngModel" [(ngModel)]="tenant.connectionString"\r\n                [ngClass]="{ edited: tenant.connectionString }" class="form-control" id="DatabaseConnectionString"\r\n                maxlength="1024" name="ConnectionString" required type="text" />\r\n              <validation-messages [formCtrl]="connectionStringInput"></validation-messages>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <nz-form-item>\r\n            <nz-form-label for="AdminEmailAddress">{{ "AdminEmailAddress" | localize }} *</nz-form-label>\r\n            <nz-form-control>\r\n              <input nz-input #adminEmailAddressInput="ngModel" [(ngModel)]="tenant.adminEmailAddress"\r\n                [ngClass]="{ edited: tenant.adminEmailAddress }" class="form-control" id="AdminEmailAddress"\r\n                maxlength="256" name="AdminEmailAddress" pattern="^\\w+([-+.\']\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$"\r\n                required type="email" />\r\n              <validation-messages [formCtrl]="adminEmailAddressInput"></validation-messages>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <nz-form-item>\r\n            <nz-form-label class="kt-checkbox">\r\n              <input nz-input [(ngModel)]="setRandomPassword" id="CreateTenant_SetRandomPassword"\r\n                name="SetRandomPassword" type="checkbox" />\r\n\r\n              <span></span>\r\n            </nz-form-label>\r\n            <nz-form-control>\r\n              {{ "SetRandomPassword" | localize }}\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <nz-form-item *ngIf="!setRandomPassword">\r\n            <nz-form-label for="AdminPassword">{{ "AdminPassword" | localize }}</nz-form-label>\r\n            <nz-form-control>\r\n              <input #AdminPassword="ngModel" [(ngModel)]="tenant.adminPassword" nz-input\r\n                [ngClass]="{ edited: tenant.adminPassword }" [requireDigit]="passwordComplexitySetting.requireDigit"\r\n                [requireLowercase]="passwordComplexitySetting.requireLowercase"\r\n                [requireNonAlphanumeric]="passwordComplexitySetting.requireNonAlphanumeric"\r\n                [requireUppercase]="passwordComplexitySetting.requireUppercase"\r\n                [requiredLength]="passwordComplexitySetting.requiredLength" [required]="!setRandomPassword"\r\n                class="form-control" id="AdminPassword" maxlength="32" name="AdminPassword" type="password"\r\n                validateEqual="AdminPasswordRepeat" reverse="true" />\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <div [hidden]="tenantCreateForm.form.valid || tenantCreateForm.form.pristine">\r\n            <ul *ngIf="tenantCreateForm.controls[\'adminPassword\'] && tenantCreateForm.controls[\'adminPassword\'].errors"\r\n              class="help-block text-danger">\r\n              <li [hidden]="!tenantCreateForm.controls[\'adminPassword\'].errors.requireDigit">\r\n                {{ "PasswordComplexity_RequireDigit_Hint" | localize }}\r\n              </li>\r\n              <li [hidden]="!tenantCreateForm.controls[\'adminPassword\'].errors.requireLowercase">\r\n                {{ "PasswordComplexity_RequireLowercase_Hint" | localize }}\r\n              </li>\r\n              <li [hidden]="!tenantCreateForm.controls[\'adminPassword\'].errors.requireUppercase">\r\n                {{ "PasswordComplexity_RequireUppercase_Hint" | localize }}\r\n              </li>\r\n              <li [hidden]="!tenantCreateForm.controls[\'adminPassword\'].errors.requireNonAlphanumeric">\r\n                {{ "PasswordComplexity_RequireNonAlphanumeric_Hint" | localize }}\r\n              </li>\r\n              <li [hidden]="!tenantCreateForm.controls[\'adminPassword\'].errors.requiredLength">\r\n                {{ "PasswordComplexity_RequiredLength_Hint" | localize: passwordComplexitySetting.requiredLength }}\r\n              </li>\r\n            </ul>\r\n          </div>\r\n\r\n          <nz-form-item *ngIf="!setRandomPassword">\r\n            <nz-form-label for="AdminPasswordRepeat">{{ "AdminPasswordRepeat" | localize }}</nz-form-label>\r\n            <input nz-input #AdminPasswordRepeat="ngModel" [(ngModel)]="tenantAdminPasswordRepeat"\r\n              [ngClass]="{ edited: tenantAdminPasswordRepeat }" [requireDigit]="passwordComplexitySetting.requireDigit"\r\n              [requireLowercase]="passwordComplexitySetting.requireLowercase"\r\n              [requireNonAlphanumeric]="passwordComplexitySetting.requireNonAlphanumeric"\r\n              [requireUppercase]="passwordComplexitySetting.requireUppercase"\r\n              [requiredLength]="passwordComplexitySetting.requiredLength" [required]="!setRandomPassword"\r\n              class="form-control" id="AdminPasswordRepeat" maxlength="32" name="AdminPasswordRepeat" type="password"\r\n              validateEqual="AdminPassword" />\r\n          </nz-form-item>\r\n\r\n          <div [hidden]="tenantCreateForm.form.valid || tenantCreateForm.form.pristine">\r\n            <ul\r\n              *ngIf="tenantCreateForm.controls[\'adminPasswordRepeat\'] && tenantCreateForm.controls[\'adminPasswordRepeat\'].errors"\r\n              class="help-block text-danger">\r\n              <li [hidden]="!tenantCreateForm.controls[\'adminPasswordRepeat\'].errors.requireDigit">\r\n                {{ "PasswordComplexity_RequireDigit_Hint" | localize }}\r\n              </li>\r\n              <li [hidden]="!tenantCreateForm.controls[\'adminPasswordRepeat\'].errors.requireLowercase">\r\n                {{ "PasswordComplexity_RequireLowercase_Hint" | localize }}\r\n              </li>\r\n              <li [hidden]="!tenantCreateForm.controls[\'adminPasswordRepeat\'].errors.requireUppercase">\r\n                {{ "PasswordComplexity_RequireUppercase_Hint" | localize }}\r\n              </li>\r\n              <li [hidden]="!tenantCreateForm.controls[\'adminPasswordRepeat\'].errors.requireNonAlphanumeric">\r\n                {{ "PasswordComplexity_RequireNonAlphanumeric_Hint" | localize }}\r\n              </li>\r\n              <li [hidden]="!tenantCreateForm.controls[\'adminPasswordRepeat\'].errors.requiredLength">\r\n                {{ "PasswordComplexity_RequiredLength_Hint" | localize: passwordComplexitySetting.requiredLength }}\r\n              </li>\r\n              <li [hidden]="tenantCreateForm.controls[\'adminPasswordRepeat\'].valid">\r\n                {{ "PasswordsDontMatch" | localize }}\r\n              </li>\r\n            </ul>\r\n          </div>\r\n\r\n          <nz-form-item>\r\n            <nz-form-label for="edition">{{ "Edition" | localize }}</nz-form-label>\r\n            <nz-select (change)="onEditionChange()" [(ngModel)]="tenant.editionId" class="form-control" id="edition"\r\n              name="edition">\r\n              <nz-option *ngFor="let edition of editions" [nzValue]="edition.value" [nzLabel]="edition.displayText">\r\n              </nz-option>\r\n            </nz-select>\r\n          </nz-form-item>\r\n\r\n          <nz-form-item [hidden]="!isSubscriptionFieldsVisible">\r\n            <nz-form-label class="kt-checkbox" for="CreateTenant_IsUnlimited">\r\n              <input nz-input [(ngModel)]="isUnlimited" id="CreateTenant_IsUnlimited" name="IsUnlimited"\r\n                type="checkbox" />\r\n\r\n              <span></span>\r\n            </nz-form-label>\r\n            <nz-form-control>\r\n              {{ "UnlimitedTimeSubscription" | localize }}\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <nz-form-item [hidden]="isUnlimited || !isSubscriptionFieldsVisible"\r\n            [ngClass]="{ \'has-error\': !subscriptionEndDateIsValid() }" class="form-group">\r\n            <nz-form-label for="SubscriptionEndDate">{{ "SubscriptionEndDate" | localize }}</nz-form-label>\r\n            <nz-form-control>\r\n              <nz-range-picker #SubscriptionEndDateUtc [(ngModel)]="tenant.subscriptionEndDateUtc" autocomplete="off"\r\n                datePickerMomentModifier id="SubscriptionEndDate" name="SubscriptionEndDateUtc" type="text">\r\n              </nz-range-picker>\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <nz-form-item [hidden]="!isSubscriptionFieldsVisible">\r\n            <nz-form-label class="kt-checkbox" for="CreateTenant_IsInTrialPeriod">\r\n              <input [(ngModel)]="tenant.isInTrialPeriod" [disabled]="isSelectedEditionFree"\r\n                id="CreateTenant_IsInTrialPeriod" name="IsInTrialPeriod" type="checkbox" />\r\n            </nz-form-label>\r\n            <nz-form-control>\r\n              {{ "IsInTrialPeriod" | localize }}\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <nz-form-item class="kt-checkbox-list">\r\n            <nz-form-label class="kt-checkbox" for="CreateTenant_ShouldChangePasswordOnNextLogin">\r\n              <input [(ngModel)]="tenant.shouldChangePasswordOnNextLogin"\r\n                id="CreateTenant_ShouldChangePasswordOnNextLogin" name="ShouldChangePasswordOnNextLogin"\r\n                type="checkbox" />\r\n\r\n\r\n            </nz-form-label>\r\n            <nz-form-control>\r\n              {{ "ShouldChangePasswordOnNextLogin" | localize }}\r\n            </nz-form-control>\r\n\r\n          </nz-form-item>\r\n          <nz-form-item>\r\n            <nz-form-label class="kt-checkbox" for="CreateTenant_SendActivationEmail">\r\n              <input [(ngModel)]="tenant.sendActivationEmail" id="CreateTenant_SendActivationEmail"\r\n                name="SendActivationEmail" type="checkbox" />\r\n            </nz-form-label>\r\n            <nz-form-control>\r\n              {{ "SendActivationEmail" | localize }}\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n          <nz-form-item>\r\n            <nz-form-label class="kt-checkbox" for="CreateTenant_IsActive">\r\n              <input [(ngModel)]="tenant.isActive" id="CreateTenant_IsActive" name="IsActive" type="checkbox" />\r\n            </nz-form-label>\r\n            <nz-form-control>\r\n              {{ "Active" | localize }}\r\n\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </nz-modal>\r\n</ng-container>'},iza6:function(e,n){e.exports='<ng-container *ngIf="active">\r\n  <nz-modal [nzVisible]="active" (nzOnOk)="save()" (nzOnCancel)="close()" [title]="l(\'EditRole\')">\r\n\r\n    <nz-alert [nzMessage]="l(\'Note_RefreshPageForPermissionChanges\')" nzType="info" nzShowIcon="true"></nz-alert>\r\n\r\n    <form #roleForm="ngForm" (ngSubmit)="save()" *ngIf="active" autocomplete="off" novalidate>\r\n\r\n      <div class="modal-body">\r\n        <nz-tabset>\r\n          <nz-tab nzTitle="{{ \'RoleName\' | localize }}">\r\n            <div class="form-group">\r\n              <label>{{ "RoleName" | localize }} *</label>\r\n              <input nz-input #roleNameInput="ngModel" [(ngModel)]="role.displayName" class="form-control"\r\n                     id="RoleDisplayName" maxlength="64" name="DisplayName" required type="text" />\r\n              <validation-messages [formCtrl]="roleNameInput"></validation-messages>\r\n            </div>\r\n\r\n            <div class="kt-checkbox-list">\r\n              <label class="kt-checkbox">\r\n                <nz-switch [(ngModel)]="role.isDefault" id="EditRole_IsDefault" name="IsDefault"\r\n                           [nzCheckedChildren]="\'\u662f\'"\r\n                           [nzUnCheckedChildren]="\'\u5426\'">\r\n                </nz-switch>\r\n                {{ "Default" | localize }}\r\n                <span></span>\r\n              </label>\r\n              <span class="help-block">{{ "DefaultRole_Description" | localize }}</span>\r\n            </div>\r\n          </nz-tab>\r\n          <nz-tab nzTitle="{{ \'Permissions\' | localize }}">\r\n            <permission-tree #permissionTree></permission-tree>\r\n          </nz-tab>\r\n        </nz-tabset>\r\n\r\n      </div>\r\n\r\n    </form>\r\n\r\n  </nz-modal>\r\n</ng-container>\r\n'},jkDv:function(e,n,t){"use strict";t.r(n),t.d(n,"AdminModule",(function(){return ke}));var i=t("mrSG"),r=t("ofXK"),a=t("fXoL"),o=t("3Pt+"),s=t("yjp6"),l=t("pV/B"),c=t("pmn7"),d=t("YirH"),u=t("yc4G"),m=t("PCNd"),p=t("0Em7"),f=t("x2O3"),g=t("wd/R"),v=function(e){_inherits(t,e);var n=_createSuper(t);function t(e){var i;return _classCallCheck(this,t),(i=n.call(this,e)).active=!1,i}return _createClass(t,[{key:"getExecutionTime",value:function(){return g(this.auditLog.executionTime).fromNow()+" ("+g(this.auditLog.executionTime).format("YYYY-MM-DD HH:mm:ss")+")"}},{key:"getDurationAsMs",value:function(){return this.l("Xms",this.auditLog.executionDuration)}},{key:"getFormattedParameters",value:function(){try{var e=JSON.parse(this.auditLog.parameters);return JSON.stringify(e,null,4)}catch(n){return this.auditLog.parameters}}},{key:"show",value:function(e){this.active=!0,this.auditLog=e}},{key:"close",value:function(){this.active=!1}}]),t}(f.a);v.ctorParameters=function(){return[{type:a.F}]},v=Object(i.__decorate)([Object(a.n)({selector:"auditLogDetailModal",template:Object(i.__importDefault)(t("eQfN")).default})],v);var h=t("qJYM"),z=t("joeh"),b=t("IMw7"),y=function e(){_classCallCheck(this,e)},_=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i){var r;return _classCallCheck(this,t),(r=n.call(this,i)).httpUtil=e,r.injector=i,r.active=!1,r.modalSave=new a.x,r}return _createClass(t,[{key:"show",value:function(e){this.distribut=e||new y,this.active=!0}},{key:"save",value:function(){var e=this;this.distribut.id?this.httpUtil.post("/api/distribut/update",this.distribut).toPromise().then((function(n){e.modalSave.emit(!0),e.active=!1})):this.httpUtil.post("/api/distribut/insert",this.distribut).toPromise().then((function(n){e.modalSave.emit(!0),e.active=!1}))}},{key:"canSubmit",value:function(){return!!this.distribut&&!!(this.distribut.shop_name&&this.distribut.neighbourNum&&this.distribut.nickname&&this.distribut.shop_sign)}}]),t}(f.a);_.ctorParameters=function(){return[{type:b.a},{type:a.F}]},Object(i.__decorate)([Object(a.S)()],_.prototype,"modalSave",void 0),_=Object(i.__decorate)([Object(a.n)({selector:"app-create-or-edit-distribut",template:Object(i.__importDefault)(t("SdCQ")).default,styles:[Object(i.__importDefault)(t("nmkx")).default]})],_);var S=t("SdPK"),k=t("cj2p"),x=t("KALY"),O=t("nYR2"),C=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i,r){var o;return _classCallCheck(this,t),(o=n.call(this,e))._editionService=i,o._commonLookupService=r,o.modalSave=new a.x,o.active=!1,o.saving=!1,o.edition=new x.l,o.expiringEditions=[],o.expireAction=k.a.DeactiveTenant,o.expireActionEnum=k.a,o.isFree=!0,o.isTrialActive=!1,o.isWaitingDayActive=!1,o}return _createClass(t,[{key:"show",value:function(e){var n=this;this.active=!0,this._commonLookupService.getEditionsForCombobox(!0).subscribe((function(t){n.expiringEditions=t.items,n.expiringEditions.unshift(new x.j({value:null,displayText:n.l("NotAssigned"),isSelected:!0})),n._editionService.getEditionForEdit(e).subscribe((function(e){n.featureTree.editData=e}))}))}},{key:"onShown",value:function(){document.getElementById("EditionDisplayName").focus()}},{key:"resetPrices",value:function(e){this.edition.edition.annualPrice=void 0,this.edition.edition.monthlyPrice=void 0}},{key:"removeExpiringEdition",value:function(e){this.edition.edition.expiringEditionId=null}},{key:"save",value:function(){var e=this;if(this.featureTree.areAllValuesValid()){var n=new x.l;n.edition=this.edition.edition,n.featureValues=this.featureTree.getGrantedFeatures(),this.saving=!0,this._editionService.createEdition(n).pipe(Object(O.a)((function(){return e.saving=!1}))).subscribe((function(){e.notify.info(e.l("SavedSuccessfully")),e.close(),e.modalSave.emit(null)}))}else this.message.warn(this.l("InvalidFeaturesWarning"))}},{key:"close",value:function(){this.active=!1}}]),t}(f.a);C.ctorParameters=function(){return[{type:a.F},{type:x.u},{type:x.k}]},Object(i.__decorate)([Object(a.mb)("featureTree",{static:!1})],C.prototype,"featureTree",void 0),Object(i.__decorate)([Object(a.S)()],C.prototype,"modalSave",void 0),C=Object(i.__decorate)([Object(a.n)({selector:"createEditionModal",template:Object(i.__importDefault)(t("uY72")).default})],C);var I=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i,r){var o;return _classCallCheck(this,t),(o=n.call(this,e))._editionService=i,o._commonLookupService=r,o.modalSave=new a.x,o.active=!1,o.saving=!1,o.edition=new x.Cb,o.expiringEditions=[],o.expireAction=k.a.DeactiveTenant,o.expireActionEnum=k.a,o.isFree=!1,o.isTrialActive=!1,o.isWaitingDayActive=!1,o}return _createClass(t,[{key:"show",value:function(e){var n=this;this.active=!0,this._commonLookupService.getEditionsForCombobox(!0).subscribe((function(t){n._editionService.getEditionForEdit(e).subscribe((function(e){n.featureTree.editData=e,n.edition.edition=e.edition}))}))}},{key:"onShown",value:function(){document.getElementById("EditionDisplayName").focus()}},{key:"save",value:function(){var e=this;if(this.featureTree.areAllValuesValid()){var n=new x.Cb;n.edition=this.edition.edition,n.featureValues=this.featureTree.getGrantedFeatures(),this.saving=!0,this._editionService.updateEdition(n).pipe(Object(O.a)((function(){return e.saving=!1}))).subscribe((function(){e.notify.info(e.l("SavedSuccessfully")),e.close(),e.modalSave.emit(null)}))}else this.message.warn(this.l("InvalidFeaturesWarning"))}},{key:"close",value:function(){this.active=!1}}]),t}(f.a);I.ctorParameters=function(){return[{type:a.F},{type:x.u},{type:x.k}]},Object(i.__decorate)([Object(a.mb)("featureTree",{static:!1})],I.prototype,"featureTree",void 0),Object(i.__decorate)([Object(a.S)()],I.prototype,"modalSave",void 0),I=Object(i.__decorate)([Object(a.n)({selector:"editEditionModal",template:Object(i.__importDefault)(t("WGMk")).default})],I);var w=t("NOzG"),D=t("nS6G"),T=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i,r){var a;return _classCallCheck(this,t),(a=n.call(this,e))._editionService=i,a._commonLookupService=r,a.active=!1,a.saving=!1,a.appBaseUrl="",a.tenantCount=0,a.moveTenantsInput=new x.O,a.targetEditions=[],a}return _createClass(t,[{key:"show",value:function(e){var n=this;this.active=!0,this.moveTenantsInput.sourceEditionId=e,this._commonLookupService.getEditionsForCombobox(void 0).subscribe((function(e){n.targetEditions=e.items})),this._editionService.getTenantCount(e).subscribe((function(e){n.tenantCount=e,n.appBaseUrl=D.a.appBaseUrl}))}},{key:"save",value:function(){var e=this;this.saving=!0,this._editionService.moveTenantsToAnotherEdition(this.moveTenantsInput).pipe(Object(O.a)((function(){return e.saving=!1}))).subscribe((function(){e.notify.info(e.l("MoveTenantsToAnotherEditionStartedNotification")),e.close()}))}},{key:"close",value:function(){this.active=!1}}]),t}(f.a);T.ctorParameters=function(){return[{type:a.F},{type:x.u},{type:x.k}]},T=Object(i.__decorate)([Object(a.n)({selector:"moveTenantsToAnotherEditionModal",template:Object(i.__importDefault)(t("kCyd")).default})],T);var N=t("LvDl"),U=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i){var r;return _classCallCheck(this,t),(r=n.call(this,e))._languageService=i,r.modalSave=new a.x,r.active=!1,r.saving=!1,r.language=new x.d,r.languageNamesSelectItems=[],r.flagsSelectItems=[],r}return _createClass(t,[{key:"show",value:function(e){var n=this;this.active=!0,this._languageService.getLanguageForEdit(e).subscribe((function(t){n.language=t.language,n.languageNamesSelectItems=N.map(t.languageNames,(function(e){return{label:e.displayText,value:e.value}})),n.flagsSelectItems=N.map(t.flags,(function(e){return{label:e.displayText,value:e.value}})),e||(n.language.isEnabled=!0)}))}},{key:"save",value:function(){var e=this,n=new x.m;n.language=this.language,this.saving=!0,this._languageService.createOrUpdateLanguage(n).pipe(Object(O.a)((function(){return e.saving=!1}))).subscribe((function(){e.notify.info(e.l("SavedSuccessfully")),e.close(),e.modalSave.emit(null)}))}},{key:"close",value:function(){this.active=!1}}]),t}(f.a);U.ctorParameters=function(){return[{type:a.F},{type:x.L}]},Object(i.__decorate)([Object(a.mb)("languageCombobox",{static:!0})],U.prototype,"languageCombobox",void 0),Object(i.__decorate)([Object(a.mb)("iconCombobox",{static:!0})],U.prototype,"iconCombobox",void 0),Object(i.__decorate)([Object(a.S)()],U.prototype,"modalSave",void 0),U=Object(i.__decorate)([Object(a.n)({selector:"createOrEditLanguageModal",template:Object(i.__importDefault)(t("PlHq")).default})],U);var E=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i){var r;return _classCallCheck(this,t),(r=n.call(this,e))._languageService=i,r.modalSave=new a.x,r.model=new x.Db,r.active=!1,r.saving=!1,r}return _createClass(t,[{key:"show",value:function(e,n,t,i,r,a){this.model.sourceName=t,this.model.key=i,this.model.languageName=n,this.model.value=a,this.baseText=r,this.baseLanguage=N.find(abp.localization.languages,(function(n){return n.name===e})),this.targetLanguage=N.find(abp.localization.languages,(function(e){return e.name===n})),this.active=!0}},{key:"onShown",value:function(){document.getElementById("TargetLanguageDisplayName").focus()}},{key:"save",value:function(){var e=this;this.saving=!0,this._languageService.updateLanguageText(this.model).pipe(Object(O.a)((function(){return e.saving=!1}))).subscribe((function(){e.notify.info(e.l("SavedSuccessfully")),e.close(),e.modalSave.emit(null)}))}},{key:"close",value:function(){this.active=!1}},{key:"findLanguage",value:function(e){return N.find(abp.localization.languages,(function(n){return n.name===e}))}}]),t}(f.a);E.ctorParameters=function(){return[{type:a.F},{type:x.L}]},Object(i.__decorate)([Object(a.S)()],E.prototype,"modalSave",void 0),E=Object(i.__decorate)([Object(a.n)({selector:"editTextModal",template:Object(i.__importDefault)(t("VfjP")).default})],E);var M=t("K5Yt"),P=t("WLr0"),F=t("qkx8"),A=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i){var r;return _classCallCheck(this,t),(r=n.call(this,e))._organizationUnitService=i,r.loading=!1,r.membersAdded=new a.x,r.isShown=!1,r.filterText="",r.saving=!1,r.columns=[{type:"checkbox",index:"checked"},{title:r.l("Name"),index:"name"}],r}return _createClass(t,[{key:"fetchDataList",value:function(e,n,t){this.organizationUnitId&&this.getRecords()}},{key:"refreshTable",value:function(){this.pageNumber=1,this.getRecords()}},{key:"close",value:function(){this.isShown=!1}},{key:"shown",value:function(){this.isShown=!0,this.getRecordsIfNeeds(null)}},{key:"getRecordsIfNeeds",value:function(e){this.isShown&&this.getRecords(e)}},{key:"getRecords",value:function(e){var n=this,t=new x.C;t.organizationUnitId=this.organizationUnitId,t.filter=this.filterText,t.skipCount=(this.pageNumber-1)*this.pageSize,t.maxResultCount=this.pageSize,this.loading=!0,this._organizationUnitService.findUsers(t).subscribe((function(e){n.totalItems=e.totalCount,n.dataList=e.items,n.loading=!1}),(function(){return n.loading=!1}))}},{key:"addUsersToOrganizationUnit",value:function(){var e=this,n=new x.Mb;n.organizationUnitId=this.organizationUnitId,n.userIds=N.map(this.dataList.filter((function(e){return e.checked})).map((function(e){return Number(e.value)}))),this.saving=!0,this._organizationUnitService.addUsersToOrganizationUnit(n).subscribe((function(){e.membersAdded.emit({userIds:n.userIds,ouId:n.organizationUnitId}),e.saving=!1,e.close(),e.selectedMembers=[]}))}}]),t}(f.b);A.ctorParameters=function(){return[{type:a.F},{type:x.R}]},Object(i.__decorate)([Object(a.S)()],A.prototype,"membersAdded",void 0),Object(i.__decorate)([Object(a.mb)("dataTable",{static:!0})],A.prototype,"dataTable",void 0),A=Object(i.__decorate)([Object(a.n)({selector:"addMemberModal",template:Object(i.__importDefault)(t("EMe1")).default})],A);var j=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i){var r;return _classCallCheck(this,t),(r=n.call(this,e))._organizationUnitService=i,r.loading=!1,r.columns=[{type:"checkbox",index:"checked"},{title:r.l("Name"),index:"name"}],r.rolesAdded=new a.x,r.data=[],r.isShown=!1,r.filterText="",r.saving=!1,r}return _createClass(t,[{key:"fetchDataList",value:function(e,n,t){}},{key:"refreshTable",value:function(){}},{key:"close",value:function(){this.isShown=!1}},{key:"shown",value:function(){this.isShown=!0,this.getRecordsIfNeeds(null)}},{key:"getRecordsIfNeeds",value:function(e){this.isShown&&this.getRecords(e)}},{key:"getRecords",value:function(e){var n=this,t=new x.B;t.organizationUnitId=this.organizationUnitId,t.filter=this.filterText,t.skipCount=this.pageSize*(this.pageNumber-1),t.maxResultCount=this.pageSize,this.loading=!0,this._organizationUnitService.findRoles(t).subscribe((function(e){n.totalItems=e.totalCount,n.dataList=e.items,n.loading=!1}),(function(){return n.loading=!1}))}},{key:"addRolesToOrganizationUnit",value:function(){var e=this,n=new x.fb;n.organizationUnitId=this.organizationUnitId,n.roleIds=N.map(this.dataList.filter((function(e){return e.checked})),(function(e){return Number(e.value)})),this.saving=!0,this._organizationUnitService.addRolesToOrganizationUnit(n).subscribe((function(){e.rolesAdded.emit({roleIds:n.roleIds,ouId:n.organizationUnitId}),e.saving=!1,e.close(),e.selectedRoles=[]}))}}]),t}(f.b);j.ctorParameters=function(){return[{type:a.F},{type:x.R}]},Object(i.__decorate)([Object(a.S)()],j.prototype,"rolesAdded",void 0),j=Object(i.__decorate)([Object(a.n)({selector:"addRoleModal",template:Object(i.__importDefault)(t("Os5t")).default})],j);var R=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i,r){var o;return _classCallCheck(this,t),(o=n.call(this,e))._organizationUnitService=i,o._changeDetector=r,o.unitCreated=new a.x,o.unitUpdated=new a.x,o.active=!1,o.saving=!1,o.visible=!1,o.organizationUnit={},o}return _createClass(t,[{key:"onShown",value:function(){document.getElementById("OrganizationUnitDisplayName").focus()}},{key:"show",value:function(e){this.organizationUnit=e,this.active=!0,this.visible=!0,this._changeDetector.detectChanges()}},{key:"save",value:function(){this.organizationUnit.id?this.updateUnit():this.createUnit()}},{key:"createUnit",value:function(){var e=this,n=new x.p;n.parentId=this.organizationUnit.parentId,n.displayName=this.organizationUnit.displayName,this.saving=!0,this._organizationUnitService.createOrganizationUnit(n).pipe(Object(O.a)((function(){return e.saving=!1}))).subscribe((function(n){e.close(),e.unitCreated.emit(n)}))}},{key:"updateUnit",value:function(){var e=this,n=new x.Eb;n.id=this.organizationUnit.id,n.displayName=this.organizationUnit.displayName,this.saving=!0,this._organizationUnitService.updateOrganizationUnit(n).pipe(Object(O.a)((function(){return e.saving=!1}))).subscribe((function(n){e.close(),e.unitUpdated.emit(n)}))}},{key:"close",value:function(){this.active=!1}}]),t}(f.a);R.ctorParameters=function(){return[{type:a.F},{type:x.R},{type:a.k}]},Object(i.__decorate)([Object(a.mb)("organizationUnitDisplayName",{static:!0})],R.prototype,"organizationUnitDisplayNameInput",void 0),Object(i.__decorate)([Object(a.S)()],R.prototype,"unitCreated",void 0),Object(i.__decorate)([Object(a.S)()],R.prototype,"unitUpdated",void 0),R=Object(i.__decorate)([Object(a.n)({selector:"createOrEditOrganizationUnitModal",template:Object(i.__importDefault)(t("Deuk")).default})],R);var L=t("oo35"),q=t("Nqz0"),V=t("z6cu"),H=t("JIr8");function B(e){var n=[];return e.forEach((function(e){n.push.apply(n,_toConsumableArray(function e(n){var t=[];if(null!=n.children){if(0===n.children.length)t.push(n);else{var i,r=_createForOfIteratorHelper(n.children);try{for(r.s();!(i=r.n()).done;){var a=i.value;t.push.apply(t,_toConsumableArray(e(a)))}}catch(o){r.e(o)}finally{r.f()}t.push(n)}return t}return t.push(n),t}(e)))})),n}function W(e){return B(e).filter((function(e){return e.isChecked||e.isHalfChecked}))}function G(e,n,t,i){function r(e,a){var o,s=a.filter((function(i){return i[t]==e[n]})),l=_createForOfIteratorHelper(s);try{for(l.s();!(o=l.n()).done;){var c=o.value;c.key=c[n],c.title=c[i],c.children=r(c,a),c.origin=c,0===c.children.length&&(c.isLeaf=!0)}}catch(d){l.e(d)}finally{l.f()}return s}var a=e.filter((function(i){return!e.find((function(e){return i[t]==e[n]}))}));if(a.forEach((function(e){e.key=e[n],e.title=e[i],e.parentId=e[t],e.origin=e})),!a||0==a.length)return[];var o,s=_createForOfIteratorHelper(a);try{for(s.s();!(o=s.n()).done;){var l=o.value;l.children=r(l,e),0===l.children.length&&(l.isLeaf=!0)}}catch(c){s.e(c)}finally{s.f()}return a}t("ifs9");var $=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i,r,o){var s;return _classCallCheck(this,t),(s=n.call(this,e))._organizationUnitService=i,s._treeDataHelperService=r,s.nzContextMenuService=o,s.ouSelected=new a.x,s.ouContextMenuItems=[],s.canManageOrganizationUnits=!1,s._entityTypeFullName="Abp.Organizations.OrganizationUnit",s.totalUnitCount=0,s}return _createClass(t,[{key:"ngOnInit",value:function(){this.canManageOrganizationUnits=this.isGranted("Pages.Administration.OrganizationUnits.ManageOrganizationTree"),this.ouContextMenuItems=this.getContextMenuItems(),this.getTreeDataFromServer()}},{key:"nodeSelect",value:function(e){e.origin&&this.ouSelected.emit({id:e.origin.id,displayName:e.origin.displayName})}},{key:"contextMenu",value:function(e,n,t){this.contextMenuData=n,this.nzContextMenuService.create(e,t)}},{key:"isDroppingBetweenTwoNodes",value:function(e){return"LI"===e.originalEvent.target.nodeName}},{key:"nodeDrop",value:function(e){var n,t=this,i=new x.N;i.id=e.dragNode.data.id,this.isDroppingBetweenTwoNodes(e)?(i.newParentId=e.dropNode.parent?e.dropNode.parent.data.id:null,n=e.dropNode.parent?e.dropNode.parent.data.displayName:this.l("Root")):(i.newParentId=e.dropNode.data.id,n=e.dropNode.data.displayName),this.message.confirm(this.l("OrganizationUnitMoveConfirmMessage",e.dragNode.data.displayName,n),this.l("AreYouSure"),(function(e){e?t._organizationUnitService.moveOrganizationUnit(i).pipe(Object(H.a)((function(e){return t.revertDragDrop(),Object(V.a)(e)}))).subscribe((function(){t.notify.success(t.l("SuccessfullyMoved")),t.reload()})):t.revertDragDrop()}))}},{key:"revertDragDrop",value:function(){this.reload()}},{key:"reload",value:function(){this.getTreeDataFromServer()}},{key:"addUnit",value:function(e){this.createOrEditOrganizationUnitModal.show({parentId:e})}},{key:"unitCreated",value:function(e){if(this.getTreeDataFromServer(),e.parentId){var n=this._treeDataHelperService.findNode(this.treeData,{data:{id:e.parentId}});if(!n)return;n.children.push({label:e.displayName,expandedIcon:"fa fa-folder-open m--font-warning",collapsedIcon:"fa fa-folder m--font-warning",selected:!0,children:[],data:e,memberCount:e.memberCount,roleCount:e.roleCount})}else this.treeData.push({label:e.displayName,expandedIcon:"fa fa-folder-open m--font-warning",collapsedIcon:"fa fa-folder m--font-warning",selected:!0,children:[],data:e,memberCount:e.memberCount,roleCount:e.roleCount});this.totalUnitCount+=1}},{key:"deleteUnit",value:function(e){var n=this;this.message.confirm(this.l("OrganizationUnitDeleteWarningMessage",this.contextMenuData.origin.displayName),this.l("AreYouSure"),(function(e){e&&n._organizationUnitService.deleteOrganizationUnit(n.contextMenuData.origin.id).subscribe((function(){n.notify.success(n.l("SuccessfullyDeleted")),n.selectedOu=null,n.reload()}))}))}},{key:"unitUpdated",value:function(e){this.getTreeDataFromServer();var n=this._treeDataHelperService.findNode(this.treeData,{data:{id:e.id}});n&&(n.data.displayName=e.displayName,n.label=e.displayName,n.memberCount=e.memberCount,n.roleCount=e.roleCount)}},{key:"membersAdded",value:function(e){this.incrementMemberCount(e.ouId,e.userIds.length)}},{key:"memberRemoved",value:function(e){this.incrementMemberCount(e.ouId,-1)}},{key:"incrementMemberCount",value:function(e,n){var t=this._treeDataHelperService.findNode(this.treeData,{data:{id:e}});t&&(t.data.memberCount+=n,t.memberCount=t.data.memberCount)}},{key:"rolesAdded",value:function(e){this.incrementRoleCount(e.ouId,e.roleIds.length)}},{key:"roleRemoved",value:function(e){this.incrementRoleCount(e.ouId,-1)}},{key:"incrementRoleCount",value:function(e,n){var t=this._treeDataHelperService.findNode(this.treeData,{data:{id:e}});t&&(t.data.roleCount+=n,t.roleCount=t.data.roleCount)}},{key:"getTreeDataFromServer",value:function(){var e=this;this._organizationUnitService.getOrganizationUnits().subscribe((function(n){e.totalUnitCount=n.items.length,e.treeData=G(n.items,"id","parentId","displayName")}))}},{key:"isEntityHistoryEnabled",value:function(){var e=this,n=abp.custom;return n.EntityHistory&&n.EntityHistory.isEnabled&&1===N.filter(n.EntityHistory.enabledEntities,(function(n){return n===e._entityTypeFullName})).length}},{key:"getContextMenuItems",value:function(){var e=this,n=this.isGranted("Pages.Administration.OrganizationUnits.ManageOrganizationTree"),t=[{label:this.l("Edit"),disabled:!n,command:function(n){e.createOrEditOrganizationUnitModal.show({id:e.selectedOu.data.id,displayName:e.selectedOu.data.displayName})}},{label:this.l("AddSubUnit"),disabled:!n,command:function(){e.addUnit(e.selectedOu.data.id)}},{label:this.l("Delete"),disabled:!n,command:function(){e.message.confirm(e.l("OrganizationUnitDeleteWarningMessage",e.selectedOu.data.displayName),e.l("AreYouSure"),(function(n){n&&e._organizationUnitService.deleteOrganizationUnit(e.selectedOu).subscribe((function(){e.deleteUnit(e.selectedOu.data.id),e.notify.success(e.l("SuccessfullyDeleted")),e.selectedOu=null,e.reload()}))}))}}];return this.isEntityHistoryEnabled()&&t.push({label:this.l("History"),disabled:!1,command:function(n){e.entityTypeHistoryModal.show({entityId:e.selectedOu.data.id.toString(),entityTypeFullName:e._entityTypeFullName,entityTypeDescription:e.selectedOu.data.displayName})}}),t}},{key:"edit",value:function(e){this.createOrEditOrganizationUnitModal.show({id:this.contextMenuData.origin.id,displayName:this.contextMenuData.origin.displayName})}},{key:"addChild",value:function(){this.createOrEditOrganizationUnitModal.show({parentId:this.contextMenuData.origin.id,displayName:this.contextMenuData.origin.displayName})}}]),t}(f.a);$.ctorParameters=function(){return[{type:a.F},{type:x.R},{type:L.a},{type:q.a}]},Object(i.__decorate)([Object(a.S)()],$.prototype,"ouSelected",void 0),Object(i.__decorate)([Object(a.mb)("treeComponent")],$.prototype,"treeComponent",void 0),Object(i.__decorate)([Object(a.mb)("createOrEditOrganizationUnitModal",{static:!0})],$.prototype,"createOrEditOrganizationUnitModal",void 0),Object(i.__decorate)([Object(a.mb)("entityTypeHistoryModal",{static:!0})],$.prototype,"entityTypeHistoryModal",void 0),$=Object(i.__decorate)([Object(a.n)({selector:"organization-tree",template:Object(i.__importDefault)(t("ayPH")).default})],$);var Y=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i){var r;return _classCallCheck(this,t),(r=n.call(this,e))._organizationUnitService=i,r.loading=!1,r.columns=[{type:"checkbox",index:"checked"},{title:r.l("UserName"),index:"userName"},{buttons:[{text:r.l("Remove"),click:function(e){return r.removeMember(e)}}]}],r.memberRemoved=new a.x,r.membersAdded=new a.x,r.data=[],r._organizationUnit=null,r}return _createClass(t,[{key:"fetchDataList",value:function(e,n,t){this.getOrganizationUnitUsers()}},{key:"ngOnInit",value:function(){}},{key:"getOrganizationUnitUsers",value:function(e){var n=this;this._organizationUnit&&(this.loading=!0,this._organizationUnitService.getOrganizationUnitUsers(this._organizationUnit.id,void 0,this.pageSize,(this.pageNumber-1)*this.pageSize).subscribe((function(e){n.totalItems=e.totalCount,n.dataList=e.items,n.loading=!1}),(function(){return n.loading=!1})))}},{key:"reloadPage",value:function(){this.getOrganizationUnitUsers()}},{key:"refreshMembers",value:function(){this.reloadPage()}},{key:"openAddMemberModal",value:function(){this.addMemberModal.shown()}},{key:"removeMember",value:function(e){var n=this;this.message.confirm(this.l("RemoveUserFromOuWarningMessage",e.userName,this.organizationUnit.displayName),this.l("AreYouSure"),(function(t){t&&n._organizationUnitService.removeUserFromOrganizationUnit(e.id,n.organizationUnit.id).subscribe((function(){n.notify.success(n.l("SuccessfullyRemoved")),n.memberRemoved.emit({userId:e.id,ouId:n.organizationUnit.id}),n.refreshMembers()}))}))}},{key:"addMembers",value:function(e){this.membersAdded.emit({userIds:e.userIds,ouId:e.ouId}),this.refreshMembers()}},{key:"getSelectedItems",value:function(){return this.dataList.filter((function(e){return e.checked})).length}},{key:"removeMemberBat",value:function(){var e=this;this.message.confirm(this.l("RemoveUserFromOuWarningMessage","",this.organizationUnit.displayName),this.l("AreYouSure"),(function(n){return Object(i.__awaiter)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var t,i,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=19;break}t=_createForOfIteratorHelper(this.dataList.filter((function(e){return e.checked}))),e.prev=2,t.s();case 4:if((i=t.n()).done){e.next=10;break}return r=i.value,e.next=8,this._organizationUnitService.removeUserFromOrganizationUnit(r.id,this.organizationUnit.id).toPromise();case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),t.e(e.t0);case 15:return e.prev=15,t.f(),e.finish(15);case 18:this.notify.success(this.l("SuccessfullyRemoved")),this.refreshMembers();case 19:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})))}))}},{key:"organizationUnit",get:function(){return this._organizationUnit},set:function(e){this._organizationUnit!==e&&(this._organizationUnit=e,this.addMemberModal.organizationUnitId=e.id,e&&this.refreshMembers())}}]),t}(f.b);Y.ctorParameters=function(){return[{type:a.F},{type:x.R}]},Object(i.__decorate)([Object(a.S)()],Y.prototype,"memberRemoved",void 0),Object(i.__decorate)([Object(a.S)()],Y.prototype,"membersAdded",void 0),Object(i.__decorate)([Object(a.mb)("addMemberModal",{static:!0})],Y.prototype,"addMemberModal",void 0),Object(i.__decorate)([Object(a.mb)("dataTable",{static:!0})],Y.prototype,"dataTable",void 0),Y=Object(i.__decorate)([Object(a.n)({selector:"organization-unit-members",template:Object(i.__importDefault)(t("zq8w")).default})],Y);var X=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i,r){var o;_classCallCheck(this,t),(o=n.call(this,e))._changeDetector=i,o._organizationUnitService=r,o.loading=!1,o.columns=[{type:"checkbox",index:"checked"},{title:o.l("Role"),index:"displayName"},{buttons:[]}],o.roleRemoved=new a.x,o.rolesAdded=new a.x,o._organizationUnit=null;var s=o.columns[o.columns.length-1];return o.permission.isGranted("Pages.Administration.OrganizationUnits.ManageRoles")&&s.buttons.push({text:o.l("Remove"),click:function(e){return o.removeRole(e)}}),o}return _createClass(t,[{key:"fetchDataList",value:function(e,n,t){this.getOrganizationUnitRoles()}},{key:"ngOnInit",value:function(){}},{key:"getOrganizationUnitRoles",value:function(e){var n=this;this._organizationUnit&&(this.loading=!0,this._organizationUnitService.getOrganizationUnitRoles(this._organizationUnit.id,void 0,this.pageSize,this.pageSize*(this.pageNumber-1)).subscribe((function(e){n.totalItems=e.totalCount,n.dataList=e.items,n.loading=!1}),(function(){return n.loading=!1})))}},{key:"reloadPage",value:function(){this.getOrganizationUnitRoles()}},{key:"refreshRoles",value:function(){this.reloadPage()}},{key:"openAddRoleModal",value:function(){this.addRoleModal.shown()}},{key:"removeRole",value:function(e){var n=this;this.message.confirm(this.l("RemoveRoleFromOuWarningMessage",e.displayName,this.organizationUnit.displayName),this.l("AreYouSure"),(function(t){t&&n._organizationUnitService.removeRoleFromOrganizationUnit(e.id,n.organizationUnit.id).subscribe((function(){n.notify.success(n.l("SuccessfullyRemoved")),n.roleRemoved.emit({roleId:e.id,ouId:n.organizationUnit.id}),n.refreshRoles()}))}))}},{key:"addRoles",value:function(e){this.rolesAdded.emit({roleIds:e.roleIds,ouId:e.ouId}),this.refreshRoles()}},{key:"getSelectedItems",value:function(){return this.dataList.filter((function(e){return e.checked})).length}},{key:"removeRoleBat",value:function(){var e=this,n=this.dataList.filter((function(e){return e.checked}));this.message.confirm(this.l("RemoveRoleFromOuWarningMessage","",""),this.l("AreYouSure"),(function(t){return Object(i.__awaiter)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var i,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=20;break}i=_createForOfIteratorHelper(n),e.prev=2,i.s();case 4:if((r=i.n()).done){e.next=12;break}return a=r.value,e.next=8,this._organizationUnitService.removeRoleFromOrganizationUnit(a.id,this.organizationUnit.id).toPromise();case 8:this.notify.success(this.l("SuccessfullyRemoved")),this.refreshRoles();case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),i.e(e.t0);case 17:return e.prev=17,i.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[2,14,17,20]])})))}))}},{key:"organizationUnit",get:function(){return this._organizationUnit},set:function(e){this._organizationUnit!==e&&(this._organizationUnit=e,this.addRoleModal.organizationUnitId=e.id,e&&this.refreshRoles())}}]),t}(f.b);X.ctorParameters=function(){return[{type:a.F},{type:a.k},{type:x.R}]},Object(i.__decorate)([Object(a.S)()],X.prototype,"roleRemoved",void 0),Object(i.__decorate)([Object(a.S)()],X.prototype,"rolesAdded",void 0),Object(i.__decorate)([Object(a.mb)("addRoleModal",{static:!0})],X.prototype,"addRoleModal",void 0),Object(i.__decorate)([Object(a.mb)("dataTable",{static:!0})],X.prototype,"dataTable",void 0),X=Object(i.__decorate)([Object(a.n)({selector:"organization-unit-roles",template:Object(i.__importDefault)(t("9M/x")).default})],X);var K=t("ila4"),J=function e(){_classCallCheck(this,e)},Q=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i){var r;return _classCallCheck(this,t),(r=n.call(this,e)).injector=e,r.httpUtil=i,r.active=!1,r.onSave=new a.x,r}return _createClass(t,[{key:"show",value:function(e){e?(this.pickupId=e.id,this.pickup=e):this.pickup=new J,this.active=!0}},{key:"save",value:function(){var e=this;this.pickup.topic_id=this.topic.id,this.pickupId?this.httpUtil.post("/api/pickup/update",this.pickup).toPromise().then((function(n){e.onSave.emit(!0),e.active=!1})):this.httpUtil.post("/api/pickup/create",this.pickup).toPromise().then((function(n){e.onSave.emit(!0),e.active=!1}))}},{key:"canSubmit",value:function(){return this.pickup.pickup_name}}]),t}(f.a);Q.ctorParameters=function(){return[{type:a.F},{type:b.a}]},Object(i.__decorate)([Object(a.G)()],Q.prototype,"topic",void 0),Object(i.__decorate)([Object(a.S)()],Q.prototype,"onSave",void 0),Q=Object(i.__decorate)([Object(a.n)({selector:"app-create-or-edit-pickup",template:Object(i.__importDefault)(t("bNtv")).default,styles:[Object(i.__importDefault)(t("kSEU")).default]})],Q);var Z=t("1a4p"),ee=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i){var r;return _classCallCheck(this,t),(r=n.call(this,e))._roleService=i,r.modalSave=new a.x,r.active=!1,r.saving=!1,r.role=new x.db,r}return _createClass(t,[{key:"show",value:function(e){var n=this,t=this;t.active=!0,t._roleService.getRoleForEdit(e).subscribe((function(e){t.role=e.role,n.permissionTree.editData=e}))}},{key:"onShown",value:function(){document.getElementById("RoleDisplayName").focus()}},{key:"save",value:function(){var e=this,n=new x.n;n.role=this.role,n.grantedPermissionNames=this.permissionTree.getGrantedPermissionNames(),this.saving=!0,this._roleService.createOrUpdateRole(n).pipe(Object(O.a)((function(){return e.saving=!1}))).subscribe((function(){e.notify.info(e.l("SavedSuccessfully")),e.close(),e.modalSave.emit(null)}))}},{key:"close",value:function(){this.active=!1}}]),t}(f.a);ee.ctorParameters=function(){return[{type:a.F},{type:x.eb}]},Object(i.__decorate)([Object(a.mb)("permissionTree",{static:!1})],ee.prototype,"permissionTree",void 0),Object(i.__decorate)([Object(a.S)()],ee.prototype,"modalSave",void 0),ee=Object(i.__decorate)([Object(a.n)({selector:"createOrEditRoleModal",template:Object(i.__importDefault)(t("iza6")).default})],ee);var ne=t("DKuU"),te=t("dTa8"),ie=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i){var r;return _classCallCheck(this,t),(r=n.call(this,i))._editionService=e,r.editions=[],r.selectedEdition=void 0,r.selectedEditionChange=new a.x,r}return _createClass(t,[{key:"ngOnInit",value:function(){var e=this;this._editionService.getEditionComboboxItems(0,!0,!1).subscribe((function(n){e.editions=n}))}}]),t}(f.a);ie.ctorParameters=function(){return[{type:x.u},{type:a.F}]},Object(i.__decorate)([Object(a.mb)("EditionCombobox",{static:!0})],ie.prototype,"editionComboboxElement",void 0),Object(i.__decorate)([Object(a.G)()],ie.prototype,"selectedEdition",void 0),Object(i.__decorate)([Object(a.S)()],ie.prototype,"selectedEditionChange",void 0),ie=Object(i.__decorate)([Object(a.n)({selector:"edition-combo",template:'\n    <nz-select #EditionCombobox class="form-control" [(ngModel)]="selectedEdition" (ngModelChange)="selectedEditionChange.emit($event)">\n      <nz-option *ngFor="let edition of editions" [nzValue]="edition.value" [nzLabel]="edition.displayText"> </nz-option>\n    </nz-select>\n  '})],ie);var re=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i){var r;return _classCallCheck(this,t),(r=n.call(this,i))._treeDataHelperService=e,r.selectedFeatures=[],r}return _createClass(t,[{key:"setTreeData",value:function(e){this.treeData=G(e,"name","parentName","displayName")}},{key:"setSelectedNodes",value:function(e){this.selectedFeatures=[],e.featureValues.forEach((function(n){var t=e.features.find((function(e){return e.name===n.name}));t&&(t.checked=!0)}))}},{key:"setSelectedNode",value:function(e,n){var t;"true"===n?(t=this._treeDataHelperService.findNode(this.treeData,{data:{name:e}}),this.selectedFeatures.push(t)):n&&"false"!==n&&((t=this._treeDataHelperService.findNode(this.treeData,{data:{name:e}})).value=n,this.selectedFeatures.push(t))}},{key:"getGrantedFeatures",value:function(){if(!this._editData.features)return[];var e,n=[],t=_createForOfIteratorHelper(this._editData.features);try{for(t.s();!(e=t.n()).done;){var i=e.value,r=new x.P;r.name=i.name,r.value=this.getFeatureValueByName(r.name),n.push(r)}}catch(a){t.e(a)}finally{t.f()}return n}},{key:"onDropdownChange",value:function(e){e.value&&(e.selected=!0)}},{key:"onInputChange",value:function(e){e.value&&(e.selected=!0)}},{key:"findFeatureByName",value:function(e){var n=N.find(this._editData.features,(function(n){return n.name===e}));return n||abp.log.warn("Could not find a feature by name: "+e),n}},{key:"findFeatureValueByName",value:function(e){var n=this.findFeatureByName(e);if(!n)return"";var t=N.find(B(this.treeData).map((function(e){return e.origin})),(function(n){return n.name===e}));return t?t.value:n.defaultValue}},{key:"isFeatureValueValid",value:function(e,n){var t=this.findFeatureByName(e);if(!t||!t.inputType||!t.inputType.validator)return!0;var i=t.inputType.validator;if("STRING"===i.name){if(null==n)return i.attributes.AllowNull;if("string"!=typeof n)return!1;if(i.attributes.MinLength>0&&n.length<i.attributes.MinLength)return!1;if(i.attributes.MaxLength>0&&n.length>i.attributes.MaxLength)return!1;if(i.attributes.RegularExpression)return new RegExp(i.attributes.RegularExpression).test(n)}else if("NUMERIC"===i.name){var r=parseInt(n,10);if(isNaN(r))return!1;if(i.attributes.MinValue>r)return!1;var a=i.attributes.MaxValue;if(a>0&&r>a)return!1}return!0}},{key:"areAllValuesValid",value:function(){var e=this,n=!0;return N.forEach(W(this.treeData).map((function(e){return e.origin})),(function(t){var i=e.getFeatureValueByName(t.name);e.isFeatureValueValid(t.name,i)||(n=!1)})),n}},{key:"setFeatureValueByName",value:function(e,n){var t=N.find(this._editData.featureValues,(function(n){return n.name===e}));t&&(t.value=n)}},{key:"isFeatureSelected",value:function(e){return 1===W(this.treeData).map((function(e){return e.origin})).filter((function(n){return n.name===e})).length}},{key:"getFeatureValueByName",value:function(e){var n=B(this.treeData).find((function(n){return n.origin.name===e})).origin;return n?n.defaultValue?n.defaultValue:this.isFeatureSelected(e)?"true":"false":null}},{key:"isFeatureEnabled",value:function(e){return"true"===this.findFeatureValueByName(e).toLowerCase()}},{key:"nodeSelect",value:function(e){this._treeDataHelperService.findParent(this.treeData,{data:{name:e.node.data.name}})}},{key:"onNodeUnselect",value:function(e){}},{key:"editData",set:function(e){this._editData=e,this.setSelectedNodes(e),this.setTreeData(e.features)}}]),t}(f.a);re.ctorParameters=function(){return[{type:L.a},{type:a.F}]},re=Object(i.__decorate)([Object(a.n)({selector:"feature-tree",template:Object(i.__importDefault)(t("tSos")).default,styles:[Object(i.__importDefault)(t("Y8Dy")).default]})],re);var ae,oe=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i){var r;return _classCallCheck(this,t),(r=n.call(this,i))._treeDataHelperService=e,r.cascadeSelectEnabled=!0,r.selectedOus=[],r.filter="",r}return _createClass(t,[{key:"onChange",value:function(e){console.log(e)}},{key:"setTreeData",value:function(e){this.treeData=G(e,"id","parentId","displayName")}},{key:"setSelectedNodes",value:function(e){var n=this;this.selectedOus=[],N.forEach(e,(function(e){var t=n._treeDataHelperService.findNode(n.treeData,{data:{code:e}});t&&n.selectedOus.push(t)}))}},{key:"getSelectedOrganizations",value:function(){if(!this.selectedOus)return[];var e=[];return N.forEach(this.selectedOus,(function(n){e.push(n.origin.id)})),e}},{key:"filterOrganizationUnit",value:function(e,n){var t=this;N.forEach(e,(function(e){e.data.displayName.toLowerCase().indexOf(n.toLowerCase())>=0?e.styleClass=t.showParentNodes(e):e.styleClass="hidden-tree-node",e.children&&t.filterOrganizationUnit(e.children,n)}))}},{key:"showParentNodes",value:function(e){e.parent&&(e.parent.styleClass="",this.showParentNodes(e.parent))}},{key:"filterOrganizationUnits",value:function(e){this.filterOrganizationUnit(this.treeData,this.filter)}},{key:"nodeSelect",value:function(e){if(this.cascadeSelectEnabled)for(var n=this._treeDataHelperService.findParent(this.treeData,{data:{id:e.node.data.id}});null!=n;)this.selectedOus.push(n),n=this._treeDataHelperService.findParent(this.treeData,{data:{id:n.data.id}})}},{key:"onNodeUnselect",value:function(e){var n=this._treeDataHelperService.findChildren(this.treeData,{data:{name:e.node.data.name}});n.push(e.node.data.name),N.remove(this.selectedOus,(function(e){return-1!==n.indexOf(e.origin.name)}))}},{key:"data",set:function(e){this.setTreeData(e.allOrganizationUnits),this.setSelectedNodes(e.selectedOrganizationUnits),this._allOrganizationUnits=e.allOrganizationUnits,this._selectedOrganizationUnits=e.selectedOrganizationUnits}}]),t}(f.a);oe.ctorParameters=function(){return[{type:L.a},{type:a.F}]},Object(i.__decorate)([Object(a.G)()],oe.prototype,"cascadeSelectEnabled",void 0),oe=Object(i.__decorate)([Object(a.n)({selector:"organization-unit-tree",template:'\n    <div class="form-group">\n      <input\n      nz-input\n        id="OrganizationUnitsTreeFilter"\n        type="text"\n        (keyup)="filterOrganizationUnits($event)"\n        (change)="filterOrganizationUnits(filter)"\n        [(ngModel)]="filter"\n        class="form-control"\n        placeholder="{{ \'SearchWithThreeDot\' | localize }}"\n      />\n    </div>\n    \x3c!-- <p-tree\n      [value]="treeData"\n      selectionMode="checkbox"\n      [(selection)]="selectedOus"\n      (onNodeSelect)="nodeSelect($event)"\n      (onNodeUnselect)="onNodeUnselect($event)"\n      [propagateSelectionUp]="false"\n      [propagateSelectionDown]="cascadeSelectEnabled"\n    ></p-tree> --\x3e\n\n      <nz-tree-select\n      [nzData]="treeData"\n      nzShowSearch\n      nzPlaceHolder="Please select"\n      (ngModelChange)="onChange($event)"\n      [(ngModel)]="selectedOus"\n    >\n    </nz-tree-select>\n  '})],oe);var se=ae=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i){var r;return _classCallCheck(this,t),(r=n.call(this,i))._permissionService=e,r.permissions=[],r.selectedPermission=new o.d(""),r.onTouched=function(){},r}return _createClass(t,[{key:"ngOnInit",value:function(){var e=this;this._permissionService.getAllPermissions().subscribe((function(n){N.forEach(n.items,(function(e){e.displayName=Array(e.level+1).join("---")+" "+e.displayName})),e.permissions=n.items}))}},{key:"writeValue",value:function(e){this.selectedPermission&&this.selectedPermission.setValue(e)}},{key:"registerOnChange",value:function(e){this.selectedPermission.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.selectedPermission.disable():this.selectedPermission.enable()}}]),t}(f.a);se.ctorParameters=function(){return[{type:x.W},{type:a.F}]},se=ae=Object(i.__decorate)([Object(a.n)({selector:"permission-combo",template:'\n    <select class="form-control" [formControl]="selectedPermission">\n      <option value="">{{ "FilterByPermission" | localize }}</option>\n      <option *ngFor="let permission of permissions" [value]="permission.name">{{ permission.displayName }}</option>\n    </select>\n  ',providers:[{provide:o.i,useExisting:Object(a.tb)((function(){return ae})),multi:!0}]})],se);var le=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i){var r;return _classCallCheck(this,t),(r=n.call(this,e))._permissionService=i,r.closed=new a.x,r.visible=!1,r.selectedPermissions=[],r.NumberOfFilteredPermission=0,r.treeNodes=[],r}return _createClass(t,[{key:"ngOnInit",value:function(){this.loadAllPermissionsToFilterTree()}},{key:"openPermissionTreeModal",value:function(){}},{key:"closePermissionTreeModal",value:function(){this.NumberOfFilteredPermission=this.getSelectedPermissions().length,abp.notify.success(this.l("XCountPermissionFiltered",this.NumberOfFilteredPermission)),this.closed.emit(this.getSelectedPermissions())}},{key:"getSelectedPermissions",value:function(){return(e=this.treeNodes,B(e).filter((function(e){return e.isSelectable}))).map((function(e){return e.origin.name}));var e}},{key:"change",value:function(){this.closed.emit()}},{key:"loadAllPermissionsToFilterTree",value:function(){var e=this,n=[];this._permissionService.getAllPermissions().subscribe((function(t){t.items&&t.items.forEach((function(e){n.push(new x.E({name:e.name,description:e.description,displayName:e.displayName,isGrantedByDefault:e.isGrantedByDefault,parentName:e.parentName}))})),e.treeNodes=G(n,"name","parentName","displayName")}))}}]),t}(f.a);le.ctorParameters=function(){return[{type:a.F},{type:x.W}]},Object(i.__decorate)([Object(a.S)()],le.prototype,"closed",void 0),le=Object(i.__decorate)([Object(a.n)({selector:"permission-tree-modal",template:Object(i.__importDefault)(t("BX2c")).default})],le);var ce,de=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i){var r;return _classCallCheck(this,t),(r=n.call(this,i))._treeDataHelperService=e,r.selectedPermissions=[],r.filter="",r}return _createClass(t,[{key:"setTreeData",value:function(e){var n=e.permissions.filter((function(n){return!e.permissions.some((function(e){return e.parentName===n.name}))})).filter((function(n){return-1!==e.grantedPermissionNames.indexOf(n.name)}));this.selectedPermissions=n.map((function(e){return e.name})),this.treeData=G(e.permissions,"name","parentName","displayName")}},{key:"getGrantedPermissionNames",value:function(){return W(this.tree.getTreeNodes()).map((function(e){return e.origin.name}))}},{key:"onNodeUnselect",value:function(e){}},{key:"filterPermissions",value:function(e){var n=this.tree.getTreeNodes();this.filterPermission(n,this.filter)}},{key:"filterPermission",value:function(e,n){var t=this;N.forEach(e,(function(e){e.data.displayName.toLowerCase().indexOf(n.toLowerCase())>=0?e.styleClass=t.showParentNodes(e):e.styleClass="hidden-tree-node",e.children&&t.filterPermission(e.children,n)}))}},{key:"showParentNodes",value:function(e){e.parent&&(e.parent.styleClass="",this.showParentNodes(e.parent))}},{key:"editData",set:function(e){this.setTreeData(e)}}]),t}(f.a);de.ctorParameters=function(){return[{type:L.a},{type:a.F}]},Object(i.__decorate)([Object(a.mb)("tree")],de.prototype,"tree",void 0),de=Object(i.__decorate)([Object(a.n)({selector:"permission-tree",template:'\n    <div class="form-group">\n      <input nz-input type="text" (input)="filterPermissions($event)" [(ngModel)]="filter" class="form-control" placeholder="{{ \'SearchWithThreeDot\' | localize }}" />\n    </div>\n\n      <nz-tree\n      [nzData]="treeData"\n      nzCheckable\n      nzMultiple\n      [nzExpandAll]="true"\n      [nzCheckedKeys]="selectedPermissions"\n    \n      (nzCheckBoxChange)="onNodeUnselect($event)"\n      #tree\n    >\n    </nz-tree>\n  '})],de);var ue=ce=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i){var r;return _classCallCheck(this,t),(r=n.call(this,i))._roleService=e,r.roles=[],r.selectedRole=new o.d(""),r.onTouched=function(){},r}return _createClass(t,[{key:"ngOnInit",value:function(){var e=this;this._roleService.getRoles(void 0).subscribe((function(n){e.roles=n.items}))}},{key:"writeValue",value:function(e){this.selectedRole&&this.selectedRole.setValue(e)}},{key:"registerOnChange",value:function(e){this.selectedRole.valueChanges.subscribe(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e?this.selectedRole.disable():this.selectedRole.enable()}}]),t}(f.a);ue.ctorParameters=function(){return[{type:x.eb},{type:a.F}]},ue=ce=Object(i.__decorate)([Object(a.n)({selector:"role-combo",template:'\n    <nz-select class="form-control" [formControl]="selectedRole">\n      <nz-option [nzValue]="">{{ "FilterByRole" | localize }}</nz-option>\n      <nz-option *ngFor="let role of roles" [nzValue]="role.id">{{ role.displayName }}</nz-option>\n    </nz-select>\n  ',providers:[{provide:o.i,useExisting:Object(a.tb)((function(){return ce})),multi:!0}]})],ue);var me=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i,r,o){var s;return _classCallCheck(this,t),(s=n.call(this,e))._tenantService=i,s._commonLookupService=r,s._profileService=o,s.modalSave=new a.x,s.active=!1,s.saving=!1,s.setRandomPassword=!0,s.useHostDb=!0,s.editions=[],s.passwordComplexitySetting=new x.S,s.isUnlimited=!1,s.isSubscriptionFieldsVisible=!1,s.isSelectedEditionFree=!1,s.tenantAdminPasswordRepeat="",s}return _createClass(t,[{key:"show",value:function(){var e=this;this.active=!0,this.init(),this._profileService.getPasswordComplexitySetting().subscribe((function(n){e.passwordComplexitySetting=n.setting}))}},{key:"onShown",value:function(){document.getElementById("TenancyName").focus()}},{key:"init",value:function(){var e=this;this.tenant=new x.q,this.tenant.isActive=!0,this.tenant.shouldChangePasswordOnNextLogin=!0,this.tenant.sendActivationEmail=!0,this.tenant.editionId=0,this.tenant.isInTrialPeriod=!1,this._commonLookupService.getEditionsForCombobox(!1).subscribe((function(n){e.editions=n.items;var t=new x.ob;t.value="",t.displayText=e.l("NotAssigned"),e.editions.unshift(t),e._commonLookupService.getDefaultEditionName().subscribe((function(n){var t=N.filter(e.editions,{displayText:n.name});t&&t[0]&&(e.tenant.editionId=parseInt(t[0].value,10),e.toggleSubscriptionFields())}))}))}},{key:"getEditionValue",value:function(e){return parseInt(e.value,10)}},{key:"selectedEditionIsFree",value:function(){var e=N.filter(this.editions,{value:this.tenant.editionId.toString()}).map((function(e){return Object.assign(new x.ob,e)}));1!==e.length&&(this.isSelectedEditionFree=!0);var n=e[0];return this.isSelectedEditionFree=n.isFree,this.isSelectedEditionFree}},{key:"subscriptionEndDateIsValid",value:function(){return this.tenant.editionId<=0||!!this.isUnlimited||!!this.tenant.subscriptionEndDateUtc}},{key:"save",value:function(){var e=this;this.saving=!0,this.setRandomPassword&&(this.tenant.adminPassword=null),0===this.tenant.editionId&&(this.tenant.editionId=null),(this.isUnlimited||this.tenant.editionId<=0)&&(this.tenant.subscriptionEndDateUtc=null),this._tenantService.createTenant(this.tenant).pipe(Object(O.a)((function(){return e.saving=!1}))).subscribe((function(){e.notify.info(e.l("SavedSuccessfully")),e.close(),e.modalSave.emit(null)}))}},{key:"close",value:function(){this.active=!1,this.tenantAdminPasswordRepeat=""}},{key:"onEditionChange",value:function(){this.tenant.isInTrialPeriod=this.tenant.editionId>0&&!this.selectedEditionIsFree(),this.toggleSubscriptionFields()}},{key:"toggleSubscriptionFields",value:function(){this.isSelectedEditionFree=this.selectedEditionIsFree(),this.tenant.editionId<=0||this.isSelectedEditionFree?(this.isSubscriptionFieldsVisible=!1,this.isUnlimited=this.isSelectedEditionFree):this.isSubscriptionFieldsVisible=!0}}]),t}(f.a);me.ctorParameters=function(){return[{type:a.F},{type:x.wb},{type:x.k},{type:x.X}]},Object(i.__decorate)([Object(a.S)()],me.prototype,"modalSave",void 0),me=Object(i.__decorate)([Object(a.n)({selector:"createTenantModal",template:Object(i.__importDefault)(t("hDhq")).default})],me);var pe=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i,r){var o;return _classCallCheck(this,t),(o=n.call(this,e))._tenantService=i,o._commonLookupService=r,o.modalSave=new a.x,o.active=!1,o.saving=!1,o.isUnlimited=!1,o.subscriptionEndDateUtcIsValid=!1,o.tenant=void 0,o.editions=[],o.isSubscriptionFieldsVisible=!1,o}return _createClass(t,[{key:"show",value:function(e){var n=this;this.active=!0,this._commonLookupService.getEditionsForCombobox(!1).subscribe((function(t){n.editions=t.items;var i=new x.ob;i.displayText=n.l("NotAssigned"),i.value="",n.editions.unshift(i),n._tenantService.getTenantForEdit(e).subscribe((function(e){n.tenant=e,n.currentConnectionString=e.connectionString,n.tenant.editionId=n.tenant.editionId||0,n.isUnlimited=!n.tenant.subscriptionEndDateUtc,n.subscriptionEndDateUtcIsValid=n.isUnlimited||void 0!==n.tenant.subscriptionEndDateUtc,n.toggleSubscriptionFields()}))}))}},{key:"onShown",value:function(){document.getElementById("Name").focus(),this.tenant.subscriptionEndDateUtc&&(this.subscriptionEndDateUtc.nativeElement.value=this.tenant.subscriptionEndDateUtc.format("L"))}},{key:"subscriptionEndDateChange",value:function(e){this.subscriptionEndDateUtcIsValid=e&&!1!==e.date||this.isUnlimited}},{key:"selectedEditionIsFree",value:function(){if(!this.tenant.editionId)return!0;var e=N.filter(this.editions,{value:this.tenant.editionId+""});return 1!==e.length||e[0].isFree}},{key:"save",value:function(){var e=this;this.saving=!0,0===this.tenant.editionId&&(this.tenant.editionId=null),!this.isUnlimited&&this.tenant.editionId||(this.tenant.subscriptionEndDateUtc=null),this._tenantService.updateTenant(this.tenant).pipe(Object(O.a)((function(){return e.saving=!1}))).subscribe((function(){e.notify.info(e.l("SavedSuccessfully")),e.close(),e.modalSave.emit(null)}))}},{key:"close",value:function(){this.active=!1}},{key:"onEditionChange",value:function(){this.selectedEditionIsFree()&&(this.tenant.isInTrialPeriod=!1),this.toggleSubscriptionFields()}},{key:"onUnlimitedChange",value:function(){this.isUnlimited?(this.tenant.subscriptionEndDateUtc=null,this.subscriptionEndDateUtcIsValid=!0):this.tenant.subscriptionEndDateUtc||(this.subscriptionEndDateUtcIsValid=!1)}},{key:"toggleSubscriptionFields",value:function(){this.isSubscriptionFieldsVisible=this.tenant.editionId>0}}]),t}(f.a);pe.ctorParameters=function(){return[{type:a.F},{type:x.wb},{type:x.k}]},Object(i.__decorate)([Object(a.mb)("nameInput",{static:!0})],pe.prototype,"nameInput",void 0),Object(i.__decorate)([Object(a.mb)("SubscriptionEndDateUtc",{static:!1})],pe.prototype,"subscriptionEndDateUtc",void 0),Object(i.__decorate)([Object(a.S)()],pe.prototype,"modalSave",void 0),pe=Object(i.__decorate)([Object(a.n)({selector:"editTenantModal",template:Object(i.__importDefault)(t("Eigk")).default})],pe);var fe=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i){var r;return _classCallCheck(this,t),(r=n.call(this,e))._tenantService=i,r.active=!1,r.saving=!1,r.resettingFeatures=!1,r.featureEditData=null,r}return _createClass(t,[{key:"show",value:function(e,n){this.tenantId=e,this.tenantName=n,this.active=!0,this.loadFeatures()}},{key:"loadFeatures",value:function(){var e=this;e._tenantService.getTenantFeaturesForEdit(this.tenantId).subscribe((function(n){e.featureTree.editData=n}))}},{key:"save",value:function(){var e=this;if(this.featureTree.areAllValuesValid()){var n=new x.Gb;n.id=this.tenantId,n.featureValues=this.featureTree.getGrantedFeatures(),this.saving=!0,this._tenantService.updateTenantFeatures(n).pipe(Object(O.a)((function(){return e.saving=!1}))).subscribe((function(){e.notify.info(e.l("SavedSuccessfully")),e.close()}))}else this.message.warn(this.l("InvalidFeaturesWarning"))}},{key:"resetFeatures",value:function(){var e=this,n=new x.w;n.id=this.tenantId,this.resettingFeatures=!0,this._tenantService.resetTenantSpecificFeatures(n).pipe(Object(O.a)((function(){return e.resettingFeatures=!1}))).subscribe((function(){e.notify.info(e.l("ResetSuccessfully")),e.loadFeatures()}))}},{key:"close",value:function(){this.active=!1}}]),t}(f.a);fe.ctorParameters=function(){return[{type:a.F},{type:x.wb}]},Object(i.__decorate)([Object(a.mb)("featureTree",{static:!1})],fe.prototype,"featureTree",void 0),fe=Object(i.__decorate)([Object(a.n)({selector:"tenantFeaturesModal",template:Object(i.__importDefault)(t("RPN6")).default})],fe);var ge=t("HP4u"),ve=function e(){_classCallCheck(this,e)},he=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i){var r;return _classCallCheck(this,t),(r=n.call(this,e)).httpUtil=i,r.topic=new ve,r.active=!1,r.options=[],r.modalSave=new a.x,r.addressList=[],r}return _createClass(t,[{key:"save",value:function(){var e=this;this.topic.province=this.addressList[0],this.topic.city=this.addressList[1],this.topic.area=this.addressList[2],delete this.topic._values,this.id?this.httpUtil.post("/api/topic/update",this.topic).toPromise().then((function(){e.modalSave.emit(!0),e.active=!1})):this.httpUtil.post("/api/topic/create",this.topic).toPromise().then((function(){e.modalSave.emit(!0),e.active=!1}))}},{key:"show",value:function(e){e?(this.id=e.id,this.topic=e,this.addressList=[e.province,e.city,e.area]):this.topic=new ve,this.active=!0,this.loadCityData()}},{key:"loadCityData",value:function(){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.httpUtil.get("/assets/citys.json").toPromise();case 2:n=e.sent,this.options=n.map((function(e){return e.title=e.name,e.label=e.name,e.value=e.name,e.children=e.city.map((function(e){return e.children=e.area.map((function(e){return{title:e,label:e,value:e,isLeaf:!0}})),e.title=e.name,e.label=e.name,e.value=e.name,e})),e}));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"canSubmit",get:function(){return!(this.addressList.length<3||!this.topic.name)}}]),t}(f.a);he.ctorParameters=function(){return[{type:a.F},{type:b.a}]},Object(i.__decorate)([Object(a.S)()],he.prototype,"modalSave",void 0),he=Object(i.__decorate)([Object(a.n)({selector:"app-create-or-edit-topic",template:Object(i.__importDefault)(t("GupK")).default,styles:[Object(i.__importDefault)(t("H8yg")).default]})],he);var ze=t("47vk"),be=t("f0ZS"),ye=function(e){_inherits(t,e);var n=_createSuper(t);function t(e,i){var r;return _classCallCheck(this,t),(r=n.call(this,e)).injector=e,r._userService=i,r.visible=!1,r.modalSave=new a.x,r.saving=!1,r.nodes=[],r.value=[],r}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"show",value:function(e,n){var t=this;this.userId=e,this.userName=n,this._userService.getUserPermissionsForEdit(e).subscribe((function(e){t.value=e.grantedPermissionNames,t.nodes=G(e.permissions,"name","parentName","displayName"),t.visible=!0}))}},{key:"hide",value:function(){this.visible=!1}},{key:"submit",value:function(){var e=this,n=W(this.nodes),t=new x.Hb;t.grantedPermissionNames=n.map((function(e){return e.origin.name})),t.id=this.userId,this.saving=!0,this._userService.updateUserPermissions(t).subscribe((function(){e.notify.info(e.l("SavedSuccessfully")),e.saving=!1,e.close()}),(function(){e.saving=!1,e.close()}))}},{key:"close",value:function(){this.modalSave.emit(),this.visible=!1}},{key:"resetPermissions",value:function(){var e=this,n=new x.x;n.id=this.userId,this.saving=!0,this._userService.resetUserSpecificPermissions(n).subscribe({next:function(){e.notify.info(e.l("ResetSuccessfully")),e._userService.getUserPermissionsForEdit(e.userId).subscribe((function(n){e.value=n.grantedPermissionNames,e.nodes=G(n.permissions,"name","parentName","displayName")}))},complete:function(){e.close(),e.saving=!1}})}}]),t}(t("UcqP").a);ye.ctorParameters=function(){return[{type:a.F},{type:x.Lb}]},Object(i.__decorate)([Object(a.S)()],ye.prototype,"modalSave",void 0),Object(i.__decorate)([Object(a.mb)("treeSelect")],ye.prototype,"treeSelect",void 0),ye=Object(i.__decorate)([Object(a.n)({selector:"app-edit-user-permissions-modal",template:Object(i.__importDefault)(t("IEtI")).default,styles:[Object(i.__importDefault)(t("yVst")).default]})],ye);var _e=t("yk/H"),Se=t("nRu7"),ke=function e(){_classCallCheck(this,e)};ke=Object(i.__decorate)([Object(a.L)({imports:[c.a,o.g,l.a,o.o,r.c,p.a,s.a,m.a,u.a,d.a],declarations:[z.a,h.a,v,Se.a,be.a,oe,ye,K.a,X,Y,$,R,j,A,ue,de,se,le,ne.a,ee,P.a,M.a,E,U,F.a,te.a,ge.a,fe,pe,me,re,ie,w.a,I,T,C,Z.a,ze.a,he,Q,S.a,_],entryComponents:[be.a],providers:[_e.a]})],ke)},kCyd:function(e,n){e.exports='<nz-modal [nzVisible]="active" (nzOnOk)="save()" (nzOnCancel)="close()" [nzOkDisabled]="saving"\r\n  [nzCancelDisabled]="saving">\r\n  <div class="modal-dialog modal-lg">\r\n    <div class="modal-content">\r\n      <form #MoveTenantsForm="ngForm" (ngSubmit)="save()" *ngIf="active" novalidate>\r\n        <div class="modal-header">\r\n          <h5 class="modal-title">\r\n            <span>{{ "MoveTenantsOfEdition" | localize }}</span>\r\n          </h5>\r\n          <button (click)="close()" [attr.aria-label]="l(\'Close\')" class="close" type="button">\r\n            <span aria-hidden="true">&times;</span>\r\n          </button>\r\n        </div>\r\n        <div class="modal-body">\r\n          <div class="form-group">\r\n            <a [href]="appBaseUrl + \'/app/admin/tenants?editionId=\' + moveTenantsInput.sourceEditionId"\r\n              [queryParams]="{ editionId: moveTenantsInput.sourceEditionId }" [routerLink]="[\'/app/admin/tenants\']"\r\n              target="_blank">\r\n              {{ "MoveTenantsOfEditionDescription" | localize: tenantCount }}\r\n            </a>\r\n          </div>\r\n          <div class="form-group">\r\n            <label>{{ "Edition" | localize }}</label>\r\n            <nz-select [(ngModel)]="moveTenantsInput.targetEditionId" class="form-control" name="expiringEdition"\r\n              style="width: 250px" required>\r\n              <nz-option value="" [nzLabel]=" l(\'Select\') "></nz-option>\r\n              <nz-option *ngFor="let targetEdition of targetEditions" [nzValue]="targetEdition.value"\r\n                [nzLabel]="targetEdition.displayText">\r\n              </nz-option>\r\n            </nz-select>\r\n          </div>\r\n        </div>\r\n\r\n      </form>\r\n    </div>\r\n  </div>\r\n</nz-modal>'},kSEU:function(e,n,t){"use strict";t.r(n),n.default=""},nmkx:function(e,n,t){"use strict";t.r(n),n.default=""},tSos:function(e,n){e.exports='\x3c!--suppress TypeScriptUnresolvedVariable --\x3e\r\n\r\n<nz-tree [nzData]="treeData" nzCheckable nzMultiple [nzExpandAll]="true">\r\n  <ng-template #nzTreeTemplate let-node let-origin="origin">\r\n    <span class="custom-node">\r\n      <span *ngIf="!node.isLeaf">\r\n        <i nz-icon [nzType]="node.isExpanded ? \'folder-open\' : \'folder\'"></i>\r\n\r\n        <span class="folder-name">{{ node.title }}</span>\r\n        <ng-container *ngIf="node.origin.name==\'App.MaxUserCount\'">\r\n          <nz-input-number [(ngModel)]="node.origin.defaultValue"></nz-input-number>\r\n        </ng-container>\r\n      </span>\r\n      <span *ngIf="node.isLeaf">\r\n        <i nz-icon nzType="file"></i>\r\n\r\n        <span class="file-name"> {{ node.title }}</span>\r\n        <ng-container *ngIf="node.origin.name==\'App.MaxUserCount\'">\r\n          <nz-input-number [(ngModel)]="node.origin.defaultValue"></nz-input-number>\r\n        </ng-container>\r\n      </span>\r\n    </span>\r\n  </ng-template>\r\n\r\n</nz-tree>\r\n\x3c!-- <ng-template let-node pTemplate="default">\r\n    <span style="margin-right: 5px;">{{ node.label }}</span>\r\n    <input (change)="onInputChange(node)" *ngIf="node.data.inputType.name === \'SINGLE_LINE_STRING\'"\r\n      [(ngModel)]="node.value" [attr.name]="node.data.name"\r\n      type="{{ node.data.inputType.validator.name === \'NUMERIC\' ? \'number\' : \'text\' }}" />\r\n    <select (change)="onDropdownChange(node)" *ngIf="node.data.inputType.name === \'COMBOBOX\'" [(ngModel)]="node.value">\r\n      <option *ngFor="let item of node.data.inputType.itemSource.items" [value]="item.value">{{ item.displayText }}\r\n      </option>\r\n    </select>\r\n  </ng-template> --\x3e'},uY72:function(e,n){e.exports='<ng-container *ngIf="active">\r\n  <nz-modal [nzVisible]="active" [nzOkDisabled]="saving" [nzCancelDisabled]="saving" (nzOnOk)="save()"\r\n    (nzOnCancel)="close()">\r\n    <div class="modal-dialog modal-lg">\r\n      <div class="modal-content">\r\n        <form #editionForm="ngForm" (ngSubmit)="save()" novalidate>\r\n          <div class="modal-header">\r\n            <h5 class="modal-title">\r\n              <span>{{ "CreateNewEdition" | localize }}</span>\r\n            </h5>\r\n            <button (click)="close()" [attr.aria-label]="l(\'Close\')" [disabled]="saving" class="close" type="button">\r\n              <span aria-hidden="true">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div class="modal-body">\r\n            <nz-tabset>\r\n              <nz-tab nzTitle="{{ \'EditionProperties\' | localize }}">\r\n                <nz-form-item>\r\n                  <nz-form-label for="EditionDisplayName" nzRequired>{{ "EditionName" | localize }} </nz-form-label>\r\n                  <nz-form-control>\r\n                    <input nz-input #editionNameInput="ngModel" [(ngModel)]="edition.edition.displayName"\r\n                      class="form-control" id="EditionDisplayName" maxlength="64" name="EditionDisplayName" required\r\n                      type="text" />\r\n                    <validation-messages [formCtrl]="editionNameInput"></validation-messages>\r\n                  </nz-form-control>\r\n                </nz-form-item>\r\n\r\n                <label>{{ "SubscriptionPrice" | localize }}</label>\r\n                <div class="kt-radio-inline">\r\n                  <label class="kt-radio" for="EditEdition_IsFree">\r\n                    <input (ngModelChange)="resetPrices($event)" [(ngModel)]="isFree" [value]="true"\r\n                      id="EditEdition_IsFree" name="SubscriptionPrice" type="radio" />\r\n                    {{ "Free" | localize }}\r\n                    <span></span>\r\n                  </label>\r\n                  <label class="kt-radio" for="EditEdition_IsPaid">\r\n                    <input [(ngModel)]="isFree" [value]="false" id="EditEdition_IsPaid" name="SubscriptionPrice"\r\n                      type="radio" />\r\n                    {{ "Paid" | localize }}\r\n                    <span></span>\r\n                  </label>\r\n                </div>\r\n                <div *ngIf="!isFree" class="row">\r\n                  <div class="col-md-6">\r\n                    <div class="form-group">\r\n                      <label for="DailyPrice">{{ "DailyPrice" | localize }}</label>\r\n                      <div class="input-group">\r\n                        <div class="input-group-prepend">\r\n                          <span class="input-group-text">{{ appSession.application.currencySign }}</span>\r\n                        </div>\r\n                        \x3c!-- <input #dailyPriceInput="ngModel" [(ngModel)]="edition.edition.dailyPrice"\r\n                          [ngClass]="{ edited: edition.edition.dailyPrice }" [required]="!isFree"\r\n                          [textMask]="{ mask: currencyMask }" autocomplete="off" class="form-control" id="DailyPrice"\r\n                          name="DailyPrice" type="text" /> --\x3e\r\n                      </div>\r\n                      \x3c!-- <validation-messages [formCtrl]="dailyPriceInput"></validation-messages> --\x3e\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-md-6">\r\n                    <div class="form-group">\r\n                      <label for="WeeklyPrice">{{ "WeeklyPrice" | localize }}</label>\r\n                      <div class="input-group">\r\n                        <div class="input-group-prepend">\r\n                          <span class="input-group-text">{{ appSession.application.currencySign }}</span>\r\n                        </div>\r\n                        \x3c!-- <input #weeklyPriceInput="ngModel" [(ngModel)]="edition.edition.weeklyPrice"\r\n                          [ngClass]="{ edited: edition.edition.weeklyPrice }" [required]="!isFree"\r\n                          [textMask]="{ mask: currencyMask }" autocomplete="off" class="form-control" id="WeeklyPrice"\r\n                          name="WeeklyPrice" type="text" /> --\x3e\r\n                      </div>\r\n                      \x3c!-- <validation-messages [formCtrl]="weeklyPriceInput"></validation-messages> --\x3e\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class="col-md-6">\r\n                    <div class="form-group">\r\n                      <label for="MonthlyPrice">{{ "MonthlyPrice" | localize }}</label>\r\n                      <div class="input-group">\r\n                        <div class="input-group-prepend">\r\n                          <span class="input-group-text">{{ appSession.application.currencySign }}</span>\r\n                        </div>\r\n                        \x3c!-- <input #monthlyPriceInput="ngModel" [(ngModel)]="edition.edition.monthlyPrice"\r\n                          [ngClass]="{ edited: edition.edition.monthlyPrice }" [required]="!isFree"\r\n                          [textMask]="{ mask: currencyMask }" autocomplete="off" class="form-control" id="MonthlyPrice"\r\n                          name="MonthlyPrice" type="text" /> --\x3e\r\n                      </div>\r\n                      \x3c!-- <validation-messages [formCtrl]="monthlyPriceInput"></validation-messages> --\x3e\r\n                    </div>\r\n                  </div>\r\n                  <div class="col-md-6">\r\n                    <div class="form-group">\r\n                      <label for="AnnualPrice">{{ "AnnualPrice" | localize }}</label>\r\n                      <div class="input-group">\r\n                        <div class="input-group-prepend">\r\n                          <span class="input-group-text">{{ appSession.application.currencySign }}</span>\r\n                        </div>\r\n                        \x3c!-- <input #annualPriceInput="ngModel" [(ngModel)]="edition.edition.annualPrice"\r\n                          [ngClass]="{ edited: edition.edition.annualPrice }" [required]="!isFree"\r\n                          [textMask]="{ mask: currencyMask }" autocomplete="off" class="form-control" id="AnnualPrice"\r\n                          name="AnnualPrice" type="text" /> --\x3e\r\n                      </div>\r\n                      \x3c!-- <validation-messages [formCtrl]="annualPriceInput"></validation-messages> --\x3e\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div [hidden]="isFree" class="paid-features">\r\n                  <div class="kt-checkbox-list">\r\n                    <label class="kt-checkbox" for="EditEdition_IsTrialActive">\r\n                      <input [(ngModel)]="isTrialActive" id="EditEdition_IsTrialActive" name="isTrialActive"\r\n                        type="checkbox" />\r\n                      {{ "IsTrialActive" | localize }}\r\n                      <span></span>\r\n                    </label>\r\n                  </div>\r\n                  <div *ngIf="isTrialActive" class="form-group trial-day-count">\r\n                    <label for="TrialDayCount">{{ "TrialDayCount" | localize }}</label>\r\n                    <input #trialDayCountInput="ngModel" [(ngModel)]="edition.edition.trialDayCount"\r\n                      [ngClass]="{ edited: edition.edition.trialDayCount }" [required]="isTrialActive"\r\n                      class="form-control" id="TrialDayCount" name="TrialDayCount" type="number" />\r\n                    <validation-messages [formCtrl]="trialDayCountInput"></validation-messages>\r\n                  </div>\r\n                  <div class="kt-checkbox-list">\r\n                    <label class="kt-checkbox" for="EditEdition_IsWaitingDayActive">\r\n                      <input [(ngModel)]="isWaitingDayActive" id="EditEdition_IsWaitingDayActive"\r\n                        name="IsWaitingDayActive" type="checkbox" />\r\n                      {{ "WaitAfterSubscriptionExpireDate" | localize }}\r\n                      <span></span>\r\n                    </label>\r\n                  </div>\r\n                  <div *ngIf="isWaitingDayActive" class="form-group waiting-day-after-expire">\r\n                    <label for="WaitingDayAfterExpire">{{ "WaitingDayAfterExpire" | localize }}</label>\r\n                    <input #waitingDayAfterExpireInput="ngModel" [(ngModel)]="edition.edition.waitingDayAfterExpire"\r\n                      [ngClass]="{ edited: edition.edition.waitingDayAfterExpire }" [required]="isWaitingDayActive"\r\n                      class="form-control" id="WaitingDayAfterExpire" name="WaitingDayAfterExpire" type="number" />\r\n                    <validation-messages [formCtrl]="waitingDayAfterExpireInput"></validation-messages>\r\n                  </div>\r\n                  <label>{{ "WhatWillDoneAfterSubscriptionExpiry" | localize }}</label>\r\n                  <div class="kt-radio-inline">\r\n                    <label class="kt-radio" for="EditEdition_ExpireAction_DeactiveUser">\r\n                      <input (ngModelChange)="removeExpiringEdition($event)" [(ngModel)]="expireAction"\r\n                        [value]="expireActionEnum.DeactiveTenant" id="EditEdition_ExpireAction_DeactiveUser"\r\n                        name="ExpireAction" type="radio" />\r\n                      {{ "DeactiveTenant" | localize }}\r\n                      <span></span>\r\n                    </label>\r\n                    <label class="kt-radio" for="EditEdition_ExpireAction_AssignEdition">\r\n                      <input [(ngModel)]="expireAction" [value]="expireActionEnum.AssignToAnotherEdition"\r\n                        id="EditEdition_ExpireAction_AssignEdition" name="ExpireAction" type="radio" />\r\n                      {{ "AssignToAnotherEdition" | localize }}\r\n                      <span></span>\r\n                    </label>\r\n                  </div>\r\n                  <div *ngIf="expireAction == expireActionEnum.AssignToAnotherEdition" class="form-group edition-list">\r\n                    <nz-select [(ngModel)]="edition.edition.expiringEditionId"\r\n                      [attr.min]="expireAction == expireActionEnum.AssignToAnotherEdition ? 1 : 0" class="form-control"\r\n                      name="expiringEdition">\r\n                      <nz-option *ngFor="let expiringEdition of expiringEditions" [nzValue]="expiringEdition.value"\r\n                        [nzLabel]="expiringEdition.displayText ">\r\n                      </nz-option>\r\n                    </nz-select>\r\n                  </div>\r\n                </div>\r\n              </nz-tab>\r\n              <nz-tab nzTitle="{{ \'Features\' | localize }}">\r\n                <feature-tree #featureTree></feature-tree>\r\n              </nz-tab>\r\n            </nz-tabset>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </nz-modal>\r\n</ng-container>'},yVst:function(e,n,t){"use strict";t.r(n),n.default=""},zq8w:function(e,n){e.exports='\x3c!--suppress TypeScriptUnresolvedVariable --\x3e\r\n<div nz-row>\r\n    <div nz-col nzSpan="18">\r\n        <nz-input-group [nzAddOnAfter]="suffixIconButton" nzSearch>\r\n            <input type="text" nz-input [placeholder]="l(\'Search\')" />\r\n            <ng-template #suffixIconButton>\r\n                <button nz-button nzType="primary" (click)="getOrganizationUnitUsers()" nzSearch><i nz-icon\r\n                        nzType="search"></i></button>\r\n            </ng-template>\r\n        </nz-input-group>\r\n\r\n\r\n    </div>\r\n    <div nz-col nzSpan="6">\r\n        \x3c!-- Todo: --\x3e\r\n        <a nz-button nzType="link"\r\n            *ngIf="(\'Pages.Administration.OrganizationUnits.ManageMembers\' | permission) && organizationUnit"\r\n            (click)="addMemberModal.shown()"><i nz-icon nzType="plus"></i>{{l(\'AddMember\')}}</a>\r\n        <a nz-button nzType="link" (click)="removeMemberBat()"> <i nz-icon nzType="delete"></i> {{l(\'Remove\')}} </a>\r\n    </div>\r\n</div>\r\n<div nz-row>\r\n    <nz-alert style="width: 100%;padding-top:20px;padding-bottom: 20px;" nzType="info"\r\n        [nzMessage]="\'\u5df2\u9009\u62e9\'+getSelectedItems()+\'\u6761\'" nzShowIcon>\r\n    </nz-alert>\r\n    \x3c!-- <div class="col-12"> --\x3e\r\n    <st style="width: 100%;" [widthMode]="\'default\'" [data]="dataList" [columns]="columns" [loading]="loading"\r\n        [page]="{pageNumber:pageNumber,show:show,totalItems:totalItems,totalPages:totalPages}"></st>\r\n    \x3c!-- <div id="OuMembersTable"> --\x3e\r\n\r\n    \x3c!--<Primeng-TurboTable-Start>--\x3e\r\n    \x3c!-- <div [hidden]="!organizationUnit" class="primeng-datatable-container"> --\x3e\r\n    \x3c!-- <p-table #dataTable (onLazyLoad)="getOrganizationUnitUsers($event)" [lazy]="true" [paginator]="false"\r\n                    [responsive]="primengTableHelper.isResponsive" [value]="primengTableHelper.records"\r\n                    rows="{{ primengTableHelper.defaultRecordsCountPerPage }}">\r\n                    <ng-template pTemplate="header">\r\n                        <tr>\r\n                            <th [hidden]="!(\'Pages.Administration.OrganizationUnits.ManageMembers\' | permission)"\r\n                                style="width: 15%">{{ "Delete" | localize }}</th>\r\n                            <th pSortableColumn="userName">\r\n                                {{ "UserName" | localize }}\r\n                                \x3c!-- <p-sortIcon field="userName"></p-sortIcon> --\r\n                            </th>\r\n                            <th pSortableColumn="addedTime">\r\n                                {{ "AddedTime" | localize }}\r\n                                \x3c!-- <p-sortIcon field="addedTime"></p-sortIcon> --\r\n                            </th>\r\n                        </tr>\r\n                    </ng-template>\r\n                    <ng-template let-record="$implicit" pTemplate="body">\r\n                        <tr>\r\n                            <td [hidden]="!(\'Pages.Administration.OrganizationUnits.ManageMembers\' | permission)">\r\n                                <button (click)="removeMember(record)" class="btn btn-outline-danger btn-icon"\r\n                                    title="{{ \'Delete\' | localize }}">\r\n                                    <i [attr.aria-label]="l(\'Delete\')" class="fa fa-times"></i>\r\n                                </button>\r\n                            </td>\r\n                            <td>\r\n                                <span class="ui-column-title">{{ "UserName" | localize }}</span>\r\n                                {{ record.userName }}\r\n                            </td>\r\n                            <td>\r\n                                <span class="ui-column-title">{{ "AddedTime" | localize }}</span>\r\n                                {{ record.addedTime | momentFormat: "L" }}\r\n                            </td>\r\n                        </tr>\r\n                    </ng-template>\r\n                </p-table> --\x3e\r\n    \x3c!-- <div *ngIf="data.length == 0" class="primeng-no-data">\r\n                    {{ l("NoData")  }}\r\n                </div>\r\n                <div class="primeng-paging-container">\r\n                    \x3c!-- <p-paginator #paginator (onPageChange)="getOrganizationUnitUsers($event)"\r\n                        [rowsPerPageOptions]="primengTableHelper.predefinedRecordsCountPerPage"\r\n                        [rows]="primengTableHelper.defaultRecordsCountPerPage"\r\n                        [totalRecords]="primengTableHelper.totalRecordsCount">\r\n                    </p-paginator> --\r\n                    <span class="total-records-count">\r\n                        {{ l("TotalRecordsCount") }}\r\n                    </span>\r\n                </div>\r\n            </div> --\x3e\r\n    \x3c!--<Primeng-TurboTable-End>--\x3e\r\n    \x3c!-- </div> --\x3e\r\n    \x3c!-- </div> --\x3e\r\n</div>\r\n\r\n<div *ngIf="!organizationUnit" class="text-muted">\r\n    {{ "SelectAnOrganizationUnitToSeeMembers" | localize }}\r\n</div>\r\n\r\n<addMemberModal #addMemberModal (membersAdded)="addMembers($event)"></addMemberModal>'}}]);