function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{ES3k:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("dEAy"),r=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).title="",r.nzModalRef=e.get(i.c),r}return _createClass(n,[{key:"close",value:function(e){this.nzModalRef.close()}},{key:"success",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?this.nzModalRef.close(e):this.close()}}]),n}(n("UcqP").a)},FCZ4:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c}));var i=n("R0Ic");function r(){return Object(i.l)("routerTransition",[Object(i.i)("void",Object(i.j)({"padding-top":"20px",opacity:"0"})),Object(i.i)("*",Object(i.j)({"padding-top":"0px",opacity:"1"})),Object(i.k)(":enter",[Object(i.e)("0.33s ease-out",Object(i.j)({opacity:"1","padding-top":"0px"}))])])}function c(){return Object(i.l)("routerTransition",[Object(i.i)("void",Object(i.j)({"margin-top":"-10px",opacity:"0"})),Object(i.i)("*",Object(i.j)({"margin-top":"0px",opacity:"1"})),Object(i.k)(":enter",[Object(i.e)("0.2s ease-out",Object(i.j)({opacity:"1","margin-top":"0px"}))])])}},sXTw:function(e,t,n){"use strict";n.r(t),n.d(t,"AccountModule",(function(){return _t}));var i,r=n("3Pt+"),c=n("ofXK"),a=n("yjp6"),o=n("YirH"),s=n("yc4G"),d=n("PCNd"),l=n("pmn7"),u=n("tyNb"),p=n("M0ag"),g=n("UcqP"),m=n("LvDl"),f=n.n(m),h=n("wd/R"),v=n.n(h),b=n("fXoL"),_=n("yArM"),y=n("1M2P"),k=n("C2AL"),w=n("FwiY"),z=n("ES3k"),S=n("KALY"),x=n("nYR2"),C=n("ocnv"),K=n("B+r4"),T=n("EGpF"),J=n("PTRe"),I=n("OzZK"),P=n("RwU8"),M=n("kPyj"),A=((i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this,e))._accountServie=i,r.tenancyName="",r.beforeTenancyName="",r.saving=!1,r.tenancyNameBuffer="",r.isSwitchToTenant=!1,r.submitButtonText="",r}return _createClass(n,[{key:"ngOnInit",value:function(){var e;this.isSwitchToTenant=!!(null===(e=this.appSession)||void 0===e?void 0:e.tenant),this.beforeTenancyName=this.tenancyName}},{key:"switchToTenant",value:function(e){e.target.checked?this.tenancyName=this.tenancyNameBuffer:(this.tenancyNameBuffer=this.tenancyName,this.tenancyName=""),this.updateSubmitButtonText()}},{key:"updateSubmitButtonText",value:function(){this.submitButtonText=this.l(this.isSwitchToTenant?"SwitchToTheTenant":"SwitchToTheHost")}},{key:"handleChange",value:function(){var e=this;if(this.saving=!0,this.isSwitchToTenant||(this.tenancyName=void 0),this.tenancyName!==this.beforeTenancyName){if(!this.tenancyName||""===this.tenancyName)return abp.multiTenancy.setTenantIdCookie(void 0),this.close(),void location.reload();var t=new S.J;t.tenancyName=this.tenancyName,this._accountServie.isTenantAvailable(t).pipe(Object(x.a)((function(){e.saving=!1}))).subscribe((function(t){switch(t.state){case S.qb.Available:abp.multiTenancy.setTenantIdCookie(t.tenantId),e.success();break;case S.qb.InActive:e.message.warn(e.l("TenantIsNotActive",e.tenancyName));break;case S.qb.NotFound:e.message.warn(e.l("ThereIsNoTenantDefinedWithName{0}",e.tenancyName))}}))}else this.close()}}]),n}(z.a)).\u0275fac=function(e){return new(e||i)(b.Ec(b.x),b.Ec(S.b))},i.\u0275cmp=b.yc({type:i,selectors:[["app-tenant-change-modal"]],inputs:{tenancyName:"tenancyName"},features:[b.lc],decls:31,vars:22,consts:[["nz-form","",3,"ngSubmit"],["changeTenantForm","ngForm"],[1,"modal-header"],[1,"modal-title"],[1,"anticon","anticon-home"],[1,"col"],[1,"kt-switch","kt-switch--icon"],["checked","checked","name","SwitchToTenant","type","checkbox",3,"ngModel","nzCheckedChildren","nzUnCheckedChildren","change","ngModelChange"],["nz-row",""],["nz-col","","nzFor","TenancyName",3,"nzSm"],["nz-col","",3,"nzSm"],["nzPrefixIcon","anticon anticon-home"],["nz-input","","name","TenancyName","type","text",3,"ngModel","placeholder","disabled","ngModelChange"],[1,"text-sm","text-grey"],[1,"modal-footer"],["nz-button","","type","button",3,"nzType","disabled","click"],[1,"anticon","anticon-close-circle-o"],["nz-button","","type","submit",3,"nzType","disabled","nzLoading"],[1,"anticon","anticon-save"]],template:function(e,t){if(1&e&&(b.Kc(0,"form",0,1),b.Sc("ngSubmit",(function(){return t.handleChange()})),b.Kc(2,"div",2),b.Kc(3,"div",3),b.Fc(4,"i",4),b.zd(5),b.Jc(),b.Jc(),b.Kc(6,"fieldset"),b.Kc(7,"nz-form-item"),b.Kc(8,"nz-form-label"),b.zd(9),b.Wc(10,"localize"),b.Jc(),b.Kc(11,"nz-form-control"),b.Kc(12,"div",5),b.Kc(13,"span",6),b.Kc(14,"label"),b.Kc(15,"nz-switch",7),b.Sc("change",(function(e){return t.switchToTenant(e)}))("ngModelChange",(function(e){return t.isSwitchToTenant=e})),b.Jc(),b.Jc(),b.Jc(),b.Jc(),b.Jc(),b.Jc(),b.Kc(16,"nz-form-item",8),b.Kc(17,"nz-form-label",9),b.zd(18),b.Jc(),b.Kc(19,"nz-form-control",10),b.Kc(20,"nz-input-group",11),b.Kc(21,"input",12),b.Sc("ngModelChange",(function(e){return t.tenancyName=e})),b.Jc(),b.Jc(),b.Kc(22,"span",13),b.zd(23),b.Jc(),b.Jc(),b.Jc(),b.Jc(),b.Kc(24,"div",14),b.Kc(25,"button",15),b.Sc("click",(function(){return t.close()})),b.Fc(26,"i",16),b.zd(27),b.Jc(),b.Kc(28,"button",17),b.Fc(29,"i",18),b.zd(30),b.Jc(),b.Jc(),b.Jc()),2&e){var n=b.nd(1);b.oc(5),b.Bd(" ",t.l("ChangeTenant")," "),b.oc(4),b.Ad(b.Xc(10,20,"SwitchToTenant")),b.oc(6),b.dd("ngModel",t.isSwitchToTenant)("nzCheckedChildren",t.l("Yes"))("nzUnCheckedChildren",t.l("No")),b.oc(2),b.dd("nzSm",4),b.oc(1),b.Bd(" ",t.l("TenancyName")," "),b.oc(1),b.dd("nzSm",20),b.oc(2),b.dd("ngModel",t.tenancyName)("placeholder",t.l("TenancyName"))("disabled",!t.isSwitchToTenant),b.oc(2),b.Ad(t.l("LeaveEmptyToSwitchToHost")),b.oc(2),b.dd("nzType","default")("disabled",t.saving),b.oc(2),b.Bd(" ",t.l("Cancel")," "),b.oc(1),b.dd("nzType","primary")("disabled",!n.form.valid)("disabled",t.saving)("nzLoading",t.saving),b.oc(2),b.Bd(" ",t.l("Save")," ")}},directives:[r.v,r.n,r.o,C.b,K.c,C.c,K.a,C.d,C.a,T.a,r.m,r.p,J.c,J.b,r.c,I.a,P.a,k.a],pipes:[M.a],encapsulation:2}),i);function q(e,t){if(1&e&&(b.Kc(0,"span",4),b.Kc(1,"strong"),b.zd(2),b.Jc(),b.Jc()),2&e){var n=b.Vc(2);b.ed("title",n.name),b.oc(2),b.Ad(n.tenancyName)}}function F(e,t){1&e&&(b.Kc(0,"span"),b.zd(1),b.Wc(2,"localize"),b.Jc()),2&e&&(b.oc(1),b.Ad(b.Xc(2,1,"NotSelected")))}function R(e,t){if(1&e){var n=b.Lc();b.Kc(0,"div"),b.Kc(1,"div",1),b.Kc(2,"span"),b.zd(3),b.Wc(4,"localize"),b.xd(5,q,3,2,"span",2),b.xd(6,F,3,3,"span",0),b.zd(7,"("),b.Kc(8,"a",3),b.Sc("click",(function(){return b.pd(n),b.Vc().showChangeModal()})),b.zd(9),b.Wc(10,"localize"),b.Jc(),b.zd(11,") "),b.Jc(),b.Jc(),b.Jc()}if(2&e){var i=b.Vc();b.oc(3),b.Bd(" ",b.Xc(4,4,"CurrentTenant"),": "),b.oc(2),b.dd("ngIf",i.tenancyName),b.oc(1),b.dd("ngIf",!i.tenancyName),b.oc(3),b.Ad(b.Xc(10,6,"Change"))}}var O,N=((O=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"ngOnInit",value:function(){var e;(null===(e=this.appSession)||void 0===e?void 0:e.tenant)&&(this.tenancyName=this.appSession.tenant.tenancyName,this.name=this.appSession.tenant.name)}},{key:"showChangeModal",value:function(){this.modalHelper.open(A,{tenancyName:this.tenancyName},"md").subscribe((function(e){e&&window.location.reload()}))}},{key:"isMultiTenancyEnabled",get:function(){return abp.multiTenancy.isEnabled}}]),n}(g.a)).\u0275fac=function(e){return new(e||O)(b.Ec(b.x))},O.\u0275cmp=b.yc({type:O,selectors:[["app-tenant-change"]],features:[b.lc],decls:1,vars:1,consts:[[4,"ngIf"],[1,"body","text-center"],[3,"title",4,"ngIf"],["href","javascript:;",3,"click"],[3,"title"]],template:function(e,t){1&e&&b.xd(0,R,12,8,"div",0),2&e&&b.dd("ngIf",t.isMultiTenancyEnabled)},directives:[c.m],pipes:[M.a],encapsulation:2}),O);function E(e,t){1&e&&(b.Kc(0,"div"),b.Fc(1,"app-tenant-change"),b.Jc())}var L,B,U,W,X,j=((L=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this,e))._router=i,r.links=[{title:"\u5e2e\u52a9",href:""},{title:"\u9690\u79c1",href:""},{title:"\u6761\u6b3e",href:""}],r.currentYear=v()().year(),r.remoteServiceBaseUrl=p.a.remoteServiceBaseUrl,r.tenantChangeDisabledRoutes=["select-edition","buy","upgrade","extend","register-tenant","stripe-purchase","stripe-subscribe","stripe-update-subscription","paypal-purchase","stripe-payment-result","payment-completed","stripe-cancel-payment"],r}return _createClass(n,[{key:"ngOnInit",value:function(){}},{key:"showTenantChange",value:function(){var e=this;return!!this._router.url&&!f.a.filter(this.tenantChangeDisabledRoutes,(function(t){return e._router.url.indexOf("/account/"+t)>=0})).length&&abp.multiTenancy.isEnabled&&!n.supportsTenancyNameInUrl()}}],[{key:"supportsTenancyNameInUrl",value:function(){return p.a.appBaseUrlFormat&&p.a.appBaseUrlFormat.indexOf(p.a.tenancyNamePlaceHolderInUrl)>=0}}]),n}(g.a)).\u0275fac=function(e){return new(e||L)(b.Ec(b.x),b.Ec(u.k))},L.\u0275cmp=b.yc({type:L,selectors:[["app-account"]],features:[b.lc],decls:19,vars:2,consts:[[1,"container"],["btnClass","",1,"langs"],[1,"wrap"],[1,"top"],[1,"head"],["src","./assets/logo-color.svg",1,"logo"],[1,"title"],[1,"desc"],[4,"ngIf"],[3,"links"],["nz-icon","","nzType","copyright"],["href","//github.com/cipchk","target","_blank"]],template:function(e,t){1&e&&(b.Kc(0,"div",0),b.Fc(1,"pro-langs",1),b.Kc(2,"div",2),b.Kc(3,"div",3),b.Kc(4,"div",4),b.Fc(5,"img",5),b.Kc(6,"span",6),b.zd(7,"ng-alain pro"),b.Jc(),b.Jc(),b.Kc(8,"div",7),b.zd(9,"\u6b66\u6797\u4e2d\u6700\u6709\u5f71\u54cd\u529b\u7684\u300a\u8475\u82b1\u5b9d\u5178\u300b\uff1b\u6b32\u7ec3\u795e\u529f\uff0c\u6325\u5200\u81ea\u5bab"),b.Jc(),b.Jc(),b.xd(10,E,2,0,"div",8),b.Fc(11,"router-outlet"),b.Kc(12,"global-footer",9),b.zd(13," Copyright "),b.Fc(14,"i",10),b.zd(15," 2018 "),b.Kc(16,"a",11),b.zd(17,"\u5361\u8272"),b.Jc(),b.zd(18," \u51fa\u54c1 "),b.Jc(),b.Jc(),b.Jc()),2&e&&(b.oc(10),b.dd("ngIf",t.showTenantChange()),b.oc(2),b.dd("links",t.links))},directives:[_.a,c.m,u.o,y.a,k.a,w.a,N],styles:["[_nghost-%COMP%]     .container{display:flex;flex-direction:column;min-height:100%;background:#f0f2f5}[_nghost-%COMP%]     .langs{width:100%;height:40px;line-height:44px;text-align:right}[_nghost-%COMP%]     .langs .ant-dropdown-trigger{display:inline-block}[_nghost-%COMP%]     .langs .anticon{margin-top:24px;margin-right:24px;font-size:14px;vertical-align:top;cursor:pointer}[_nghost-%COMP%]     .wrap{flex:1;padding:32px 0}[_nghost-%COMP%]     .ant-form-item{margin-bottom:24px}@media (min-width:768px){[_nghost-%COMP%]     .container{background-image:url(https://gw.alipayobjects.com/zos/rmsportal/TVYTbAXWheQpRcWDaDMu.svg);background-repeat:no-repeat;background-position:center 110px;background-size:100%}[_nghost-%COMP%]     .wrap{padding:32px 0 24px}}[_nghost-%COMP%]     .top{text-align:center}[_nghost-%COMP%]     .header{height:44px;line-height:44px}[_nghost-%COMP%]     .header a{text-decoration:none}[_nghost-%COMP%]     .logo{height:44px;margin-right:16px}[_nghost-%COMP%]     .title{position:relative;color:rgba(0,0,0,.85);font-weight:600;font-size:33px;font-family:Myriad Pro,Helvetica Neue,Arial,Helvetica,sans-serif;vertical-align:middle}[_nghost-%COMP%]     .desc{margin-top:12px;margin-bottom:40px;color:rgba(0,0,0,.45);font-size:14px}"]}),L),V=n("UtOw"),D=n("Qj9z"),H=((B=function(){function e(t,n,i){_classCallCheck(this,e),this._permissionChecker=t,this._router=n,this._sessionService=i}return _createClass(e,[{key:"canActivate",value:function(e,t){return!(!e.queryParams.ss||"true"!==e.queryParams.ss)||!this._sessionService.user||(this._router.navigate([this.selectBestRoute()]),!1)}},{key:"selectBestRoute",value:function(){return this._permissionChecker.isGranted("Pages.Administration.Host.Dashboard")?"/app/admin/hostDashboard":this._permissionChecker.isGranted("Pages.Tenant.Dashboard")?"/app/main/dashboard":"/app/notifications"}}]),e}()).\u0275fac=function(e){return new(e||B)(b.Oc(V.a),b.Oc(u.k),b.Oc(D.a))},B.\u0275prov=b.Ac({token:B,factory:B.\u0275fac}),B),Y=n("x2O3"),$=n("kgQi"),G=((U=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var c;return _classCallCheck(this,n),(c=t.call(this,e))._accountService=i,c._router=r,c.model=new S.db,c.saving=!1,c}return _createClass(n,[{key:"save",value:function(){var e=this;this.saving=!0,this._accountService.sendEmailActivationLink(this.model).pipe(Object(x.a)((function(){e.saving=!1}))).subscribe((function(){e.message.success(e.l("ActivationMailSentMessage"),e.l("MailSent")).then((function(){e._router.navigate(["account/login"])}))}))}}]),n}(Y.a)).\u0275fac=function(e){return new(e||U)(b.Ec(b.x),b.Ec(S.b),b.Ec(u.k))},U.\u0275cmp=b.yc({type:U,selectors:[["app-email-activation"]],features:[b.lc],decls:24,vars:21,consts:[[1,"kt-login__form",2,"display","flex","justify-content","center"],[1,"kt-login__title",2,"width","400px"],[2,"text-align","center"],["method","post","novalidate","",1,"kt-form",3,"ngSubmit"],["emailActivationForm","ngForm"],[1,"form-group"],["nz-input","","autocomplete","off","email","","maxlength","256","name","emailAddress","required","","type","email",1,"form-control","form-control-solid","placeholder-no-fix","input-ltr",3,"ngModel","placeholder","ngModelChange"],["emailAddressInput","ngModel"],[3,"formCtrl"],[1,"kt-login__actions",2,"display","flex","justify-content","space-between","margin-top","50px"],["nz-button","","routerLink","/account/login","type","button",1,"btn","btn-light","btn-elevate","kt-login__btn-secondary",3,"disabled"],[1,"fa","fa-arrow-left"],["nz-button","","type","submit",1,"btn","btn-primary","btn-elevate","kt-login__btn-primary",3,"nzLoading","disabled"],[1,"fa","fa-check"]],template:function(e,t){if(1&e&&(b.Kc(0,"div",0),b.Kc(1,"div",1),b.Kc(2,"h3",2),b.zd(3),b.Wc(4,"localize"),b.Jc(),b.Kc(5,"form",3,4),b.Sc("ngSubmit",(function(){return t.save()})),b.Kc(7,"p",2),b.zd(8),b.Wc(9,"localize"),b.Jc(),b.Kc(10,"div",5),b.Kc(11,"input",6,7),b.Sc("ngModelChange",(function(e){return t.model.emailAddress=e})),b.Wc(13,"localize"),b.Jc(),b.Fc(14,"validation-messages",8),b.Jc(),b.Kc(15,"div",9),b.Kc(16,"button",10),b.Fc(17,"i",11),b.zd(18),b.Wc(19,"localize"),b.Jc(),b.Kc(20,"button",12),b.Fc(21,"i",13),b.zd(22),b.Wc(23,"localize"),b.Jc(),b.Jc(),b.Jc(),b.Jc(),b.Jc()),2&e){var n=b.nd(6),i=b.nd(12);b.dd("@routerTransition",void 0),b.oc(3),b.Bd(" ",b.Xc(4,11,"EmailActivation")," "),b.oc(5),b.Bd(" ",b.Xc(9,13,"SendEmailActivationLink_Information")," "),b.oc(3),b.fd("placeholder","",b.Xc(13,15,"EmailAddress")," *"),b.dd("ngModel",t.model.emailAddress),b.oc(3),b.dd("formCtrl",i),b.oc(2),b.dd("disabled",t.saving),b.oc(2),b.Bd(" ",b.Xc(19,17,"Back")," "),b.oc(2),b.dd("nzLoading",t.saving)("disabled",!n.form.valid),b.oc(2),b.Bd(" ",b.Xc(23,19,"Submit")," ")}},directives:[r.v,r.n,r.o,J.b,r.c,r.d,r.h,r.u,r.m,r.p,$.a,I.a,P.a,k.a,u.l],pipes:[M.a],encapsulation:2}),U),Z=n("nS6G"),Q=n("Tr3h"),ee=n("ep+e"),te=n("wlJd"),ne=n("w3U3"),ie=n("zvtx"),re=((X=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).initialized=!1,i.name=e.name,i.clientId=e.clientId,i.additionalParams=e.additionalParams,i.icon=e.name.toLowerCase(),i}return n}(S.z)).FACEBOOK="Facebook",X.GOOGLE="Google",X.MICROSOFT="Microsoft",X.OPENID="OpenIdConnect",X.WSFEDERATION="WsFederation",X),ce=((W=function(){function e(t,n,i,r,c,a){_classCallCheck(this,e),this._tokenAuthService=t,this._router=n,this._utilsService=i,this._messageService=r,this._tokenService=c,this._logService=a,this.externalLoginProviders=[],this.clear()}return _createClass(e,[{key:"authenticate",value:function(t,n,i){var r=this;t=t||function(){},this.authenticateModel.twoFactorRememberClientToken=this._utilsService.getCookieValue(e.twoFactorRememberClientTokenName),this.authenticateModel.singleSignIn=Q.a.getSingleSignIn(),this.authenticateModel.returnUrl=Q.a.getReturnUrl(),this.authenticateModel.captchaResponse=i,this._tokenAuthService.authenticate(this.authenticateModel).subscribe({next:function(e){r.processAuthenticateResult(e,n),t()},error:function(e){t()}})}},{key:"init",value:function(){this.initExternalLoginProviders()}},{key:"wsFederationLoginStatusChangeCallback",value:function(e,t,n,i){var r=this,c=this.wsFederationAuthenticationContext.getCachedUser(),a=new S.y;a.authProvider=re.WSFEDERATION,a.providerAccessCode=t,a.providerKey=c.profile.sub,a.singleSignIn=Q.a.getSingleSignIn(),a.returnUrl=Q.a.getReturnUrl(),this._tokenAuthService.externalAuthenticate(a).subscribe((function(e){if(e.waitingForActivation)return r._messageService.info("You have successfully registered. Waiting for activation!"),void r._router.navigate(["account/login"]);r.login(e.accessToken,e.encryptedAccessToken,e.expireInSeconds,e.refreshToken,e.refreshTokenExpireInSeconds,!1,"",e.returnUrl)}))}},{key:"processAuthenticateResult",value:function(e,t){this.authenticateResult=e,e.shouldResetPassword?(this._router.navigate(["account/reset-password"],{queryParams:{userId:e.userId,tenantId:abp.session.tenantId,resetCode:e.passwordResetCode}}),this.clear()):e.requiresTwoFactorVerification?this._router.navigate(["account/send-code"]):e.accessToken?(e.returnUrl&&!t&&(t=e.returnUrl),this.login(e.accessToken,e.encryptedAccessToken,e.expireInSeconds,e.refreshToken,e.refreshTokenExpireInSeconds,this.rememberMe,e.twoFactorRememberClientToken,t)):(this._logService.warn("Unexpected authenticateResult!"),this._router.navigate(["account/login"]))}},{key:"login",value:function(t,n,i,r,c,a,o,s){var d=a?new Date((new Date).getTime()+1e3*i):void 0;if(this._tokenService.setToken(t,d),r&&a){var l=a?new Date((new Date).getTime()+1e3*c):void 0;this._tokenService.setRefreshToken(r,l)}if(this._utilsService.setCookieValue(Z.a.authorization.encryptedAuthTokenName,n,d,abp.appPath),o&&this._utilsService.setCookieValue(e.twoFactorRememberClientTokenName,o,new Date((new Date).getTime()+31536e6),abp.appPath),s)location.href=s;else{var u=Q.a.initialUrl;u.indexOf("/account")>0&&(u=Z.a.appBaseUrl),location.href=u}}},{key:"clear",value:function(){this.authenticateModel=new S.e,this.authenticateModel.rememberClient=!1,this.authenticateResult=null,this.rememberMe=!1}},{key:"initExternalLoginProviders",value:function(e){var t=this;this._tokenAuthService.getExternalAuthenticationProviders().subscribe((function(n){t.externalLoginProviders=m.map(n,(function(e){return new re(e)})),e&&e()}))}},{key:"getWsFederationConnectConfig",value:function(e){var t={clientId:e.clientId,popUp:!0,callback:this.wsFederationLoginStatusChangeCallback.bind(this)};return e.additionalParams.Tenant&&(t.tenant=e.additionalParams.Tenant),t}},{key:"facebookLoginStatusChangeCallback",value:function(e){var t=this;if("connected"===e.status){var n=new S.y;n.authProvider=re.FACEBOOK,n.providerAccessCode=e.authResponse.accessToken,n.providerKey=e.authResponse.userID,n.singleSignIn=Q.a.getSingleSignIn(),n.returnUrl=Q.a.getReturnUrl(),this._tokenAuthService.externalAuthenticate(n).subscribe((function(e){e.waitingForActivation?t._messageService.info("You have successfully registered. Waiting for activation!"):t.login(e.accessToken,e.encryptedAccessToken,e.expireInSeconds,e.refreshToken,e.refreshTokenExpireInSeconds,!1,"",e.returnUrl)}))}}},{key:"googleLoginStatusChangeCallback",value:function(e){var t=this;if(e){var n=new S.y;n.authProvider=re.GOOGLE,n.providerAccessCode=gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().access_token,n.providerKey=gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile().getId(),n.singleSignIn=Q.a.getSingleSignIn(),n.returnUrl=Q.a.getReturnUrl(),this._tokenAuthService.externalAuthenticate(n).subscribe((function(e){e.waitingForActivation?t._messageService.info("You have successfully registered. Waiting for activation!"):t.login(e.accessToken,e.encryptedAccessToken,e.expireInSeconds,e.refreshToken,e.refreshTokenExpireInSeconds,!1,"",e.returnUrl)}))}}},{key:"microsoftLogin",value:function(){var e=this;this._logService.debug(WL.getSession());var t=new S.y;t.authProvider=re.MICROSOFT,t.providerAccessCode=WL.getSession().access_token,t.providerKey=WL.getSession().id,t.singleSignIn=Q.a.getSingleSignIn(),t.returnUrl=Q.a.getReturnUrl(),this._tokenAuthService.externalAuthenticate(t).subscribe((function(t){t.waitingForActivation?e._messageService.info("You have successfully registered. Waiting for activation!"):e.login(t.accessToken,t.encryptedAccessToken,t.expireInSeconds,t.refreshToken,t.refreshTokenExpireInSeconds,!1,"",t.returnUrl)}))}}]),e}()).twoFactorRememberClientTokenName="TwoFactorRememberClientToken",W.\u0275fac=function(e){return new(e||W)(b.Oc(S.wb),b.Oc(u.k),b.Oc(ee.a),b.Oc(te.a),b.Oc(ne.a),b.Oc(ie.a))},W.\u0275prov=b.Ac({token:W,factory:W.\u0275fac}),W),ae=n("xDbU"),oe=n("oyxB"),se=n("TaO5"),de=n("5vDB"),le=n("Wfee");function ue(e,t){if(1&e&&b.Fc(0,"nz-alert",23),2&e){var n=b.Vc();b.dd("nzType","error")("nzMessage",n.error)("nzShowIcon",!0)}}function pe(e,t){if(1&e&&b.Fc(0,"validation-messages",24),2&e){b.Vc();var n=b.nd(9);b.dd("formCtrl",n)}}function ge(e,t){if(1&e&&b.Fc(0,"validation-messages",24),2&e){b.Vc();var n=b.nd(15);b.dd("formCtrl",n)}}function me(e,t){if(1&e&&(b.Kc(0,"span"),b.Kc(1,"a",25),b.zd(2),b.Jc(),b.Kc(3,"span"),b.zd(4," | "),b.Jc(),b.Jc()),2&e){var n=b.Vc();b.oc(2),b.Ad(n.l("CreateAnAccount"))}}function fe(e,t){if(1&e&&(b.Kc(0,"span"),b.Kc(1,"a",26),b.zd(2),b.Jc(),b.Kc(3,"span"),b.zd(4," | "),b.Jc(),b.Jc()),2&e){var n=b.Vc();b.oc(2),b.Ad(n.l("NewTenant"))}}var he,ve,be,_e=((he=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,c,a){var o;return _classCallCheck(this,n),(o=t.call(this,e)).loginService=i,o._router=r,o._sessionService=c,o._sessionAppService=a,o.submitting=!1,o.error="",o.isMultiTenancyEnabled=o.multiTenancy.isEnabled,o.recaptchaSiteKey=Z.a.recaptchaSiteKey,o}return _createClass(n,[{key:"setLang",value:function(e){abp.utils.setCookieValue("Abp.Localization.CultureName",e),location.reload()}},{key:"ngOnInit",value:function(){Q.a.getReturnUrl(),Q.a.getSingleSignIn(),this._sessionService.userId>0&&Q.a.getReturnUrl()&&Q.a.getSingleSignIn()&&this._sessionAppService.updateUserSignInToken().subscribe((function(e){var t=Q.a.getReturnUrl();location.href=t+(t.indexOf("?")>=0?"&":"?")+"accessToken="+e.signInToken+"&userId="+e.encodedUserId+"&tenantId="+e.encodedTenantId}))}},{key:"login",value:function(){var e=this;this.submitting=!0,this.loginService.authenticate((function(){e.submitting=!1}),null,this.captchaResponse)}},{key:"captchaResolved",value:function(e){this.captchaResponse=e}},{key:"multiTenancySideIsTenant",get:function(){return this._sessionService.tenantId>0}},{key:"isTenantSelfRegistrationAllowed",get:function(){return this.setting.getBoolean("App.TenantManagement.AllowSelfRegistration")}},{key:"isSelfRegistrationAllowed",get:function(){return!!this._sessionService.tenantId&&this.setting.getBoolean("App.UserManagement.AllowSelfRegistration")}},{key:"useCaptcha",get:function(){return this.setting.getBoolean("App.UserManagement.UseCaptchaOnLogin")}}]),n}(g.a)).\u0275fac=function(e){return new(e||he)(b.Ec(b.x),b.Ec(ce),b.Ec(u.k),b.Ec(ae.a),b.Ec(S.hb))},he.\u0275cmp=b.yc({type:he,selectors:[["app-login"]],features:[b.lc],decls:33,vars:21,consts:[["method","post","novalidate","",1,"kt-form",3,"ngSubmit"],["loginForm","ngForm"],[1,"tabs",3,"nzAnimated"],[3,"nzTitle"],["class","mb-lg",3,"nzType","nzMessage","nzShowIcon",4,"ngIf"],[3,"nzErrorTip"],["nzSize","large","nzPrefixIcon","user"],["nz-input","","name","userNameOrEmailAddress","required","",3,"ngModel","placeholder","ngModelChange"],["userNameOrEmailAddressInput","ngModel"],[3,"formCtrl",4,"ngIf"],["nzErrorTip","'Please enter password!' "],["nzSize","large","nzPrefixIcon","lock"],["nz-input","","type","password","name","password","autocomplete","off","required","",3,"ngModel","placeholder","ngModelChange"],["passwordInput","ngModel"],[3,"nzSpan"],["nz-checkbox","","name","rememberMe",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-right",3,"nzSpan"],["routerLink","/account/forgot-password",1,"forgot"],["nz-button","","type","submit","nzType","primary","nzSize","large","nzBlock","",3,"disabled"],[3,"nzText"],[1,"body","text-center"],[4,"ngIf"],["routerLink","/account/email-activation"],[1,"mb-lg",3,"nzType","nzMessage","nzShowIcon"],[3,"formCtrl"],["routerLink","/account/register"],["routerLink","/account/select-edition"]],template:function(e,t){if(1&e&&(b.Kc(0,"form",0,1),b.Sc("ngSubmit",(function(){return t.login()})),b.Kc(2,"nz-tabset",2),b.Kc(3,"nz-tab",3),b.xd(4,ue,1,3,"nz-alert",4),b.Kc(5,"nz-form-item"),b.Kc(6,"nz-form-control",5),b.Kc(7,"nz-input-group",6),b.Kc(8,"input",7,8),b.Sc("ngModelChange",(function(e){return t.loginService.authenticateModel.userNameOrEmailAddress=e})),b.Jc(),b.xd(10,pe,1,1,"validation-messages",9),b.Jc(),b.Jc(),b.Jc(),b.Kc(11,"nz-form-item"),b.Kc(12,"nz-form-control",10),b.Kc(13,"nz-input-group",11),b.Kc(14,"input",12,13),b.Sc("ngModelChange",(function(e){return t.loginService.authenticateModel.password=e})),b.Jc(),b.xd(16,ge,1,1,"validation-messages",9),b.Jc(),b.Jc(),b.Jc(),b.Jc(),b.Jc(),b.Kc(17,"nz-form-item"),b.Kc(18,"nz-col",14),b.Kc(19,"label",15),b.Sc("ngModelChange",(function(e){return t.loginService.rememberMe=e})),b.zd(20),b.Jc(),b.Jc(),b.Kc(21,"nz-col",16),b.Kc(22,"a",17),b.zd(23),b.Jc(),b.Jc(),b.Jc(),b.Kc(24,"nz-form-item"),b.Kc(25,"button",18),b.zd(26),b.Jc(),b.Jc(),b.Jc(),b.Fc(27,"nz-divider",19),b.Kc(28,"div",20),b.xd(29,me,5,1,"span",21),b.xd(30,fe,5,1,"span",21),b.Kc(31,"a",22),b.zd(32),b.Jc(),b.Jc()),2&e){var n=b.nd(1),i=b.nd(9),r=b.nd(15);b.oc(2),b.dd("nzAnimated",!1),b.oc(1),b.dd("nzTitle",t.l("LogIn")),b.oc(1),b.dd("ngIf",t.error),b.oc(2),b.dd("nzErrorTip","Please enter mobile number!"),b.oc(2),b.dd("ngModel",t.loginService.authenticateModel.userNameOrEmailAddress)("placeholder",t.l("UserNameOrEmail")),b.oc(2),b.dd("ngIf",!i.touched),b.oc(4),b.dd("ngModel",t.loginService.authenticateModel.password)("placeholder",t.l("Password")),b.oc(2),b.dd("ngIf",!r.touched),b.oc(2),b.dd("nzSpan",12),b.oc(1),b.dd("ngModel",t.loginService.rememberMe),b.oc(1),b.Bd(" ",t.l("RememberMe"),""),b.oc(1),b.dd("nzSpan",12),b.oc(2),b.Ad(t.l("ForgotPassword")),b.oc(2),b.dd("disabled",!n.form.valid),b.oc(1),b.Bd(" ",t.l("LogIn")," "),b.oc(1),b.dd("nzText",t.l("LoginWith")),b.oc(2),b.dd("ngIf",t.isSelfRegistrationAllowed),b.oc(1),b.dd("ngIf",!t.multiTenancySideIsTenant&&t.isTenantSelfRegistrationAllowed),b.oc(2),b.Ad(t.l("EmailActivation"))}},directives:[r.v,r.n,r.o,oe.b,oe.a,c.m,K.c,C.c,K.a,C.a,J.c,J.b,r.c,r.u,r.m,r.p,se.a,u.m,I.a,P.a,k.a,de.a,le.a,$.a],styles:["[_nghost-%COMP%]{display:block;width:368px;margin:0 auto}[_nghost-%COMP%]     .ant-tabs .ant-tabs-bar{margin-bottom:24px;text-align:center;border-bottom:0}[_nghost-%COMP%]     .ant-tabs-tab{font-size:16px;line-height:24px}[_nghost-%COMP%]     .ant-input-affix-wrapper .ant-input:not(:first-child){padding-left:4px}[_nghost-%COMP%]     .icon{margin-left:16px;color:rgba(0,0,0,.2);font-size:24px;vertical-align:middle;cursor:pointer;transition:color .3s}[_nghost-%COMP%]     .icon:hover{color:#1890ff}[_nghost-%COMP%]     .other{margin-top:24px;line-height:22px;text-align:left}[_nghost-%COMP%]     .other nz-tooltip{vertical-align:middle}[_nghost-%COMP%]     .other .register{float:right}"]}),he),ye=n("FCZ4"),ke=n("WroF"),we=((be=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,c){var a;return _classCallCheck(this,n),(a=t.call(this,e))._accountService=i,a._appUrlService=r,a._router=c,a.model=new S.eb,a.saving=!1,a}return _createClass(n,[{key:"save",value:function(){var e=this;this.saving=!0,this._accountService.sendPasswordResetCode(this.model).pipe(Object(x.a)((function(){e.saving=!1}))).subscribe((function(){e.message.success(e.l("PasswordResetMailSentMessage"),e.l("MailSent")).then((function(){e._router.navigate(["account/login"])}))}))}}]),n}(Y.a)).\u0275fac=function(e){return new(e||be)(b.Ec(b.x),b.Ec(S.b),b.Ec(ke.a),b.Ec(u.k))},be.\u0275cmp=b.yc({type:be,selectors:[["ng-component"]],features:[b.lc],decls:25,vars:21,consts:[[1,"kt-login__form",2,"display","flex","justify-content","center"],[1,"kt-login__title",2,"width","400px"],[1,"m-0",2,"text-align","center"],["method","post","novalidate","",1,"kt-form",3,"ngSubmit"],["forgotPassForm","ngForm"],[2,"text-align","center"],[1,"form-group"],["autoFocus","","autocomplete","off","nz-input","","email","","maxlength","256","name","emailAddress","required","","type","text",1,"form-control","placeholder-no-fix",3,"ngModel","placeholder","ngModelChange"],["emailAddressInput","ngModel"],[3,"formCtrl"],[2,"margin-top","50px"],[1,"kt-login__actions",2,"display","flex","justify-content","space-between","width","100%"],["nz-button","","routerLink","/account/login","type","button",1,"btn","btn-light","btn-elevate","kt-login__btn-secondary",3,"disabled"],[1,"fa","fa-arrow-left"],["nz-button","","nzType","primary","type","submit",3,"nzLoading","disabled"],[1,"fa","fa-check"]],template:function(e,t){if(1&e&&(b.Kc(0,"div",0),b.Kc(1,"div",1),b.Kc(2,"h3",2),b.zd(3),b.Wc(4,"localize"),b.Jc(),b.Kc(5,"form",3,4),b.Sc("ngSubmit",(function(){return t.save()})),b.Kc(7,"p",5),b.zd(8),b.Wc(9,"localize"),b.Jc(),b.Kc(10,"div",6),b.Kc(11,"input",7,8),b.Sc("ngModelChange",(function(e){return t.model.emailAddress=e})),b.Wc(13,"localize"),b.Jc(),b.Fc(14,"validation-messages",9),b.Jc(),b.Kc(15,"nz-form-item",10),b.Kc(16,"div",11),b.Kc(17,"button",12),b.Fc(18,"i",13),b.zd(19),b.Wc(20,"localize"),b.Jc(),b.Kc(21,"button",14),b.Fc(22,"i",15),b.zd(23),b.Wc(24,"localize"),b.Jc(),b.Jc(),b.Jc(),b.Jc(),b.Jc(),b.Jc()),2&e){var n=b.nd(6),i=b.nd(12);b.dd("@routerTransition",void 0),b.oc(3),b.Bd(" ",b.Xc(4,11,"ForgotPassword")," "),b.oc(5),b.Bd(" ",b.Xc(9,13,"SendPasswordResetLink_Information")," "),b.oc(3),b.fd("placeholder","",b.Xc(13,15,"EmailAddress")," *"),b.dd("ngModel",t.model.emailAddress),b.oc(3),b.dd("formCtrl",i),b.oc(3),b.dd("disabled",t.saving),b.oc(2),b.Bd(" ",b.Xc(20,17,"Back")," "),b.oc(2),b.dd("nzLoading",t.saving)("disabled",!n.form.valid),b.oc(2),b.Bd(" ",b.Xc(24,19,"Submit")," ")}},directives:[r.v,r.n,r.o,J.b,r.c,r.d,r.h,r.u,r.m,r.p,$.a,K.c,C.c,I.a,P.a,k.a,u.l],pipes:[M.a],encapsulation:2,data:{animation:[Object(ye.a)()]}}),be),ze=((ve=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||ve)},ve.\u0275prov=b.Ac({token:ve,factory:ve.\u0275fac}),ve);function Se(e,t){if(1&e&&(b.Kc(0,"div",5),b.zd(1),b.Wc(2,"localize"),b.Jc()),2&e){var n=b.Vc();b.oc(1),b.Bd(" ",b.Yc(2,1,"ConfirmationMailSentPleaseClickLinkInTheEmail",n.model.emailAddress)," ")}}function xe(e,t){1&e&&(b.Kc(0,"div",6),b.zd(1),b.Wc(2,"localize"),b.Jc()),2&e&&(b.oc(1),b.Bd(" ",b.Xc(2,1,"YourAccountIsWaitingToBeActivatedByAdmin")," "))}function Ce(e,t){if(1&e&&(b.Kc(0,"div",7),b.zd(1),b.Wc(2,"localize"),b.Fc(3,"br"),b.Kc(4,"a",8),b.zd(5),b.Jc(),b.Jc()),2&e){var n=b.Vc();b.oc(1),b.Bd(" ",b.Xc(2,3,"TenantRegistrationLoginInfo"),""),b.oc(3),b.ed("href",n.tenantUrl,b.rd),b.oc(1),b.Ad(n.tenantUrl)}}var Ke,Te=((Ke=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,c){var a;return _classCallCheck(this,n),(a=t.call(this,e))._router=i,a._appUrlService=r,a._tenantRegistrationHelper=c,a.model=new S.Z,a.saving=!1,a}return _createClass(n,[{key:"ngOnInit",value:function(){this._tenantRegistrationHelper.registrationResult?(this.model=this._tenantRegistrationHelper.registrationResult,abp.multiTenancy.setTenantIdCookie(this.model.tenantId),this.tenantUrl=this._appUrlService.getAppRootUrlOfTenant(this.model.tenancyName)):this._router.navigate(["account/login"])}}]),n}(Y.a)).\u0275fac=function(e){return new(e||Ke)(b.Ec(b.x),b.Ec(u.k),b.Ec(ke.a),b.Ec(ze))},Ke.\u0275cmp=b.yc({type:Ke,selectors:[["ng-component"]],features:[b.lc],decls:29,vars:23,consts:[[1,"kt-login__form"],[1,"text-muted"],["class","alert alert-warning","role","alert",4,"ngIf"],["class","alert alert-primary","role","alert",4,"ngIf"],["class","alert alert-secondary","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-warning"],["role","alert",1,"alert","alert-primary"],["role","alert",1,"alert","alert-secondary"],[3,"href"]],template:function(e,t){1&e&&(b.Kc(0,"div",0),b.Kc(1,"h4"),b.zd(2),b.Wc(3,"localize"),b.Jc(),b.Kc(4,"ul"),b.Kc(5,"li"),b.Kc(6,"span",1),b.zd(7),b.Wc(8,"localize"),b.Jc(),b.zd(9),b.Jc(),b.Kc(10,"li"),b.Kc(11,"span",1),b.zd(12),b.Wc(13,"localize"),b.Jc(),b.zd(14),b.Jc(),b.Kc(15,"li"),b.Kc(16,"span",1),b.zd(17),b.Wc(18,"localize"),b.Jc(),b.zd(19),b.Jc(),b.Kc(20,"li"),b.Kc(21,"span",1),b.zd(22),b.Wc(23,"localize"),b.Jc(),b.zd(24),b.Jc(),b.Jc(),b.Kc(25,"div"),b.xd(26,Se,3,4,"div",2),b.xd(27,xe,3,3,"div",3),b.xd(28,Ce,6,5,"div",4),b.Jc(),b.Jc()),2&e&&(b.dd("@routerTransition",void 0),b.oc(2),b.Ad(b.Xc(3,13,"SuccessfullyRegistered")),b.oc(5),b.Bd("",b.Xc(8,15,"TenancyName"),":"),b.oc(2),b.Bd(" ",t.model.tenancyName," "),b.oc(3),b.Bd("",b.Xc(13,17,"TenantName"),":"),b.oc(2),b.Bd(" ",t.model.name," "),b.oc(3),b.Bd("",b.Xc(18,19,"UserName"),":"),b.oc(2),b.Bd(" ",t.model.userName," "),b.oc(3),b.Bd("",b.Xc(23,21,"EmailAddress"),":"),b.oc(2),b.Bd(" ",t.model.emailAddress," "),b.oc(2),b.dd("ngIf",t.model.isEmailConfirmationRequired),b.oc(1),b.dd("ngIf",!t.model.isActive),b.oc(1),b.dd("ngIf",t.tenantUrl))},directives:[c.m],pipes:[M.a],encapsulation:2,data:{animation:[Object(ye.a)()]}}),Ke),Je=n("JIr8"),Ie=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(S.Y),Pe=n("gGBz"),Me=n("KIW0");function Ae(e,t){if(1&e&&(b.Kc(0,"h4",30),b.zd(1),b.Wc(2,"localize"),b.Jc()),2&e){var n=b.Vc();b.oc(1),b.Cd("",b.Xc(2,2,"Edition"),": ",n.model.edition.displayName,"")}}function qe(e,t){1&e&&(b.Kc(0,"div"),b.Kc(1,"span",31),b.zd(2),b.Wc(3,"localize"),b.Jc(),b.Jc()),2&e&&(b.oc(2),b.Ad(b.Xc(3,1,"TenantName_Regex_Description")))}function Fe(e,t){if(1&e&&(b.Kc(0,"ul",16),b.Kc(1,"li",32),b.zd(2),b.Wc(3,"localize"),b.Jc(),b.Kc(4,"li",32),b.zd(5),b.Wc(6,"localize"),b.Jc(),b.Kc(7,"li",32),b.zd(8),b.Wc(9,"localize"),b.Jc(),b.Kc(10,"li",32),b.zd(11),b.Wc(12,"localize"),b.Jc(),b.Kc(13,"li",32),b.zd(14),b.Wc(15,"localize"),b.Jc(),b.Jc()),2&e){var n=b.Vc(),i=b.nd(33);b.oc(1),b.dd("hidden",!i.errors.requireDigit),b.oc(1),b.Ad(b.Xc(3,10,"PasswordComplexity_RequireDigit_Hint")),b.oc(2),b.dd("hidden",!i.errors.requireLowercase),b.oc(1),b.Bd("",b.Xc(6,12,"PasswordComplexity_RequireLowercase_Hint")," "),b.oc(2),b.dd("hidden",!i.errors.requireUppercase),b.oc(1),b.Bd("",b.Xc(9,14,"PasswordComplexity_RequireUppercase_Hint")," "),b.oc(2),b.dd("hidden",!i.errors.requireNonAlphanumeric),b.oc(1),b.Bd(" ",b.Xc(12,16,"PasswordComplexity_RequireNonAlphanumeric_Hint"),""),b.oc(2),b.dd("hidden",!i.errors.requiredLength),b.oc(1),b.Bd(" ",b.Yc(15,18,"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength),"")}}function Re(e,t){if(1&e&&(b.Kc(0,"ul",16),b.Kc(1,"li",32),b.zd(2),b.Wc(3,"localize"),b.Jc(),b.Kc(4,"li",32),b.zd(5),b.Wc(6,"localize"),b.Jc(),b.Kc(7,"li",32),b.zd(8),b.Wc(9,"localize"),b.Jc(),b.Kc(10,"li",32),b.zd(11),b.Wc(12,"localize"),b.Jc(),b.Kc(13,"li",32),b.zd(14),b.Wc(15,"localize"),b.Jc(),b.Kc(16,"li",32),b.zd(17),b.Wc(18,"localize"),b.Jc(),b.Jc()),2&e){var n=b.Vc(),i=b.nd(39);b.oc(1),b.dd("hidden",!i.errors.requireDigit),b.oc(1),b.Bd("",b.Xc(3,12,"PasswordComplexity_RequireDigit_Hint")," "),b.oc(2),b.dd("hidden",!i.errors.requireLowercase),b.oc(1),b.Bd(" ",b.Xc(6,14,"PasswordComplexity_RequireLowercase_Hint"),""),b.oc(2),b.dd("hidden",!i.errors.requireUppercase),b.oc(1),b.Bd(" ",b.Xc(9,16,"PasswordComplexity_RequireUppercase_Hint"),""),b.oc(2),b.dd("hidden",!i.errors.requireNonAlphanumeric),b.oc(1),b.Bd(" ",b.Xc(12,18,"PasswordComplexity_RequireNonAlphanumeric_Hint"),""),b.oc(2),b.dd("hidden",!i.errors.requiredLength),b.oc(1),b.Bd(" ",b.Yc(15,20,"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength),""),b.oc(2),b.dd("hidden",i.valid),b.oc(1),b.Ad(b.Xc(18,23,"PasswordsDontMatch"))}}function Oe(e,t){1&e&&(b.Kc(0,"p",33),b.zd(1),b.Wc(2,"localize"),b.Jc()),2&e&&(b.oc(1),b.Bd(" ",b.Xc(2,1,"Captcha_Hint")," "))}function Ne(e,t){1&e&&b.Fc(0,"div",34)}var Ee,Le=((Ee=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,c,a,o){var s;return _classCallCheck(this,n),(s=t.call(this,e))._tenantRegistrationService=i,s._router=r,s._profileService=c,s._tenantRegistrationHelper=a,s._activatedRoute=o,s.model=new Ie,s.passwordComplexitySetting=new S.R,s.subscriptionStartType=S.ob,s.paymentPeriodType=S.T,s.selectedPaymentPeriodType=S.T.Monthly,s.subscriptionPaymentGateway=S.mb,s.paymentId="",s.recaptchaSiteKey=Z.a.recaptchaSiteKey,s.saving=!1,s}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;this.model.editionId=this._activatedRoute.snapshot.queryParams.editionId,this.editionPaymentType=this._activatedRoute.snapshot.queryParams.editionPaymentType,this.model.editionId&&(this.model.subscriptionStartType=this._activatedRoute.snapshot.queryParams.subscriptionStartType),null==this.appSession.tenant?this._profileService.getPasswordComplexitySetting().subscribe((function(t){e.passwordComplexitySetting=t.setting})):this._router.navigate(["account/login"])}},{key:"ngAfterViewInit",value:function(){var e=this;this.model.editionId&&this._tenantRegistrationService.getEdition(this.model.editionId).subscribe((function(t){e.model.edition=t}))}},{key:"save",value:function(){var e=this;!this.useCaptcha||this.model.captchaResponse?(this.saving=!0,this._tenantRegistrationService.registerTenant(this.model).pipe(Object(x.a)((function(){e.saving=!1}))).pipe(Object(Je.a)((function(e,t){}))).subscribe((function(t){e.notify.success(e.l("SuccessfullyRegistered")),e._tenantRegistrationHelper.registrationResult=t,e.model.subscriptionStartType===S.ob.Paid?e._router.navigate(["account/buy"],{queryParams:{tenantId:t.tenantId,editionId:e.model.editionId,subscriptionStartType:e.model.subscriptionStartType,editionPaymentType:e.editionPaymentType}}):e._router.navigate(["account/register-tenant-result"])}))):this.message.warn(this.l("CaptchaCanNotBeEmpty"))}},{key:"captchaResolved",value:function(e){this.model.captchaResponse=e}},{key:"useCaptcha",get:function(){return this.setting.getBoolean("App.TenantManagement.UseCaptchaOnRegistration")}}]),n}(Y.a)).\u0275fac=function(e){return new(e||Ee)(b.Ec(b.x),b.Ec(S.sb),b.Ec(u.k),b.Ec(S.W),b.Ec(ze),b.Ec(u.a))},Ee.\u0275cmp=b.yc({type:Ee,selectors:[["ng-component"]],features:[b.lc],decls:54,vars:59,consts:[[1,"kt-login__form"],[1,"kt-login__title"],["class","text-center",4,"ngIf"],[1,"kt-separator","kt-separator--border-dashed"],["novalidate","","role","form",1,"kt-form","mt-2",3,"submit"],["registerForm","ngForm"],[1,"mt-2"],[1,"form-group"],["nz-input","","autoFocus","","maxlength","64","name","tenancyName","pattern","^[a-zA-Z][a-zA-Z0-9_-]{1,}$","required","","type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["tenancyName","ngModel"],[4,"ngIf"],["nz-input","","maxlength","128","name","Name","required","","type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["nameInput","ngModel"],[3,"formCtrl"],["nz-input","","email","","maxlength","256","name","adminEmailAddress","required","","type","email",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["adminEmailAddressInput","ngModel"],[1,"form-text","text-danger"],["nz-input","","name","Password","pPassword","","required","","type","password","validateEqual","PasswordRepeat","reverse","true",1,"form-control",3,"ngModel","requireDigit","requireLowercase","requireNonAlphanumeric","requireUppercase","requiredLength","placeholder","ngModelChange"],["Password","ngModel"],[1,"form-group",3,"hidden"],["class","form-text text-danger",4,"ngIf"],["name","PasswordRepeat","required","","type","password","validateEqual","Password",1,"form-control",3,"ngModel","requireDigit","requireLowercase","requireNonAlphanumeric","requireUppercase","requiredLength","placeholder"],["PasswordRepeat","ngModel"],["class","mt-2 form-text text-muted",4,"ngIf"],["class","form-group mt-2 text-center captcha-container",4,"ngIf"],[1,"kt-login__actions"],["routerLink","/account/login","type","button",1,"btn","btn-light","btn-elevate","kt-login__btn-secondary",3,"disabled"],[1,"fa","fa-arrow-left"],["nz-button","","nzType","primary","type","submit",1,"btn","btn-primary","btn-elevate","kt-login__btn-primary",3,"nzLoading","disabled"],[1,"fa","fa-check"],[1,"text-center"],[1,"form-text","text-danger","text-left"],[3,"hidden"],[1,"mt-2","form-text","text-muted"],[1,"form-group","mt-2","text-center","captcha-container"]],template:function(e,t){if(1&e&&(b.Kc(0,"div",0),b.Kc(1,"div",1),b.Kc(2,"h3"),b.zd(3),b.Wc(4,"localize"),b.Jc(),b.xd(5,Ae,3,4,"h4",2),b.Fc(6,"div",3),b.Kc(7,"form",4,5),b.Sc("submit",(function(){return t.save()})),b.Kc(9,"h5",6),b.zd(10),b.Wc(11,"localize"),b.Jc(),b.Kc(12,"div",7),b.Kc(13,"input",8,9),b.Sc("ngModelChange",(function(e){return t.model.tenancyName=e})),b.Wc(15,"localize"),b.Jc(),b.xd(16,qe,4,3,"div",10),b.Jc(),b.Kc(17,"div",7),b.Kc(18,"input",11,12),b.Sc("ngModelChange",(function(e){return t.model.name=e})),b.Wc(20,"localize"),b.Jc(),b.Fc(21,"validation-messages",13),b.Jc(),b.Kc(22,"h5",6),b.zd(23),b.Wc(24,"localize"),b.Jc(),b.Kc(25,"div",7),b.Kc(26,"input",14,15),b.Sc("ngModelChange",(function(e){return t.model.adminEmailAddress=e})),b.Wc(28,"localize"),b.Jc(),b.Kc(29,"span",16),b.Fc(30,"validation-messages",13),b.Jc(),b.Jc(),b.Kc(31,"div",7),b.Kc(32,"input",17,18),b.Sc("ngModelChange",(function(e){return t.model.adminPassword=e})),b.Wc(34,"localize"),b.Jc(),b.Kc(35,"div",19),b.xd(36,Fe,16,21,"ul",20),b.Jc(),b.Jc(),b.Kc(37,"div",7),b.Fc(38,"input",21,22),b.Wc(40,"localize"),b.Kc(41,"div",19),b.xd(42,Re,19,25,"ul",20),b.Jc(),b.Jc(),b.xd(43,Oe,3,3,"p",23),b.xd(44,Ne,1,0,"div",24),b.Kc(45,"div",25),b.Kc(46,"button",26),b.Fc(47,"i",27),b.zd(48),b.Wc(49,"localize"),b.Jc(),b.Kc(50,"button",28),b.Fc(51,"i",29),b.zd(52),b.Wc(53,"localize"),b.Jc(),b.Jc(),b.Jc(),b.Jc(),b.Jc()),2&e){var n=b.nd(8),i=b.nd(14),r=b.nd(19),c=b.nd(27),a=b.nd(33),o=b.nd(39);b.dd("@routerTransition",void 0),b.oc(3),b.Bd(" ",b.Xc(4,39,"TenantSignUp")," "),b.oc(2),b.dd("ngIf",t.model.edition),b.oc(5),b.Bd(" ",b.Xc(11,41,"TenantInformations")," "),b.oc(3),b.fd("placeholder","",b.Xc(15,43,"TenancyName")," *"),b.dd("ngModel",t.model.tenancyName),b.oc(3),b.dd("ngIf",!i.valid&&!i.pristine),b.oc(2),b.fd("placeholder","",b.Xc(20,45,"TenantName")," *"),b.dd("ngModel",t.model.name),b.oc(3),b.dd("formCtrl",r),b.oc(2),b.Bd(" ",b.Xc(24,47,"AccountSettings")," "),b.oc(3),b.fd("placeholder","",b.Xc(28,49,"AdminEmailAddress")," *"),b.dd("ngModel",t.model.adminEmailAddress),b.oc(4),b.dd("formCtrl",c),b.oc(2),b.ed("placeholder",b.Xc(34,51,"AdminPassword")),b.dd("ngModel",t.model.adminPassword)("requireDigit",t.passwordComplexitySetting.requireDigit)("requireLowercase",t.passwordComplexitySetting.requireLowercase)("requireNonAlphanumeric",t.passwordComplexitySetting.requireNonAlphanumeric)("requireUppercase",t.passwordComplexitySetting.requireUppercase)("requiredLength",t.passwordComplexitySetting.requiredLength),b.oc(3),b.dd("hidden",n.form.valid||n.form.pristine),b.oc(1),b.dd("ngIf",a.errors),b.oc(2),b.ed("placeholder",b.Xc(40,53,"PasswordRepeat")),b.dd("ngModel",t.model.passwordRepeat)("requireDigit",t.passwordComplexitySetting.requireDigit)("requireLowercase",t.passwordComplexitySetting.requireLowercase)("requireNonAlphanumeric",t.passwordComplexitySetting.requireNonAlphanumeric)("requireUppercase",t.passwordComplexitySetting.requireUppercase)("requiredLength",t.passwordComplexitySetting.requiredLength),b.oc(3),b.dd("hidden",n.form.valid||n.form.pristine),b.oc(1),b.dd("ngIf",o.errors),b.oc(1),b.dd("ngIf",t.useCaptcha),b.oc(1),b.dd("ngIf",t.useCaptcha),b.oc(2),b.dd("disabled",t.saving),b.oc(2),b.Bd(" ",b.Xc(49,55,"Back")," "),b.oc(2),b.dd("nzLoading",t.saving)("disabled",!n.form.valid),b.oc(2),b.Bd(" ",b.Xc(53,57,"Submit")," ")}},directives:[c.m,r.v,r.n,r.o,J.b,r.c,r.h,r.r,r.u,r.m,r.p,$.a,r.d,Pe.a,Me.a,u.l,I.a,P.a,k.a],pipes:[M.a],encapsulation:2,data:{animation:[Object(ye.a)()]}}),Ee),Be=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(S.X);function Ue(e,t){if(1&e&&(b.Kc(0,"ul",27),b.Kc(1,"li",28),b.zd(2),b.Jc(),b.Kc(3,"li",28),b.zd(4),b.Jc(),b.Kc(5,"li",28),b.zd(6),b.Jc(),b.Kc(7,"li",28),b.zd(8),b.Jc(),b.Kc(9,"li",28),b.zd(10),b.Jc(),b.Jc()),2&e){var n=b.Vc(),i=b.nd(24);b.oc(1),b.dd("hidden",!i.errors.requireDigit),b.oc(1),b.Ad(n.l("PasswordComplexity_RequireDigit_Hint")),b.oc(1),b.dd("hidden",!i.errors.requireLowercase),b.oc(1),b.Bd(" ",n.l("PasswordComplexity_RequireLowercase_Hint")," "),b.oc(1),b.dd("hidden",!i.errors.requireUppercase),b.oc(1),b.Bd(" ",n.l("PasswordComplexity_RequireUppercase_Hint")," "),b.oc(1),b.dd("hidden",!i.errors.requireNonAlphanumeric),b.oc(1),b.Bd(" ",n.l("PasswordComplexity_RequireNonAlphanumeric_Hint")," "),b.oc(1),b.dd("hidden",!i.errors.requiredLength),b.oc(1),b.Bd(" ",n.l("PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength)," ")}}function We(e,t){if(1&e&&(b.Kc(0,"ul",27),b.Kc(1,"li",28),b.zd(2),b.Jc(),b.Kc(3,"li",28),b.zd(4),b.Jc(),b.Kc(5,"li",28),b.zd(6),b.Jc(),b.Kc(7,"li",28),b.zd(8),b.Jc(),b.Kc(9,"li",28),b.zd(10),b.Jc(),b.Kc(11,"li",28),b.zd(12),b.Jc(),b.Jc()),2&e){var n=b.Vc(),i=b.nd(30);b.oc(1),b.dd("hidden",!i.errors.requireDigit),b.oc(1),b.Bd(" ",n.l("PasswordComplexity_RequireDigit_Hint")," "),b.oc(1),b.dd("hidden",!i.errors.requireLowercase),b.oc(1),b.Bd(" ",n.l("PasswordComplexity_RequireLowercase_Hint")," "),b.oc(1),b.dd("hidden",!i.errors.requireUppercase),b.oc(1),b.Bd(" ",n.l("PasswordComplexity_RequireUppercase_Hint")," "),b.oc(1),b.dd("hidden",!i.errors.requireNonAlphanumeric),b.oc(1),b.Bd(" ",n.l("PasswordComplexity_RequireNonAlphanumeric_Hint")," "),b.oc(1),b.dd("hidden",!i.errors.requiredLength),b.oc(1),b.Bd(" ",n.l("PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength)," "),b.oc(1),b.dd("hidden",i.valid),b.oc(1),b.Ad(n.l("PasswordsDontMatch"))}}function Xe(e,t){if(1&e&&(b.Kc(0,"p",29),b.zd(1),b.Jc()),2&e){var n=b.Vc();b.oc(1),b.Bd(" ",n.l("Captcha_Hint")," ")}}function je(e,t){1&e&&b.Fc(0,"div",30)}function Ve(e,t){1&e&&(b.Kc(0,"h2",22),b.zd(1),b.Wc(2,"localize"),b.Jc()),2&e&&(b.oc(1),b.Bd(" ",b.Xc(2,1,"Free")," "))}function De(e,t){if(1&e&&(b.Kc(0,"span",24),b.zd(1),b.Wc(2,"localize"),b.Fc(3,"br"),b.Jc()),2&e){var n=b.Vc(2).$implicit,i=b.Vc();b.oc(1),b.Dd(" ",i.appSession.application.currencySign," ",n.edition.dailyPrice," ",b.Xc(2,3,"PerDay")," ")}}function He(e,t){if(1&e&&(b.Kc(0,"span",24),b.zd(1),b.Wc(2,"localize"),b.Fc(3,"br"),b.Jc()),2&e){var n=b.Vc(2).$implicit,i=b.Vc();b.oc(1),b.Dd(" ",i.appSession.application.currencySign," ",n.edition.weeklyPrice," ",b.Xc(2,3,"PerWeek")," ")}}function Ye(e,t){if(1&e&&(b.Kc(0,"span",24),b.zd(1),b.Wc(2,"localize"),b.Fc(3,"br"),b.Jc()),2&e){var n=b.Vc(2).$implicit,i=b.Vc();b.oc(1),b.Dd(" ",i.appSession.application.currencySign," ",n.edition.monthlyPrice," ",b.Xc(2,3,"PerMonth")," ")}}function $e(e,t){if(1&e&&(b.Kc(0,"span",24),b.zd(1),b.Wc(2,"localize"),b.Jc()),2&e){var n=b.Vc(2).$implicit,i=b.Vc();b.oc(1),b.Dd(" ",i.appSession.application.currencySign," ",n.edition.annualPrice," ",b.Xc(2,3,"PerYear")," ")}}function Ge(e,t){if(1&e&&(b.Kc(0,"h2",22),b.xd(1,De,4,5,"span",23),b.xd(2,He,4,5,"span",23),b.xd(3,Ye,4,5,"span",23),b.xd(4,$e,3,5,"span",23),b.Jc()),2&e){var n=b.Vc().$implicit;b.oc(1),b.dd("ngIf",n.edition.dailyPrice>0),b.oc(1),b.dd("ngIf",n.edition.weeklyPrice>0),b.oc(1),b.dd("ngIf",n.edition.monthlyPrice>0),b.oc(1),b.dd("ngIf",n.edition.annualPrice>0)}}function Ze(e,t){1&e&&b.Fc(0,"i",28)}function Qe(e,t){1&e&&b.Fc(0,"i",29)}function et(e,t){if(1&e&&(b.Ic(0),b.xd(1,Ze,1,0,"i",26),b.xd(2,Qe,1,0,"i",27),b.Hc()),2&e){var n=b.Vc().$implicit,i=b.Vc().$implicit,r=b.Vc();b.oc(1),b.dd("ngIf",r.featureEnabledForEdition(n,i)),b.oc(1),b.dd("ngIf",!r.featureEnabledForEdition(n,i))}}function tt(e,t){if(1&e&&(b.Ic(0),b.zd(1),b.Hc()),2&e){var n=b.Vc().$implicit;b.oc(1),b.Bd("",n.displayName," ")}}function nt(e,t){1&e&&(b.Ic(0),b.Fc(1,"i",28),b.Hc())}function it(e,t){if(1&e&&(b.Ic(0),b.zd(1),b.Hc()),2&e){var n=b.Vc().$implicit,i=b.Vc().$implicit,r=b.Vc();b.oc(1),b.Cd(" ",n.displayName,":",r.getFeatureValueForEdition(n,i)," ")}}function rt(e,t){if(1&e&&(b.Ic(0),b.xd(1,et,3,2,"ng-container",25),b.xd(2,tt,2,1,"ng-container",25),b.xd(3,nt,2,0,"ng-container",25),b.xd(4,it,2,2,"ng-container",25),b.Fc(5,"br"),b.Hc()),2&e){var n=t.$implicit,i=b.Vc(2);b.oc(1),b.dd("ngIf",i.isTrueFalseFeature(n)),b.oc(1),b.dd("ngIf",i.isTrueFalseFeature(n)),b.oc(1),b.dd("ngIf",!i.isTrueFalseFeature(n)),b.oc(1),b.dd("ngIf",!i.isTrueFalseFeature(n))}}function ct(e,t){if(1&e){var n=b.Lc();b.Kc(0,"button",30),b.Sc("click",(function(){b.pd(n);var e=b.Vc().$implicit,t=b.Vc();return t.upgrade(e.edition,t.editionPaymentType.Upgrade)})),b.zd(1),b.Wc(2,"localize"),b.Jc()}2&e&&(b.oc(1),b.Bd(" ",b.Xc(2,1,"Upgrade")," "))}var at=function(e,t){return{editionId:e,subscriptionStartType:t}},ot=function(){return["/account/register-tenant"]};function st(e,t){if(1&e&&(b.Kc(0,"button",31),b.zd(1),b.Wc(2,"localize"),b.Jc()),2&e){var n=b.Vc().$implicit,i=b.Vc();b.dd("queryParams",b.id(5,at,n.edition.id,i.subscriptionStartType.Free))("routerLink",b.gd(8,ot)),b.oc(1),b.Bd(" ",b.Xc(2,3,"Start")," ")}}function dt(e,t){if(1&e&&(b.Kc(0,"button",32),b.zd(1),b.Wc(2,"localize"),b.Jc()),2&e){var n=b.Vc().$implicit,i=b.Vc();b.dd("queryParams",b.id(5,at,n.edition.id,i.subscriptionStartType.Trial))("routerLink",b.gd(8,ot)),b.oc(1),b.Bd(" ",b.Xc(2,3,"FreeTrial")," ")}}var lt=function(e,t,n){return{editionId:e,subscriptionStartType:t,editionPaymentType:n}};function ut(e,t){if(1&e&&(b.Kc(0,"button",33),b.zd(1),b.Wc(2,"localize"),b.Jc()),2&e){var n=b.Vc().$implicit,i=b.Vc();b.dd("queryParams",b.jd(5,lt,n.edition.id,i.subscriptionStartType.Paid,i.editionPaymentType.NewRegistration))("routerLink",b.gd(9,ot)),b.oc(1),b.Bd(" ",b.Xc(2,3,"BuyNow")," ")}}function pt(e,t){if(1&e&&(b.Kc(0,"div",8),b.Kc(1,"div",9),b.Fc(2,"div",10),b.Fc(3,"div",11),b.Kc(4,"span",12),b.Fc(5,"i"),b.Jc(),b.Jc(),b.Kc(6,"span",13),b.zd(7),b.Jc(),b.xd(8,Ve,3,3,"h2",14),b.xd(9,Ge,5,4,"h2",14),b.Kc(10,"span",15),b.xd(11,rt,6,4,"ng-container",16),b.Jc(),b.Kc(12,"div",17),b.xd(13,ct,3,3,"button",18),b.xd(14,st,3,9,"button",19),b.xd(15,dt,3,9,"button",20),b.xd(16,ut,3,10,"button",21),b.Jc(),b.Jc()),2&e){var n=t.$implicit,i=t.index,r=b.Vc();b.oc(5),b.rc("fa ",r.editionIcons[i],""),b.oc(2),b.Bd(" ",n.edition.displayName," "),b.oc(1),b.dd("ngIf",r.isFree(n.edition)),b.oc(1),b.dd("ngIf",!r.isFree(n.edition)),b.oc(2),b.dd("ngForOf",r.editionsSelectOutput.allFeatures),b.oc(2),b.dd("ngIf",r.isUserLoggedIn),b.oc(1),b.dd("ngIf",!r.isUserLoggedIn&&r.isFree(n.edition)),b.oc(1),b.dd("ngIf",!r.isUserLoggedIn&&!r.isFree(n.edition)&&n.edition.trialDayCount),b.oc(1),b.dd("ngIf",!r.isUserLoggedIn&&!r.isFree(n.edition))}}var gt,mt,ft,ht,vt=[{path:"",component:j,children:[{path:"",redirectTo:"login"},{path:"login",component:_e,canActivate:[H],data:{title:"\u767b\u5f55"}},{path:"register",component:(mt=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,c,a){var o;return _classCallCheck(this,n),(o=t.call(this,e))._accountService=i,o._router=r,o._loginService=c,o._profileService=a,o.model=new Be,o.passwordComplexitySetting=new S.R,o.recaptchaSiteKey=Z.a.recaptchaSiteKey,o.saving=!1,o}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;null!=this.appSession.tenant?this._profileService.getPasswordComplexitySetting().subscribe((function(t){e.passwordComplexitySetting=t.setting})):this._router.navigate(["account/login"])}},{key:"save",value:function(){var e=this;!this.useCaptcha||this.model.captchaResponse?(this.saving=!0,this._accountService.register(this.model).pipe(Object(x.a)((function(){e.saving=!1}))).pipe(Object(Je.a)((function(e,t){}))).subscribe((function(t){if(!t.canLogin)return e.notify.success(e.l("SuccessfullyRegistered")),void e._router.navigate(["account/login"]);e.saving=!0,e._loginService.authenticateModel.userNameOrEmailAddress=e.model.userName,e._loginService.authenticateModel.password=e.model.password,e._loginService.authenticate((function(){e.saving=!1}))}))):this.message.warn(this.l("CaptchaCanNotBeEmpty"))}},{key:"captchaResolved",value:function(e){this.model.captchaResponse=e}},{key:"useCaptcha",get:function(){return!1}}]),n}(Y.a),mt.\u0275fac=function(e){return new(e||mt)(b.Ec(b.x),b.Ec(S.b),b.Ec(u.k),b.Ec(ce),b.Ec(S.W))},mt.\u0275cmp=b.yc({type:mt,selectors:[["ng-component"]],features:[b.lc],decls:42,vars:42,consts:[[1,"kt-login__form",2,"display","flex","justify-content","center"],[1,"kt-login__title",2,"width","400px"],[2,"text-align","center"],["method","post","novalidate","",1,"kt-form",3,"ngSubmit"],["registerForm","ngForm"],["nz-input","","autoFocus","","maxlength","64","name","Name","required","","type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["nameInput","ngModel"],[3,"formCtrl"],["nz-input","","maxlength","64","name","Surname","required","","type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["surnameInput","ngModel"],["nz-input","","maxlength","256","name","EmailAddress","pattern","^\\w+([-+.']\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$","required","","type","email",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["emailAddressInput","ngModel"],["nz-input","","autocomplete","off","maxlength","256","name","UserName","required","","type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["userNameInput","ngModel"],["nz-input","","name","Password","pPassword","","required","","type","password","validateEqual","PasswordRepeat","reverse","true",1,"form-control",3,"ngModel","placeholder","requireDigit","requireLowercase","requireNonAlphanumeric","requireUppercase","requiredLength","ngModelChange"],["Password","ngModel"],[1,"form-group",3,"hidden"],["class","form-text text-danger",4,"ngIf"],["nz-input","","name","PasswordRepeat","required","","type","password","validateEqual","Password",1,"form-control",3,"ngModel","requireDigit","requireLowercase","requireNonAlphanumeric","requireUppercase","requiredLength","placeholder"],["PasswordRepeat","ngModel"],["class","mt-2 form-text text-muted",4,"ngIf"],["class","form-group mt-2 captcha-container",4,"ngIf"],[1,"kt-login__actions",2,"display","flex","justify-content","space-around"],["nz-button","","routerLink","/account/login","type","button",1,"btn","btn-light","btn-elevate","kt-login__btn-secondary",3,"disabled"],[1,"fa","fa-arrow-left"],["nz-button","","type","submit",1,"btn","btn-primary","btn-elevate","kt-login__btn-primary",3,"nzLoading","disabled"],[1,"fa","fa-check"],[1,"form-text","text-danger"],[3,"hidden"],[1,"mt-2","form-text","text-muted"],[1,"form-group","mt-2","captcha-container"]],template:function(e,t){if(1&e&&(b.Kc(0,"div",0),b.Kc(1,"div",1),b.Kc(2,"h3",2),b.zd(3),b.Jc(),b.Kc(4,"form",3,4),b.Sc("ngSubmit",(function(){return t.save()})),b.Kc(6,"nz-form-item"),b.Kc(7,"input",5,6),b.Sc("ngModelChange",(function(e){return t.model.name=e})),b.Jc(),b.Fc(9,"validation-messages",7),b.Jc(),b.Kc(10,"nz-form-item"),b.Kc(11,"input",8,9),b.Sc("ngModelChange",(function(e){return t.model.surname=e})),b.Jc(),b.Fc(13,"validation-messages",7),b.Jc(),b.Kc(14,"nz-form-item"),b.Kc(15,"input",10,11),b.Sc("ngModelChange",(function(e){return t.model.emailAddress=e})),b.Jc(),b.Fc(17,"validation-messages",7),b.Jc(),b.Kc(18,"nz-form-item"),b.Kc(19,"input",12,13),b.Sc("ngModelChange",(function(e){return t.model.userName=e})),b.Jc(),b.Fc(21,"validation-messages",7),b.Jc(),b.Kc(22,"nz-form-item"),b.Kc(23,"input",14,15),b.Sc("ngModelChange",(function(e){return t.model.password=e})),b.Wc(25,"localize"),b.Jc(),b.Jc(),b.Kc(26,"div",16),b.xd(27,Ue,11,10,"ul",17),b.Jc(),b.Kc(28,"nz-form-item"),b.Fc(29,"input",18,19),b.Jc(),b.Kc(31,"div",16),b.xd(32,We,13,12,"ul",17),b.Jc(),b.xd(33,Xe,2,1,"p",20),b.xd(34,je,1,0,"div",21),b.Kc(35,"div",22),b.Kc(36,"button",23),b.Fc(37,"i",24),b.zd(38),b.Jc(),b.Kc(39,"button",25),b.Fc(40,"i",26),b.zd(41),b.Jc(),b.Jc(),b.Jc(),b.Jc(),b.Jc()),2&e){var n=b.nd(5),i=b.nd(8),r=b.nd(12),c=b.nd(16),a=b.nd(20),o=b.nd(24),s=b.nd(30);b.dd("@routerTransition",void 0),b.oc(3),b.Bd(" ",t.l("SignUp")," "),b.oc(4),b.fd("placeholder","",t.l("Name")," *"),b.dd("ngModel",t.model.name),b.oc(2),b.dd("formCtrl",i),b.oc(2),b.fd("placeholder","",t.l("Surname")," *"),b.dd("ngModel",t.model.surname),b.oc(2),b.dd("formCtrl",r),b.oc(2),b.fd("placeholder","",t.l("EmailAddress")," *"),b.dd("ngModel",t.model.emailAddress),b.oc(2),b.dd("formCtrl",c),b.oc(2),b.fd("placeholder","",t.l("UserName")," *"),b.dd("ngModel",t.model.userName),b.oc(2),b.dd("formCtrl",a),b.oc(2),b.ed("placeholder",b.Xc(25,40,"Password")),b.dd("ngModel",t.model.password)("placeholder",t.l("PleaseEnterYourNewPassword"))("requireDigit",t.passwordComplexitySetting.requireDigit)("requireLowercase",t.passwordComplexitySetting.requireLowercase)("requireNonAlphanumeric",t.passwordComplexitySetting.requireNonAlphanumeric)("requireUppercase",t.passwordComplexitySetting.requireUppercase)("requiredLength",t.passwordComplexitySetting.requiredLength),b.oc(3),b.dd("hidden",n.form.valid||n.form.pristine),b.oc(1),b.dd("ngIf",o.errors),b.oc(2),b.ed("placeholder",t.l("PasswordRepeat")),b.dd("ngModel",t.model.passwordRepeat)("requireDigit",t.passwordComplexitySetting.requireDigit)("requireLowercase",t.passwordComplexitySetting.requireLowercase)("requireNonAlphanumeric",t.passwordComplexitySetting.requireNonAlphanumeric)("requireUppercase",t.passwordComplexitySetting.requireUppercase)("requiredLength",t.passwordComplexitySetting.requiredLength),b.oc(2),b.dd("hidden",n.form.valid||n.form.pristine),b.oc(1),b.dd("ngIf",s.errors),b.oc(1),b.dd("ngIf",t.useCaptcha),b.oc(1),b.dd("ngIf",t.useCaptcha),b.oc(2),b.dd("disabled",t.saving),b.oc(2),b.Bd(" ",t.l("Back")," "),b.oc(1),b.dd("nzLoading",t.saving)("disabled",!n.form.valid),b.oc(2),b.Bd(" ",t.l("Submit")," ")}},directives:[r.v,r.n,r.o,K.c,C.c,J.b,r.c,r.h,r.u,r.m,r.p,$.a,r.r,Pe.a,Me.a,c.m,I.a,P.a,k.a,u.l],pipes:[M.a],encapsulation:2,data:{animation:[Object(ye.a)()]}}),mt),canActivate:[H]},{path:"register-tenant",component:Le,canActivate:[H]},{path:"register-tenant-result",component:Te,canActivate:[H]},{path:"forgot-password",component:we,canActivate:[H]},{path:"email-activation",component:G,canActivate:[H]},{path:"select-edition",component:(gt=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,c){var a;return _classCallCheck(this,n),(a=t.call(this,e))._tenantRegistrationService=i,a._subscriptionService=r,a._router=c,a.editionsSelectOutput=new S.u,a.isUserLoggedIn=!1,a.editionPaymentType=S.s,a.subscriptionStartType=S.ob,a.editionIcons=["flaticon-open-box","flaticon-rocket","flaticon-gift","flaticon-confetti","flaticon-cogwheel-2","flaticon-app","flaticon-coins","flaticon-piggy-bank","flaticon-bag","flaticon-lifebuoy","flaticon-technology-1","flaticon-cogwheel-1","flaticon-infinity","flaticon-interface-5","flaticon-squares-3","flaticon-interface-6","flaticon-mark","flaticon-business","flaticon-interface-7","flaticon-list-2","flaticon-bell","flaticon-technology","flaticon-squares-2","flaticon-notes","flaticon-profile","flaticon-layers","flaticon-interface-4","flaticon-signs","flaticon-menu-1","flaticon-symbol"],a}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;this.isUserLoggedIn=abp.session.userId>0,this._tenantRegistrationService.getEditionsForSelect().subscribe((function(t){e.editionsSelectOutput=t,(!e.editionsSelectOutput.editionsWithFeatures||e.editionsSelectOutput.editionsWithFeatures.length<=0)&&e._router.navigate(["/account/register-tenant"])}))}},{key:"isFree",value:function(e){return!e.monthlyPrice&&!e.annualPrice}},{key:"isTrueFalseFeature",value:function(e){return"CHECKBOX"===e.inputType.name}},{key:"featureEnabledForEdition",value:function(e,t){var n=m.filter(t.featureValues,{name:e.name});return!(!n||n.length<=0)&&"true"===n[0].value.toLowerCase()}},{key:"getFeatureValueForEdition",value:function(e,t){var n=m.filter(t.featureValues,{name:e.name});return!n||n.length<=0?"":n[0].value}},{key:"upgrade",value:function(e,t){this._router.navigate(["/account/upgrade"],{queryParams:{upgradeEditionId:e.id,editionPaymentType:t}})}}]),n}(Y.a),gt.\u0275fac=function(e){return new(e||gt)(b.Ec(b.x),b.Ec(S.sb),b.Ec(S.nb),b.Ec(u.k))},gt.\u0275cmp=b.yc({type:gt,selectors:[["ng-component"]],features:[b.lc],decls:8,vars:2,consts:[[1,"kt-login__form"],[1,"kt-content","kt-grid__item","kt-grid__item--fluid","kt-grid","kt-grid--hor"],[1,"kt-container","kt-container--fluid","kt-grid__item","kt-grid__item--fluid"],[1,"kt-portlet"],[1,"kt-portlet__body"],[1,"kt-pricing-1","kt-pricing-1--fixed"],[1,"kt-pricing-1__items","row","row-centered"],["class","kt-pricing-1__item col-lg-3 col-centered",4,"ngFor","ngForOf"],[1,"kt-pricing-1__item","col-lg-3","col-centered"],[1,"kt-pricing-1__visual"],[1,"kt-pricing-1__hexagon1"],[1,"kt-pricing-1__hexagon2"],[1,"kt-pricing-1__icon","kt-font-brand"],[1,"kt-pricing-1__price"],["class","kt-pricing-1__subtitle",4,"ngIf"],[1,"kt-pricing-1__description"],[4,"ngFor","ngForOf"],[1,"kt-pricing-1__btn"],["class","btn btn-warning btn-pill  btn-brand btn-wide btn-uppercase btn-bolder btn-sm mx-2",3,"click",4,"ngIf"],["class","btn btn-success btn-pill  btn-brand btn-wide btn-uppercase btn-bolder btn-sm mx-2",3,"queryParams","routerLink",4,"ngIf"],["class","btn btn-warning btn-pill  btn-brand btn-wide btn-uppercase btn-bolder btn-sm mx-2",3,"queryParams","routerLink",4,"ngIf"],["class","btn btn-primary btn-pill  btn-brand btn-wide btn-uppercase btn-bolder btn-sm mx-2",3,"queryParams","routerLink",4,"ngIf"],[1,"kt-pricing-1__subtitle"],["class","kt-pricing-1__label",4,"ngIf"],[1,"kt-pricing-1__label"],[4,"ngIf"],["class","la la-check kt-font-success",4,"ngIf"],["class","la la-times kt-font-dark",4,"ngIf"],[1,"la","la-check","kt-font-success"],[1,"la","la-times","kt-font-dark"],[1,"btn","btn-warning","btn-pill","btn-brand","btn-wide","btn-uppercase","btn-bolder","btn-sm","mx-2",3,"click"],[1,"btn","btn-success","btn-pill","btn-brand","btn-wide","btn-uppercase","btn-bolder","btn-sm","mx-2",3,"queryParams","routerLink"],[1,"btn","btn-warning","btn-pill","btn-brand","btn-wide","btn-uppercase","btn-bolder","btn-sm","mx-2",3,"queryParams","routerLink"],[1,"btn","btn-primary","btn-pill","btn-brand","btn-wide","btn-uppercase","btn-bolder","btn-sm","mx-2",3,"queryParams","routerLink"]],template:function(e,t){1&e&&(b.Kc(0,"div",0),b.Kc(1,"div",1),b.Kc(2,"div",2),b.Kc(3,"div",3),b.Kc(4,"div",4),b.Kc(5,"div",5),b.Kc(6,"div",6),b.xd(7,pt,17,11,"div",7),b.Jc(),b.Jc(),b.Jc(),b.Jc(),b.Jc(),b.Jc(),b.Jc()),2&e&&(b.dd("@routerTransition",void 0),b.oc(7),b.dd("ngForOf",t.editionsSelectOutput.editionsWithFeatures))},directives:[c.l,c.m,u.l],pipes:[M.a],styles:['body{background-color:#f2f3f8}button:disabled,button[disabled]{cursor:not-allowed!important}.kt-pricing-1{overflow:hidden}.kt-pricing-1.kt-pricing-1--fixed{width:75%;margin:0 auto}.kt-pricing-1 .kt-pricing-1__items{position:relative;z-index:1;padding:2.14rem 0;text-align:center;background-color:#fff}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item{padding:0;border-right:.07rem solid #ebedf2}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item:last-child{border-right:none}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual{position:relative;left:50%;margin-top:10rem;transform:translateX(-50%) translateY(-50%)}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__hexagon1{position:absolute;left:50%;transform:translateX(-50%) translateY(-50%)}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__hexagon1:before{position:absolute;top:-3.93rem;left:50%;width:17.14rem;height:0;border-right:4.2rem solid transparent;border-bottom:7.5rem solid #fcfcfe;border-left:4.2rem solid transparent;transform:translateX(-50%) translateY(-50%);content:""}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__hexagon1:after{position:absolute;top:3.5rem;left:50%;width:17.14rem;height:0;border-top:7.5rem solid #fcfcfe;border-right:4.2rem solid transparent;border-left:4.2rem solid transparent;transform:translateX(-50%) translateY(-50%);content:""}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__hexagon2{position:absolute;left:50%;margin-top:-1.43rem;transform:translateX(-50%) translateY(-50%)}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__hexagon2:before{position:absolute;top:-.42rem;left:50%;width:8.7rem;height:0;border-right:2.14rem solid transparent;border-bottom:3.71rem solid #f8f7fd;border-left:2.14rem solid transparent;transform:translateX(-50%) translateY(-50%);content:""}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__hexagon2:after{position:absolute;top:3.3rem;left:50%;width:8.7rem;height:0;border-top:3.71rem solid #f8f7fd;border-right:2.14rem solid transparent;border-left:2.14rem solid transparent;transform:translateX(-50%) translateY(-50%);content:""}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__icon{position:absolute;left:50%;transform:translateX(-50%) translateY(-50%)}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__visual .kt-pricing-1__icon>i{font-size:8.57rem}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__price{display:block;margin-top:20rem;color:#6c7293;font-weight:700;font-size:2rem}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__price .kt-pricing-1__label{position:absolute;margin-top:.64rem;margin-left:.357rem;color:#a7abc3;font-weight:500;font-size:1.64rem}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__subtitle{color:#adb1c7;font-weight:500;font-size:1.1rem}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__description{margin:1.785rem auto;padding:0 .5rem;color:#a7abc3;font-weight:400;font-size:1rem}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__description>span{display:block;text-align:center}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__btn{margin:2.14rem 0}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__btn>.btn{padding:.86rem 3.57rem}@media (min-width:1025px) and (max-width:1399px){.kt-pricing-1.kt-pricing-1--fixed{width:100%}.kt-pricing-1.kt-pricing-1--fixed .kt-pricing-1__items .kt-pricing-1__item{border-right:1px solid #ebedf2}.kt-pricing-1.kt-pricing-1--fixed .kt-pricing-1__items .kt-pricing-1__item:last-child{border-right:none}}@media (max-width:1024px){.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item{border-right:none;border-bottom:1px solid #ebedf2}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item:last-child{border-bottom:none}.kt-pricing-1 .kt-pricing-1__items .kt-pricing-1__item .kt-pricing-1__btn{margin-bottom:3.57rem}}.row-centered{display:block!important;text-align:center}.col-centered{display:inline-table;float:none;margin-right:-4px;text-align:center}'],encapsulation:2,data:{animation:[Object(ye.a)()]}}),gt)}]}],bt=((ht=function e(){_classCallCheck(this,e)}).\u0275mod=b.Cc({type:ht}),ht.\u0275inj=b.Bc({factory:function(e){return new(e||ht)},imports:[[u.n.forChild(vt)],u.n]}),ht),_t=((ft=function e(){_classCallCheck(this,e)}).\u0275mod=b.Cc({type:ft}),ft.\u0275inj=b.Bc({factory:function(e){return new(e||ft)},providers:[ce,H],imports:[[l.a,r.g,r.t,c.c,bt,a.a,d.a,s.a,o.a]]}),ft)}}]);